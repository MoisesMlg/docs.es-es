---
title: Paralelismo de datos (biblioteca TPL)
description: Vea cómo la biblioteca TPL admite el paralelismo de datos para realizar la misma operación simultáneamente en los elementos de una colección o matriz de origen en .NET.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- parallelism, data
ms.assetid: 3f05f33f-f1da-4b16-81c2-9ceff1bef449
ms.openlocfilehash: ce034260fd3e6746bb7d516483b5e6872dfdc172
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/24/2020
ms.locfileid: "95699032"
---
# <a name="data-parallelism-task-parallel-library"></a><span data-ttu-id="1c09c-103">Paralelismo de datos (biblioteca TPL)</span><span class="sxs-lookup"><span data-stu-id="1c09c-103">Data Parallelism (Task Parallel Library)</span></span>

<span data-ttu-id="1c09c-104">El *paralelismo de datos* hace referencia a los escenarios en los que la misma operación se realiza simultáneamente (es decir, en paralelo) en elementos de una colección o matriz de origen.</span><span class="sxs-lookup"><span data-stu-id="1c09c-104">*Data parallelism* refers to scenarios in which the same operation is performed concurrently (that is, in parallel) on elements in a source collection or array.</span></span> <span data-ttu-id="1c09c-105">En las operaciones paralelas de datos, se crean particiones de la colección de origen para que varios subprocesos puedan funcionar simultáneamente en segmentos diferentes.</span><span class="sxs-lookup"><span data-stu-id="1c09c-105">In data parallel operations, the source collection is partitioned so that multiple threads can operate on different segments concurrently.</span></span>  
  
 <span data-ttu-id="1c09c-106">La biblioteca TPL (Task Parallel Library, biblioteca de procesamiento paralelo basado en tareas) admite el paralelismo de datos a través de la clase <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="1c09c-106">The Task Parallel Library (TPL) supports data parallelism through the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="1c09c-107">Esta clase proporciona las implementaciones paralelas basadas en método de los bucles [for](../../csharp/language-reference/keywords/for.md) y [foreach](../../csharp/language-reference/keywords/foreach-in.md) (`For` y `For Each` en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="1c09c-107">This class provides method-based parallel implementations of [for](../../csharp/language-reference/keywords/for.md) and [foreach](../../csharp/language-reference/keywords/foreach-in.md) loops (`For` and `For Each` in Visual Basic).</span></span> <span data-ttu-id="1c09c-108">Se escribe la lógica del bucle para un bucle <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> o <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> de forma muy similar a como se escribiría un bucle secuencial.</span><span class="sxs-lookup"><span data-stu-id="1c09c-108">You write the loop logic for a <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> loop much as you would write a sequential loop.</span></span> <span data-ttu-id="1c09c-109">No tiene que crear los subprocesos ni poner en la cola los elementos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1c09c-109">You do not have to create threads or queue work items.</span></span> <span data-ttu-id="1c09c-110">En bucles básicos, no es preciso tomar bloqueos.</span><span class="sxs-lookup"><span data-stu-id="1c09c-110">In basic loops, you do not have to take locks.</span></span> <span data-ttu-id="1c09c-111">TPL administra todo el trabajo de bajo nivel.</span><span class="sxs-lookup"><span data-stu-id="1c09c-111">The TPL handles all the low-level work for you.</span></span> <span data-ttu-id="1c09c-112">Para obtener información detallada sobre el uso de <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> y <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>, descargue el documento [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222) (Patrones de programación en paralelo: descripción y aplicación de los patrones en paralelo con .NET Framework 4).</span><span class="sxs-lookup"><span data-stu-id="1c09c-112">For in-depth information about the use of <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType>, download the document [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span></span> <span data-ttu-id="1c09c-113">En el siguiente ejemplo de código se muestra un bucle `foreach` simple y su equivalente paralelo.</span><span class="sxs-lookup"><span data-stu-id="1c09c-113">The following code example shows a simple `foreach` loop and its parallel equivalent.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1c09c-114">En esta documentación, se utilizan expresiones lambda para definir delegados en la TPL.</span><span class="sxs-lookup"><span data-stu-id="1c09c-114">This documentation uses lambda expressions to define delegates in TPL.</span></span> <span data-ttu-id="1c09c-115">Si no está familiarizado con las expresiones lambda de C# o Visual Basic, consulte [Expresiones lambda en PLINQ y TPL](lambda-expressions-in-plinq-and-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="1c09c-115">If you are not familiar with lambda expressions in C# or Visual Basic, see [Lambda Expressions in PLINQ and TPL](lambda-expressions-in-plinq-and-tpl.md).</span></span>  
  
 [!code-csharp[TPL#20](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl/cs/tpl.cs#20)]
 [!code-vb[TPL#20](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl/vb/tpl_vb.vb#20)]  
  
 <span data-ttu-id="1c09c-116">Cuando un bucle paralelo se ejecuta, la TPL crea particiones del origen de datos para que el bucle pueda funcionar simultáneamente en varias partes.</span><span class="sxs-lookup"><span data-stu-id="1c09c-116">When a parallel loop runs, the TPL partitions the data source so that the loop can operate on multiple parts concurrently.</span></span> <span data-ttu-id="1c09c-117">En segundo plano, el programador de tareas crea particiones de la tarea según los recursos del sistema y la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1c09c-117">Behind the scenes, the Task Scheduler partitions the task based on system resources and workload.</span></span> <span data-ttu-id="1c09c-118">Cuando es posible, el programador redistribuye el trabajo entre varios subprocesos y procesadores si se desequilibra la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1c09c-118">When possible, the scheduler redistributes work among multiple threads and processors if the workload becomes unbalanced.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1c09c-119">También puede proporcionar un programador o creador de particiones personalizado.</span><span class="sxs-lookup"><span data-stu-id="1c09c-119">You can also supply your own custom partitioner or scheduler.</span></span> <span data-ttu-id="1c09c-120">Para más información, consulte [Particionadores personalizados para PLINQ y TPL](custom-partitioners-for-plinq-and-tpl.md) y [Programadores de tareas](xref:System.Threading.Tasks.TaskScheduler).</span><span class="sxs-lookup"><span data-stu-id="1c09c-120">For more information, see [Custom Partitioners for PLINQ and TPL](custom-partitioners-for-plinq-and-tpl.md) and [Task Schedulers](xref:System.Threading.Tasks.TaskScheduler).</span></span>  
  
 <span data-ttu-id="1c09c-121">Los métodos <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> y <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> tienen varias sobrecargas que permiten detener o ejecutar la ejecución de bucles, supervisar el estado del bucle en otros subprocesos, mantener el estado de subprocesos locales, finalizar los objetos de subprocesos locales, controlar el grado de simultaneidad, etc.</span><span class="sxs-lookup"><span data-stu-id="1c09c-121">Both the <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> methods have several overloads that let you stop or break loop execution, monitor the state of the loop on other threads, maintain thread-local state, finalize thread-local objects, control the degree of concurrency, and so on.</span></span> <span data-ttu-id="1c09c-122">Los tipos del asistente que habilitan esta funcionalidad son <xref:System.Threading.Tasks.ParallelLoopState>, <xref:System.Threading.Tasks.ParallelOptions>, <xref:System.Threading.Tasks.ParallelLoopResult>, <xref:System.Threading.CancellationToken> y <xref:System.Threading.CancellationTokenSource>.</span><span class="sxs-lookup"><span data-stu-id="1c09c-122">The helper types that enable this functionality include <xref:System.Threading.Tasks.ParallelLoopState>, <xref:System.Threading.Tasks.ParallelOptions>, <xref:System.Threading.Tasks.ParallelLoopResult>, <xref:System.Threading.CancellationToken>, and <xref:System.Threading.CancellationTokenSource>.</span></span>  
  
 <span data-ttu-id="1c09c-123">Para obtener más información, vea [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222) (Patrones de programación en paralelo: descripción y aplicación de los patrones en paralelo con .NET Framework 4).</span><span class="sxs-lookup"><span data-stu-id="1c09c-123">For more information, see [Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=19222).</span></span>  
  
 <span data-ttu-id="1c09c-124">PLINQ admite el paralelismo de datos con sintaxis declarativa o de consulta.</span><span class="sxs-lookup"><span data-stu-id="1c09c-124">Data parallelism with declarative, or query-like, syntax is supported by PLINQ.</span></span> <span data-ttu-id="1c09c-125">Para más información, consulte [Parallel LINQ (PLINQ)](introduction-to-plinq.md) (LINQ en paralelo [PLINQ]).</span><span class="sxs-lookup"><span data-stu-id="1c09c-125">For more information, see [Parallel LINQ (PLINQ)](introduction-to-plinq.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="1c09c-126">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="1c09c-126">Related Topics</span></span>  
  
|<span data-ttu-id="1c09c-127">Title</span><span class="sxs-lookup"><span data-stu-id="1c09c-127">Title</span></span>|<span data-ttu-id="1c09c-128">Descripción</span><span class="sxs-lookup"><span data-stu-id="1c09c-128">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="1c09c-129">Cómo: Escribir un bucle Parallel.For sencillo</span><span class="sxs-lookup"><span data-stu-id="1c09c-129">How to: Write a Simple Parallel.For Loop</span></span>](how-to-write-a-simple-parallel-for-loop.md)|<span data-ttu-id="1c09c-130">Describe cómo escribir un bucle <xref:System.Threading.Tasks.Parallel.For%2A> en cualquier matriz o colección de origen <xref:System.Collections.Generic.IEnumerable%601> indexable.</span><span class="sxs-lookup"><span data-stu-id="1c09c-130">Describes how to write a <xref:System.Threading.Tasks.Parallel.For%2A> loop over any array or indexable <xref:System.Collections.Generic.IEnumerable%601> source collection.</span></span>|  
|[<span data-ttu-id="1c09c-131">Cómo: Escribir un bucle Parallel.ForEach sencillo</span><span class="sxs-lookup"><span data-stu-id="1c09c-131">How to: Write a Simple Parallel.ForEach Loop</span></span>](how-to-write-a-simple-parallel-foreach-loop.md)|<span data-ttu-id="1c09c-132">Describe cómo escribir un bucle <xref:System.Threading.Tasks.Parallel.ForEach%2A> en cualquier colección de origen <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="1c09c-132">Describes how to write a <xref:System.Threading.Tasks.Parallel.ForEach%2A> loop over any <xref:System.Collections.Generic.IEnumerable%601> source collection.</span></span>|  
|<span data-ttu-id="1c09c-133">[Cómo: Detener o interrumpir un bucle Parallel.For](/previous-versions/dotnet/netframework-4.0/dd460721(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="1c09c-133">[How to: Stop or Break from a Parallel.For Loop](/previous-versions/dotnet/netframework-4.0/dd460721(v=vs.100))</span></span>|<span data-ttu-id="1c09c-134">Describe cómo detenerse o salir de un bucle paralelo de forma que todos los subprocesos se informen de la acción.</span><span class="sxs-lookup"><span data-stu-id="1c09c-134">Describes how to stop or break from a parallel loop so that all threads are informed of the action.</span></span>|  
|[<span data-ttu-id="1c09c-135">Cómo: Escribir un bucle Parallel.For con variables locales de subproceso</span><span class="sxs-lookup"><span data-stu-id="1c09c-135">How to: Write a Parallel.For Loop with Thread-Local Variables</span></span>](how-to-write-a-parallel-for-loop-with-thread-local-variables.md)|<span data-ttu-id="1c09c-136">Describe cómo escribir un bucle <xref:System.Threading.Tasks.Parallel.For%2A> en el que cada subproceso mantiene una variable privada que no está visible para cualquier otro subproceso y cómo sincronizar los resultados de todos los subprocesos cuando el bucle se completa.</span><span class="sxs-lookup"><span data-stu-id="1c09c-136">Describes how to write a <xref:System.Threading.Tasks.Parallel.For%2A> loop in which each thread maintains a private variable that is not visible to any other threads, and how to synchronize the results from all threads when the loop completes.</span></span>|  
|[<span data-ttu-id="1c09c-137">Cómo: Escribir un bucle Parallel.ForEach con variables locales de partición</span><span class="sxs-lookup"><span data-stu-id="1c09c-137">How to: Write a Parallel.ForEach Loop with Partition-Local Variables</span></span>](how-to-write-a-parallel-foreach-loop-with-partition-local-variables.md)|<span data-ttu-id="1c09c-138">Describe cómo escribir un bucle <xref:System.Threading.Tasks.Parallel.ForEach%2A> en el que cada subproceso mantiene una variable privada que no está visible para cualquier otro subproceso y cómo sincronizar los resultados de todos los subprocesos cuando el bucle se completa.</span><span class="sxs-lookup"><span data-stu-id="1c09c-138">Describes how to write a <xref:System.Threading.Tasks.Parallel.ForEach%2A> loop in which each thread maintains a private variable that is not visible to any other threads, and how to synchronize the results from all threads when the loop completes.</span></span>|  
|[<span data-ttu-id="1c09c-139">Cómo: Cancelar un bucle Parallel.For o ForEach</span><span class="sxs-lookup"><span data-stu-id="1c09c-139">How to: Cancel a Parallel.For or ForEach Loop</span></span>](how-to-cancel-a-parallel-for-or-foreach-loop.md)|<span data-ttu-id="1c09c-140">Describe cómo cancelar un bucle paralelo utilizando un <xref:System.Threading.CancellationToken?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="1c09c-140">Describes how to cancel a parallel loop by using a <xref:System.Threading.CancellationToken?displayProperty=nameWithType></span></span>|  
|[<span data-ttu-id="1c09c-141">Cómo: Acelerar cuerpos de bucle pequeños</span><span class="sxs-lookup"><span data-stu-id="1c09c-141">How to: Speed Up Small Loop Bodies</span></span>](how-to-speed-up-small-loop-bodies.md)|<span data-ttu-id="1c09c-142">Describe una manera de acelerar la ejecución cuando el cuerpo de un bucle es muy pequeño.</span><span class="sxs-lookup"><span data-stu-id="1c09c-142">Describes one way to speed up execution when a loop body is very small.</span></span>|  
|[<span data-ttu-id="1c09c-143">Biblioteca TPL</span><span class="sxs-lookup"><span data-stu-id="1c09c-143">Task Parallel Library (TPL)</span></span>](task-parallel-library-tpl.md)|<span data-ttu-id="1c09c-144">Proporciona información general sobre la biblioteca TPL.</span><span class="sxs-lookup"><span data-stu-id="1c09c-144">Provides an overview of the Task Parallel Library.</span></span>|  
|[<span data-ttu-id="1c09c-145">Programación en paralelo</span><span class="sxs-lookup"><span data-stu-id="1c09c-145">Parallel Programming</span></span>](index.md)|<span data-ttu-id="1c09c-146">Presenta la programación paralela en .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1c09c-146">Introduces Parallel Programming in the .NET Framework.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="1c09c-147">Vea también</span><span class="sxs-lookup"><span data-stu-id="1c09c-147">See also</span></span>

- [<span data-ttu-id="1c09c-148">Programación en paralelo</span><span class="sxs-lookup"><span data-stu-id="1c09c-148">Parallel Programming</span></span>](index.md)

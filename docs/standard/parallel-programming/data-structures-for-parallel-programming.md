---
title: Estructuras de datos para la programación paralela
ms.date: 03/30/2017
helpviewer_keywords:
- data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
ms.openlocfilehash: c7f974c5626cf1efc6bf62c423043089d5c32e7c
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/18/2020
ms.locfileid: "94829536"
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="0deee-102">Estructuras de datos para la programación paralela</span><span class="sxs-lookup"><span data-stu-id="0deee-102">Data Structures for Parallel Programming</span></span>

<span data-ttu-id="0deee-103">En .NET se proporcionan varios tipos que son útiles para la programación en paralelo, incluido un conjunto de clases de colecciones simultáneas, primitivos de sincronización ligera y tipos para la inicialización diferida.</span><span class="sxs-lookup"><span data-stu-id="0deee-103">.NET provides several types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="0deee-104">Puede usar estos tipos con cualquier código de aplicación multiproceso, como la biblioteca TPL y PLINQ.</span><span class="sxs-lookup"><span data-stu-id="0deee-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="0deee-105">Clases de colecciones simultáneas</span><span class="sxs-lookup"><span data-stu-id="0deee-105">Concurrent Collection Classes</span></span>  
 <span data-ttu-id="0deee-106">Las clases de colecciones del espacio de nombres <xref:System.Collections.Concurrent?displayProperty=nameWithType> ofrece operaciones de agregar y quitar seguras para subprocesos que evitan los bloqueos siempre que sea posible y usan el bloqueo específico cuando los bloqueos son necesarios.</span><span class="sxs-lookup"><span data-stu-id="0deee-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="0deee-107">Una clase de colección simultánea no necesita que el código de usuario tome ningún bloqueo cuando accede a los elementos.</span><span class="sxs-lookup"><span data-stu-id="0deee-107">A concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="0deee-108">Las clases de colecciones simultáneas pueden mejorar significativamente el rendimiento a través de tipos como <xref:System.Collections.ArrayList?displayProperty=nameWithType> y <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (con bloqueo implementado por el usuario) en escenarios donde varios subprocesos agregarán y quitarán elementos de una colección.</span><span class="sxs-lookup"><span data-stu-id="0deee-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="0deee-109">En la tabla siguiente se enumeran las clases de colección simultáneas:</span><span class="sxs-lookup"><span data-stu-id="0deee-109">The following table lists the concurrent collection classes:</span></span>  
  
|<span data-ttu-id="0deee-110">Tipo</span><span class="sxs-lookup"><span data-stu-id="0deee-110">Type</span></span>|<span data-ttu-id="0deee-111">Description</span><span class="sxs-lookup"><span data-stu-id="0deee-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="0deee-112">Proporciona capacidades de bloqueo y establecimiento de límites en colecciones seguras para subprocesos que implementan <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0deee-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="0deee-113">Los subprocesos de productor se bloquean si no hay ranuras disponibles o si la colección está llena.</span><span class="sxs-lookup"><span data-stu-id="0deee-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="0deee-114">Los subprocesos de consumidor se bloquean si la colección está vacía.</span><span class="sxs-lookup"><span data-stu-id="0deee-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="0deee-115">Este tipo también admite el acceso sin bloqueo de productores y consumidores.</span><span class="sxs-lookup"><span data-stu-id="0deee-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="0deee-116"><xref:System.Collections.Concurrent.BlockingCollection%601> puede utilizarse como una clase base o una memoria auxiliar para proporcionar el bloqueo y el establecimiento de límite de cualquier clase de colección que admite <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="0deee-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="0deee-117">Una implementación de contenedor segura para subprocesos que ofrece operaciones add y get escalables.</span><span class="sxs-lookup"><span data-stu-id="0deee-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="0deee-118">Un tipo de diccionario simultáneo y escalable.</span><span class="sxs-lookup"><span data-stu-id="0deee-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="0deee-119">Un tipo de cola FIFO simultánea y escalable.</span><span class="sxs-lookup"><span data-stu-id="0deee-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="0deee-120">Un tipo de pila LIFO simultánea y escalable.</span><span class="sxs-lookup"><span data-stu-id="0deee-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="0deee-121">Para obtener más información, consulte [Colecciones seguras para subprocesos](../collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-121">For more information, see [Thread-Safe Collections](../collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="0deee-122">Primitivos de sincronización</span><span class="sxs-lookup"><span data-stu-id="0deee-122">Synchronization Primitives</span></span>  
 <span data-ttu-id="0deee-123">Los primitivos de sincronización del espacio de nombres <xref:System.Threading?displayProperty=nameWithType> permiten un rendimiento más rápido y una simultaneidad específica al evitar mecanismos de bloqueo costosos que se encuentran en el código de multithreading heredado.</span><span class="sxs-lookup"><span data-stu-id="0deee-123">The synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span>
  
 <span data-ttu-id="0deee-124">En la tabla siguiente se enumeran los tipos de sincronización:</span><span class="sxs-lookup"><span data-stu-id="0deee-124">The following table lists the synchronization types:</span></span>  
  
|<span data-ttu-id="0deee-125">Tipo</span><span class="sxs-lookup"><span data-stu-id="0deee-125">Type</span></span>|<span data-ttu-id="0deee-126">Descripción</span><span class="sxs-lookup"><span data-stu-id="0deee-126">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="0deee-127">Permite que varios subprocesos funcionen en un algoritmo en paralelo proporcionando un punto en el que cada tarea pueda señalizar su llegada y después bloquearse hasta que llegan algunas tareas o todas.</span><span class="sxs-lookup"><span data-stu-id="0deee-127">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="0deee-128">Para más información, consulte [Barrier](../threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-128">For more information, see [Barrier](../threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="0deee-129">Simplifica los escenarios de bifurcación y combinación proporcionando un mecanismo sencillo de encuentro.</span><span class="sxs-lookup"><span data-stu-id="0deee-129">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="0deee-130">Para más información, vea [CountdownEvent](../threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-130">For more information, see [CountdownEvent](../threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="0deee-131">Un primitivo de sincronización similar a <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0deee-131">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="0deee-132"><xref:System.Threading.ManualResetEventSlim> es ligero, pero solo puede utilizarse para la comunicación dentro de un proceso.</span><span class="sxs-lookup"><span data-stu-id="0deee-132"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="0deee-133">Un primitivo de sincronización que limita el número de subprocesos que acceden simultáneamente a un recurso o a un conjunto de recursos.</span><span class="sxs-lookup"><span data-stu-id="0deee-133">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="0deee-134">Para más información, vea [Semaphore y SemaphoreSlim](../threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-134">For more information, see [Semaphore and SemaphoreSlim](../threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="0deee-135">Un primitivo de bloqueo de exclusión mutua genera el subproceso que trata de obtener un bloqueo para esperar en un bucle, o *girar*, durante un período de tiempo antes de producir su cuanto.</span><span class="sxs-lookup"><span data-stu-id="0deee-135">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin*, for a period of time before yielding its quantum.</span></span> <span data-ttu-id="0deee-136">En escenarios en los que se prevé que la espera del bloqueo sea corta, <xref:System.Threading.SpinLock> ofrece mayor rendimiento que otras formas de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="0deee-136">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="0deee-137">Para más información, vea [SpinLock](../threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-137">For more information, see [SpinLock](../threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="0deee-138">Un tipo pequeño y ligero que girará durante un tiempo especificado y, finalmente, colocará el subproceso en un estado de espera si se supera el número de giros.</span><span class="sxs-lookup"><span data-stu-id="0deee-138">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="0deee-139">Para más información, vea [SpinWait](../threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-139">For more information, see [SpinWait](../threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="0deee-140">Para más información, consulte:</span><span class="sxs-lookup"><span data-stu-id="0deee-140">For more information, see:</span></span>  
  
- [<span data-ttu-id="0deee-141">Cómo: Utilizar SpinLock para la sincronización de bajo nivel</span><span class="sxs-lookup"><span data-stu-id="0deee-141">How to: Use SpinLock for Low-Level Synchronization</span></span>](../threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
- <span data-ttu-id="0deee-142">[Procedimiento: Sincronizar operaciones simultáneas con una clase Barrier](../threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-142">[How to: Synchronize Concurrent Operations with a Barrier](../threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="0deee-143">Clases de inicialización diferida</span><span class="sxs-lookup"><span data-stu-id="0deee-143">Lazy Initialization Classes</span></span>  
 <span data-ttu-id="0deee-144">Con la inicialización diferida, no se asigna la memoria para un objeto hasta que se necesite.</span><span class="sxs-lookup"><span data-stu-id="0deee-144">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="0deee-145">La inicialización diferida puede mejorar el rendimiento al distribuir las asignaciones de objetos uniformemente a lo largo de la duración de un programa.</span><span class="sxs-lookup"><span data-stu-id="0deee-145">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="0deee-146">Puede habilitar la inicialización diferida para cualquier tipo personalizado ajustando el tipo <xref:System.Lazy%601>.</span><span class="sxs-lookup"><span data-stu-id="0deee-146">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="0deee-147">En la tabla siguiente se enumeran los tipos de inicialización diferida:</span><span class="sxs-lookup"><span data-stu-id="0deee-147">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="0deee-148">Tipo</span><span class="sxs-lookup"><span data-stu-id="0deee-148">Type</span></span>|<span data-ttu-id="0deee-149">Descripción</span><span class="sxs-lookup"><span data-stu-id="0deee-149">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="0deee-150">Proporciona una inicialización diferida segura para subprocesos y ligera.</span><span class="sxs-lookup"><span data-stu-id="0deee-150">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="0deee-151">Proporciona un valor inicializado de forma diferida por cada subproceso, donde cada subproceso invoca de forma diferida la función de inicialización.</span><span class="sxs-lookup"><span data-stu-id="0deee-151">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="0deee-152">Proporciona métodos estáticos que evitan la necesidad de asignar una instancia de inicialización diferida y dedicada.</span><span class="sxs-lookup"><span data-stu-id="0deee-152">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="0deee-153">En su lugar, usan referencias para garantizar que los destinos se han inicializado a medida que se accede a ellos.</span><span class="sxs-lookup"><span data-stu-id="0deee-153">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="0deee-154">Para obtener más información, vea [Inicialización diferida](../../framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-154">For more information, see [Lazy Initialization](../../framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="0deee-155">Agregar excepciones</span><span class="sxs-lookup"><span data-stu-id="0deee-155">Aggregate Exceptions</span></span>  
 <span data-ttu-id="0deee-156">El tipo <xref:System.AggregateException?displayProperty=nameWithType> puede usarse para capturar varias excepciones que se producen simultáneamente en subprocesos independientes y devolverlas al subproceso combinado como una única excepción.</span><span class="sxs-lookup"><span data-stu-id="0deee-156">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="0deee-157">Los tipos <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> y <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> y PLINQ usan <xref:System.AggregateException> de forma amplia para este propósito.</span><span class="sxs-lookup"><span data-stu-id="0deee-157">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="0deee-158">Para obtener más información, vea [Control de excepciones](exception-handling-task-parallel-library.md) y [Cómo: Controlar excepciones en una consulta PLINQ](how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="0deee-158">For more information, see [Exception Handling](exception-handling-task-parallel-library.md) and [How to: Handle Exceptions in a PLINQ Query](how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0deee-159">Vea también</span><span class="sxs-lookup"><span data-stu-id="0deee-159">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- <xref:System.Threading?displayProperty=nameWithType>
- [<span data-ttu-id="0deee-160">Programación en paralelo</span><span class="sxs-lookup"><span data-stu-id="0deee-160">Parallel Programming</span></span>](index.md)

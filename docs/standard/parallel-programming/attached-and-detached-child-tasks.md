---
title: Tareas secundarias asociadas y desasociadas
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tasks, child tasks
ms.assetid: c95788bf-90a6-4e96-b7bc-58e36a228cc5
ms.openlocfilehash: 3b9bc2a854dfdee724c2059b3298b67da799284b
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/24/2020
ms.locfileid: "95734301"
---
# <a name="attached-and-detached-child-tasks"></a><span data-ttu-id="6ded2-102">Tareas secundarias asociadas y desasociadas</span><span class="sxs-lookup"><span data-stu-id="6ded2-102">Attached and Detached Child Tasks</span></span>

<span data-ttu-id="6ded2-103">Una *tarea secundaria* o *tarea anidada* es una instancia de <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> que se crea en el delegado de usuario de otra tarea, conocida como *tarea primaria*.</span><span class="sxs-lookup"><span data-stu-id="6ded2-103">A *child task* (or *nested task*) is a <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> instance that is created in the user delegate of another task, which is known as the *parent task*.</span></span> <span data-ttu-id="6ded2-104">Una tarea secundaria puede estar desasociada o asociada.</span><span class="sxs-lookup"><span data-stu-id="6ded2-104">A child task can be either detached or attached.</span></span> <span data-ttu-id="6ded2-105">Una *tarea secundaria desasociada* es una tarea que se ejecuta independientemente de su elemento principal.</span><span class="sxs-lookup"><span data-stu-id="6ded2-105">A *detached child task* is a task that executes independently of its parent.</span></span> <span data-ttu-id="6ded2-106">Una *tarea secundaria asociada* es una tarea anidada que se crea con la opción <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> y cuyo elemento primario no le prohíbe asociarse de forma explícita o predeterminada.</span><span class="sxs-lookup"><span data-stu-id="6ded2-106">An *attached child task* is a nested task that is created with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option whose parent does not explicitly or by default prohibit it from being attached.</span></span> <span data-ttu-id="6ded2-107">Una tarea puede crear cualquier número de tareas secundarias asociadas y desasociadas, con la única limitación de los recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="6ded2-107">A task may create any number of attached and detached child tasks, limited only by system resources.</span></span>  
  
 <span data-ttu-id="6ded2-108">En la tabla siguiente se muestran las diferencias básicas entre los dos tipos de tareas secundarias.</span><span class="sxs-lookup"><span data-stu-id="6ded2-108">The following table lists the basic differences between the two kinds of child tasks.</span></span>  
  
|<span data-ttu-id="6ded2-109">Categoría</span><span class="sxs-lookup"><span data-stu-id="6ded2-109">Category</span></span>|<span data-ttu-id="6ded2-110">Tareas secundarias desasociadas</span><span class="sxs-lookup"><span data-stu-id="6ded2-110">Detached child tasks</span></span>|<span data-ttu-id="6ded2-111">Tareas secundarias asociadas</span><span class="sxs-lookup"><span data-stu-id="6ded2-111">Attached child tasks</span></span>|  
|--------------|--------------------------|--------------------------|  
|<span data-ttu-id="6ded2-112">La tarea primaria espera a que se completen las tareas secundarias.</span><span class="sxs-lookup"><span data-stu-id="6ded2-112">Parent waits for child tasks to complete.</span></span>|<span data-ttu-id="6ded2-113">No</span><span class="sxs-lookup"><span data-stu-id="6ded2-113">No</span></span>|<span data-ttu-id="6ded2-114">Sí</span><span class="sxs-lookup"><span data-stu-id="6ded2-114">Yes</span></span>|  
|<span data-ttu-id="6ded2-115">La tarea primaria propaga las excepciones que producen las tareas secundarias.</span><span class="sxs-lookup"><span data-stu-id="6ded2-115">Parent propagates exceptions thrown by child tasks.</span></span>|<span data-ttu-id="6ded2-116">No</span><span class="sxs-lookup"><span data-stu-id="6ded2-116">No</span></span>|<span data-ttu-id="6ded2-117">Sí</span><span class="sxs-lookup"><span data-stu-id="6ded2-117">Yes</span></span>|  
|<span data-ttu-id="6ded2-118">El estado de la tarea primaria depende del estado de la tarea secundaria.</span><span class="sxs-lookup"><span data-stu-id="6ded2-118">Status of parent depends on status of child.</span></span>|<span data-ttu-id="6ded2-119">No</span><span class="sxs-lookup"><span data-stu-id="6ded2-119">No</span></span>|<span data-ttu-id="6ded2-120">Sí</span><span class="sxs-lookup"><span data-stu-id="6ded2-120">Yes</span></span>|  
  
 <span data-ttu-id="6ded2-121">En la mayoría de los casos, se recomienda usar tareas secundarias desasociadas porque las relaciones con otras tareas son menos complejas.</span><span class="sxs-lookup"><span data-stu-id="6ded2-121">In most scenarios, we recommend that you use detached child tasks, because their relationships with other tasks are less complex.</span></span> <span data-ttu-id="6ded2-122">Esta es la razón por la que las tareas que se crean dentro de tareas primarias están desasociadas de forma predeterminada y es necesario especificar explícitamente la opción <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> para crear una tarea secundaria asociada.</span><span class="sxs-lookup"><span data-stu-id="6ded2-122">That is why tasks created inside parent tasks are detached by default, and you must explicitly specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option to create an attached child task.</span></span>  
  
## <a name="detached-child-tasks"></a><span data-ttu-id="6ded2-123">Tareas secundarias desasociadas</span><span class="sxs-lookup"><span data-stu-id="6ded2-123">Detached child tasks</span></span>  

 <span data-ttu-id="6ded2-124">Aunque una tarea secundaria se crea mediante una tarea primaria, de forma predeterminada es independiente de la tarea primaria.</span><span class="sxs-lookup"><span data-stu-id="6ded2-124">Although a child task is created by a parent task, by default it is independent of the parent task.</span></span> <span data-ttu-id="6ded2-125">En el ejemplo siguiente se muestra una tarea primaria que crea una tarea secundaria simple.</span><span class="sxs-lookup"><span data-stu-id="6ded2-125">In the following example, a parent task creates one simple child task.</span></span> <span data-ttu-id="6ded2-126">Si se ejecuta varias veces el código de ejemplo, se observa que el resultado del ejemplo se diferencia del que se muestra, y también que el resultado puede cambiar cada vez que se ejecuta el código.</span><span class="sxs-lookup"><span data-stu-id="6ded2-126">If you run the example code multiple times, you may notice that the output from the example differs from that shown, and also that the output may change each time you run the code.</span></span> <span data-ttu-id="6ded2-127">Esto ocurre porque la tarea primaria y las tareas secundarias se ejecutan de forma independiente; la tarea secundaria es una tarea independiente.</span><span class="sxs-lookup"><span data-stu-id="6ded2-127">This occurs because the parent task and child tasks execute independently of each other; the child is a detached task.</span></span> <span data-ttu-id="6ded2-128">El ejemplo únicamente espera que se complete la tarea primaria; la tarea secundaria puede no ejecutarse o completarse antes de que finalice la aplicación de consola.</span><span class="sxs-lookup"><span data-stu-id="6ded2-128">The example waits only for the parent task to complete, and the child task may not execute or complete before the console app terminates.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/nested1.cs#1)]
 [!code-vb[TPL_ChildTasks#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/nested1.vb#1)]  
  
 <span data-ttu-id="6ded2-129">Si la tarea secundaria se representa mediante un objeto <xref:System.Threading.Tasks.Task%601> en lugar de un objeto <xref:System.Threading.Tasks.Task>, puede garantizarse que la tarea primaria esperará a que la tarea secundaria se complete teniendo acceso a la propiedad <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> de la tarea secundaria, aunque sea una tarea secundaria desasociada.</span><span class="sxs-lookup"><span data-stu-id="6ded2-129">If the child task is represented by a <xref:System.Threading.Tasks.Task%601> object rather than a <xref:System.Threading.Tasks.Task> object, you can ensure that the parent task will wait for the child to complete by accessing the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the child even if it is a detached child task.</span></span> <span data-ttu-id="6ded2-130">La propiedad <xref:System.Threading.Tasks.Task%601.Result%2A> se bloquea hasta que se completa su tarea, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="6ded2-130">The <xref:System.Threading.Tasks.Task%601.Result%2A> property blocks until its task completes, as the following example shows.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/childtasks.cs#4)]
 [!code-vb[TPL_ChildTasks#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/tpl_childtasks.vb#4)]  
  
## <a name="attached-child-tasks"></a><span data-ttu-id="6ded2-131">Tareas secundarias asociadas</span><span class="sxs-lookup"><span data-stu-id="6ded2-131">Attached child tasks</span></span>  

 <span data-ttu-id="6ded2-132">A diferencia de las tareas secundarias desasociadas, las tareas secundarias asociadas se sincronizan estrechamente con la tarea primaria.</span><span class="sxs-lookup"><span data-stu-id="6ded2-132">Unlike detached child tasks, attached child tasks are closely synchronized with the parent.</span></span> <span data-ttu-id="6ded2-133">En el ejemplo anterior, se puede cambiar la tarea secundaria desasociada a una tarea secundaria asociada mediante la opción <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> en la instrucción de creación de tareas, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="6ded2-133">You can change the detached child task in the previous example to an attached child task by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option in the task creation statement, as shown in the following example.</span></span> <span data-ttu-id="6ded2-134">En este código, la tarea secundaria asociada se completa antes que su tarea primaria.</span><span class="sxs-lookup"><span data-stu-id="6ded2-134">In this code, the attached child task completes before its parent.</span></span> <span data-ttu-id="6ded2-135">Como resultado, el resultado del ejemplo es igual cada vez que se ejecuta el código.</span><span class="sxs-lookup"><span data-stu-id="6ded2-135">As a result, the output from the example is the same each time you run the code.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1.cs#2)]
 [!code-vb[TPL_ChildTasks#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1.vb#2)]  
  
 <span data-ttu-id="6ded2-136">Puede usar tareas secundarias asociadas para crear gráficos con una estrecha sincronización de operaciones asincrónicas.</span><span class="sxs-lookup"><span data-stu-id="6ded2-136">You can use attached child tasks to create tightly synchronized graphs of asynchronous operations.</span></span>  
  
 <span data-ttu-id="6ded2-137">Sin embargo, una tarea secundaria se puede asociar a su elemento primario solo si su elemento primario no prohíbe las tareas secundarias asociadas.</span><span class="sxs-lookup"><span data-stu-id="6ded2-137">However, a child task can attach to its parent only if its parent does not prohibit attached child tasks.</span></span> <span data-ttu-id="6ded2-138">Las tareas primarias pueden evitar explícitamente que las tareas secundarias se asocien a ellas especificando la opción <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> del constructor de clase de la tarea primaria o el método <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-138">Parent tasks can explicitly prevent child tasks from attaching to them by specifying the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option in the parent task's class constructor or the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6ded2-139">Las tareas primarias impiden implícitamente que las tareas secundarias se asocien a ellas si se crean mediante una llamada al método <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-139">Parent tasks implicitly prevent child tasks from attaching to them if they are created by calling the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6ded2-140">Esto se ilustra en el siguiente ejemplo:</span><span class="sxs-lookup"><span data-stu-id="6ded2-140">The following example illustrates this.</span></span> <span data-ttu-id="6ded2-141">Es idéntico al ejemplo anterior, excepto en que la tarea primaria se crea mediante una llamada al método <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> en lugar de al método <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-141">It is identical to the previous example, except that the parent task is created by calling the <xref:System.Threading.Tasks.Task.Run%28System.Action%29?displayProperty=nameWithType> method rather than the <xref:System.Threading.Tasks.TaskFactory.StartNew%28System.Action%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6ded2-142">Como la tarea secundaria no se puede asociar a su elemento primario, el resultado del ejemplo es impredecible.</span><span class="sxs-lookup"><span data-stu-id="6ded2-142">Because the child task is not able to attach to its parent, the output from the example is unpredictable.</span></span> <span data-ttu-id="6ded2-143">Como las opciones de creación de tareas predeterminadas para las sobrecargas de <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> incluyen <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, este ejemplo es funcionalmente equivalente al primer ejemplo de la sección "Tareas secundarias desasociadas".</span><span class="sxs-lookup"><span data-stu-id="6ded2-143">Because the default task creation options for the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> overloads include <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, this example is functionally equivalent to the first example in the "Detached child tasks" section.</span></span>  
  
 [!code-csharp[TPL_ChildTasks#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_childtasks/cs/child1a.cs#3)]
 [!code-vb[TPL_ChildTasks#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_childtasks/vb/child1a.vb#3)]  
  
## <a name="exceptions-in-child-tasks"></a><span data-ttu-id="6ded2-144">Excepciones en tareas secundarias</span><span class="sxs-lookup"><span data-stu-id="6ded2-144">Exceptions in child tasks</span></span>  

 <span data-ttu-id="6ded2-145">Si una tarea secundaria desasociadas inicia una excepción, esa excepción debe observarse o controlarse directamente en la tarea primaria como si se tratara de una tarea no anidada.</span><span class="sxs-lookup"><span data-stu-id="6ded2-145">If a detached child task throws an exception, that exception must be observed or handled directly in the parent task just as with any non-nested task.</span></span> <span data-ttu-id="6ded2-146">Si una tarea secundaria asociada inicia una excepción, la excepción se propaga automáticamente a la tarea primaria y de nuevo al subproceso, que espera o intenta obtener acceso a la propiedad <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> de la tarea.</span><span class="sxs-lookup"><span data-stu-id="6ded2-146">If an attached child task throws an exception, the exception is automatically propagated to the parent task and back to the thread that waits or tries to access the task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="6ded2-147">Por tanto, si se usan tareas secundarias asociadas, se pueden controlar todas las excepciones en un solo punto en la llamada a <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> del subproceso que realiza la llamada.</span><span class="sxs-lookup"><span data-stu-id="6ded2-147">Therefore, by using attached child tasks, you can handle all exceptions at just one point in the call to <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> on the calling thread.</span></span> <span data-ttu-id="6ded2-148">Para más información, consulte [Control de excepciones](exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="6ded2-148">For more information, see [Exception Handling](exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="cancellation-and-child-tasks"></a><span data-ttu-id="6ded2-149">Cancelación y tareas secundarias</span><span class="sxs-lookup"><span data-stu-id="6ded2-149">Cancellation and child tasks</span></span>  

 <span data-ttu-id="6ded2-150">La cancelación de tareas es cooperativa.</span><span class="sxs-lookup"><span data-stu-id="6ded2-150">Task cancellation is cooperative.</span></span> <span data-ttu-id="6ded2-151">Es decir, para que se pueda cancelar, cada tarea secundaria asociada o desasociada debe supervisar el estado del token de cancelación.</span><span class="sxs-lookup"><span data-stu-id="6ded2-151">That is, to be cancelable, every attached or detached child task must monitor the status of the cancellation token.</span></span> <span data-ttu-id="6ded2-152">Si desea cancelar un elemento primario y todos sus elementos secundarios utilizando una solicitud de cancelación, debe pasar el mismo token como argumento a todas las tareas y proporcionar en cada tarea la lógica de respuesta a la solicitud en cada tarea.</span><span class="sxs-lookup"><span data-stu-id="6ded2-152">If you want to cancel a parent and all its children by using one cancellation request, you pass the same token as an argument to all tasks and provide in each task the logic to respond to the request in each task.</span></span> <span data-ttu-id="6ded2-153">Para más información, consulte [Task Cancellation](task-cancellation.md) (Cancelación de tareas) y [How to: Cancel a Task and Its Children](how-to-cancel-a-task-and-its-children.md) (Cancelar una tarea y sus elementos secundarios).</span><span class="sxs-lookup"><span data-stu-id="6ded2-153">For more information, see [Task Cancellation](task-cancellation.md) and [How to: Cancel a Task and Its Children](how-to-cancel-a-task-and-its-children.md).</span></span>  
  
### <a name="when-the-parent-cancels"></a><span data-ttu-id="6ded2-154">Cuando la tarea primaria se cancela</span><span class="sxs-lookup"><span data-stu-id="6ded2-154">When the parent cancels</span></span>  

 <span data-ttu-id="6ded2-155">Si una tarea primaria se cancela antes de que se inicie su tarea secundaria, la tarea secundaria nunca se inicia.</span><span class="sxs-lookup"><span data-stu-id="6ded2-155">If a parent cancels itself before its child task is started, the child never starts.</span></span> <span data-ttu-id="6ded2-156">Si una tarea primaria se cancela después de que se ha iniciado su tarea secundaria, la tarea secundaria se ejecutará hasta completarse a menos que tenga su propia lógica de cancelación.</span><span class="sxs-lookup"><span data-stu-id="6ded2-156">If a parent cancels itself after its child task has already started, the child runs to completion unless it has its own cancellation logic.</span></span> <span data-ttu-id="6ded2-157">Para más información, vea [Task Cancellation](task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="6ded2-157">For more information, see [Task Cancellation](task-cancellation.md).</span></span>  
  
### <a name="when-a-detached-child-task-cancels"></a><span data-ttu-id="6ded2-158">Cuando una tarea secundaria desasociada se cancela</span><span class="sxs-lookup"><span data-stu-id="6ded2-158">When a detached child task cancels</span></span>  

 <span data-ttu-id="6ded2-159">Si una tarea secundaria desasociada se cancela usando el mismo token que se pasó a la tarea primaria, y la tarea primaria no espera a la tarea secundaria, no se propagará ninguna excepción puesto que la excepción se trata cono una cancelación de cooperación benigna.</span><span class="sxs-lookup"><span data-stu-id="6ded2-159">If a detached child task cancels itself by using the same token that was passed to the parent, and the parent does not wait for the child task, no exception is propagated, because the exception is treated as benign cooperation cancellation.</span></span> <span data-ttu-id="6ded2-160">Este comportamiento es igual que el de cualquier tarea de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="6ded2-160">This behavior is the same as that of any top-level task.</span></span>  
  
### <a name="when-an-attached-child-task-cancels"></a><span data-ttu-id="6ded2-161">Cuando se cancela una tarea secundaria asociada</span><span class="sxs-lookup"><span data-stu-id="6ded2-161">When an attached child task cancels</span></span>  

 <span data-ttu-id="6ded2-162">Cuando una tarea secundaria asociada se cancela usando el mismo token que se pasó a su tarea primaria, se propaga una excepción <xref:System.Threading.Tasks.TaskCanceledException> al subproceso de unión dentro de <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-162">When an attached child task cancels itself by using the same token that was passed to its parent task, a <xref:System.Threading.Tasks.TaskCanceledException> is propagated to the joining thread inside an <xref:System.AggregateException>.</span></span> <span data-ttu-id="6ded2-163">Se debe esperar a la tarea primaria para poder controlar todas las excepciones benignas además de todas las excepciones de error que se propagan de manera ascendente a través de un gráfico de tareas secundarias asociadas.</span><span class="sxs-lookup"><span data-stu-id="6ded2-163">You must wait for the parent task so that you can handle all benign exceptions in addition to all faulting exceptions that are propagated up through a graph of attached child tasks.</span></span>  
  
 <span data-ttu-id="6ded2-164">Para más información, consulte [Control de excepciones](exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="6ded2-164">For more information, see [Exception Handling](exception-handling-task-parallel-library.md).</span></span>  
  
## <a name="preventing-a-child-task-from-attaching-to-its-parent"></a><span data-ttu-id="6ded2-165">Impedir que una tarea secundaria se adjunte a su tarea primara</span><span class="sxs-lookup"><span data-stu-id="6ded2-165">Preventing a child task from attaching to its parent</span></span>  

 <span data-ttu-id="6ded2-166">Una excepción no controlada producida por una tarea secundaria se propaga a la tarea primaria.</span><span class="sxs-lookup"><span data-stu-id="6ded2-166">An unhandled exception that is thrown by a child task is propagated to the parent task.</span></span> <span data-ttu-id="6ded2-167">Puede usar este comportamiento para observar todas las excepciones de tareas secundarias desde una tarea raíz en lugar de recorrer un árbol de tareas.</span><span class="sxs-lookup"><span data-stu-id="6ded2-167">You can use this behavior to observe all child task exceptions from one root task instead of traversing a tree of tasks.</span></span> <span data-ttu-id="6ded2-168">Sin embargo, la propagación de excepciones puede dar problemas cuando una tarea primaria no cuenta con datos adjuntos de otro código.</span><span class="sxs-lookup"><span data-stu-id="6ded2-168">However, exception propagation can be problematic when a parent task does not expect attachment from other code.</span></span> <span data-ttu-id="6ded2-169">Por ejemplo, piense en una aplicación que llama a un componente de la biblioteca de terceros de un objeto <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-169">For example, consider an app that calls a third-party library component from a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="6ded2-170">Si el componente de la biblioteca de terceros también crea un objeto <xref:System.Threading.Tasks.Task> y especifica <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> para asociarlo a la tarea primaria, las excepciones no controladas que aparecen en la tarea secundaria se propagan a la tarea primaria.</span><span class="sxs-lookup"><span data-stu-id="6ded2-170">If the third-party library component also creates a <xref:System.Threading.Tasks.Task> object and specifies <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> to attach it to the parent task, any unhandled exceptions that occur in the child task propagate to the parent.</span></span> <span data-ttu-id="6ded2-171">Esto podría dar lugar a un comportamiento inesperado en la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="6ded2-171">This could lead to unexpected behavior in the main app.</span></span>  
  
 <span data-ttu-id="6ded2-172">Para evitar que una tarea secundaria se adjunte a su tarea primaria, especifique la opción <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> cuando cree el objeto primario <xref:System.Threading.Tasks.Task> o <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-172">To prevent a child task from attaching to its parent task, specify the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option when you create the parent <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="6ded2-173">Cuando una tarea intenta asociarse a su elemento primario y el elemento primario especifica la opción <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>, la tarea secundaria no podrá asociarse a un elemento primario y se ejecutará como si no se hubiera especificado la opción <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6ded2-173">When a task tries to attach to its parent and the parent specifies the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option, the child task will not be able to attach to a parent and will execute just as if the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option was not specified.</span></span>  
  
 <span data-ttu-id="6ded2-174">Puede que también desee evitar que una tarea secundaria se adjunte a su tarea primaria cuando la tarea secundaria no finaliza a tiempo.</span><span class="sxs-lookup"><span data-stu-id="6ded2-174">You might also want to prevent a child task from attaching to its parent when the child task does not finish in a timely manner.</span></span> <span data-ttu-id="6ded2-175">Dado que una tarea primaria no finaliza hasta que finalizan todas las tareas secundarias, una tarea secundaria que se ejecute durante mucho tiempo puede provocar que el rendimiento general de la aplicación sea mediocre.</span><span class="sxs-lookup"><span data-stu-id="6ded2-175">Because a parent task does not finish until all child tasks finish, a long-running child task can cause the overall app to perform poorly.</span></span> <span data-ttu-id="6ded2-176">Para obtener un ejemplo que muestra cómo mejorar el rendimiento de la aplicación impidiendo que una tarea se asocie a su tarea primaria, consulte [Cómo: Evitar que una tarea secundaria se asocie a su elemento primario](how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span><span class="sxs-lookup"><span data-stu-id="6ded2-176">For an example that shows how to improve app performance by preventing a task from attaching to its parent task, see [How to: Prevent a Child Task from Attaching to its Parent](how-to-prevent-a-child-task-from-attaching-to-its-parent.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ded2-177">Vea también</span><span class="sxs-lookup"><span data-stu-id="6ded2-177">See also</span></span>

- [<span data-ttu-id="6ded2-178">Programación en paralelo</span><span class="sxs-lookup"><span data-stu-id="6ded2-178">Parallel Programming</span></span>](index.md)
- <span data-ttu-id="6ded2-179">[Data Parallelism](data-parallelism-task-parallel-library.md) (Paralelismo de datos)</span><span class="sxs-lookup"><span data-stu-id="6ded2-179">[Data Parallelism](data-parallelism-task-parallel-library.md)</span></span>

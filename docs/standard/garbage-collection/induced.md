---
title: Colecciones inducidas
ms.date: 03/30/2017
helpviewer_keywords:
- garbage collection, forced
ms.assetid: 019008fe-4708-4e65-bebf-04fd9941e149
ms.openlocfilehash: 25e94221355569931a31b566a53434cbed9ea93f
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/24/2020
ms.locfileid: "95714242"
---
# <a name="induced-collections"></a><span data-ttu-id="15ea1-102">Colecciones inducidas</span><span class="sxs-lookup"><span data-stu-id="15ea1-102">Induced Collections</span></span>

<span data-ttu-id="15ea1-103">En la mayoría de los casos, el recolector de elementos no utilizados puede determinar cuál es el mejor momento para realizar una recolección y se debe permitir su ejecución de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="15ea1-103">In most cases, the garbage collector can determine the best time to perform a collection, and you should let it run independently.</span></span> <span data-ttu-id="15ea1-104">Hay ocasiones excepcionales en que una recolección forzada puede mejorar el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="15ea1-104">There are rare situations when a forced collection might improve your application's performance.</span></span> <span data-ttu-id="15ea1-105">En estos casos, se puede inducir la recolección de elementos no utilizados utilizando el método <xref:System.GC.Collect%2A?displayProperty=nameWithType> para forzar una recolección de elementos no utilizados.</span><span class="sxs-lookup"><span data-stu-id="15ea1-105">In these cases, you can induce garbage collection by using the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method to force a garbage collection.</span></span>  
  
 <span data-ttu-id="15ea1-106">Use el método <xref:System.GC.Collect%2A?displayProperty=nameWithType> cuando haya una reducción significativa de la cantidad de memoria que se está usando en un punto específico del código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="15ea1-106">Use the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method when there is a significant reduction in the amount of memory being used at a specific point in your application's code.</span></span> <span data-ttu-id="15ea1-107">Por ejemplo, si la aplicación utiliza un cuadro de diálogo complejo que tiene varios controles, llamar a <xref:System.GC.Collect%2A> cuando se cierra el cuadro de diálogo podría mejorar el rendimiento porque reclama inmediatamente la memoria que usa este.</span><span class="sxs-lookup"><span data-stu-id="15ea1-107">For example, if your application uses a complex dialog box that has several controls, calling <xref:System.GC.Collect%2A> when the dialog box is closed could improve performance by immediately reclaiming the memory used by the dialog box.</span></span> <span data-ttu-id="15ea1-108">Asegúrese de que la aplicación no induce la recolección de elementos no utilizados con demasiada frecuencia, ya que este hecho puede reducir el rendimiento si el recolector de elementos no utilizados intenta reclamar objetos en el momento inadecuado.</span><span class="sxs-lookup"><span data-stu-id="15ea1-108">Be sure that your application is not inducing garbage collection too frequently, because that can decrease performance if the garbage collector is trying to reclaim objects at non-optimal times.</span></span> <span data-ttu-id="15ea1-109">Puede proporcionar un valor de enumeración <xref:System.GCCollectionMode.Optimized?displayProperty=nameWithType> al método <xref:System.GC.Collect%2A> para recopilarlo solo cuando la recolección sea productiva, como se explica en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="15ea1-109">You can supply a <xref:System.GCCollectionMode.Optimized?displayProperty=nameWithType> enumeration value to the <xref:System.GC.Collect%2A> method to collect only when collection would be productive, as discussed in the next section.</span></span>  
  
## <a name="gc-collection-mode"></a><span data-ttu-id="15ea1-110">Modo de colección de GC</span><span class="sxs-lookup"><span data-stu-id="15ea1-110">GC collection mode</span></span>  

 <span data-ttu-id="15ea1-111">Puede usar una de las sobrecargas del método <xref:System.GC.Collect%2A?displayProperty=nameWithType>, que incluye un valor <xref:System.GCCollectionMode> para especificar el comportamiento de una colección forzada, como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="15ea1-111">You can use one of the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method overloads that includes a <xref:System.GCCollectionMode> value to specify the behavior for a forced collection as follows.</span></span>  
  
|<span data-ttu-id="15ea1-112">Valor de `GCCollectionMode`</span><span class="sxs-lookup"><span data-stu-id="15ea1-112">`GCCollectionMode` value</span></span>|<span data-ttu-id="15ea1-113">Description</span><span class="sxs-lookup"><span data-stu-id="15ea1-113">Description</span></span>|  
|------------------------------|-----------------|  
|<xref:System.GCCollectionMode.Default>|<span data-ttu-id="15ea1-114">Usa el valor predeterminado de la recolección de elementos no utilizados para la versión de .NET en ejecución.</span><span class="sxs-lookup"><span data-stu-id="15ea1-114">Uses the default garbage collection setting for the running version of .NET.</span></span>|  
|<xref:System.GCCollectionMode.Forced>|<span data-ttu-id="15ea1-115">Obliga a que la recolección de elementos no utilizados se produzca inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="15ea1-115">Forces garbage collection to occur immediately.</span></span> <span data-ttu-id="15ea1-116">Esto equivale a llamar a la sobrecarga <xref:System.GC.Collect?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="15ea1-116">This is equivalent to calling the <xref:System.GC.Collect?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="15ea1-117">Tiene como consecuencia una recolección completa de bloqueo de todas las generaciones.</span><span class="sxs-lookup"><span data-stu-id="15ea1-117">It results in a full blocking collection of all generations.</span></span><br /><br /> <span data-ttu-id="15ea1-118">También puede compactar el montón de objetos grandes si establece la propiedad <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> en <xref:System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce?displayProperty=nameWithType> antes de forzar una recolección de elementos no utilizados de bloqueo completa inmediata.</span><span class="sxs-lookup"><span data-stu-id="15ea1-118">You can also compact the large object heap by setting the <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> property to <xref:System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce?displayProperty=nameWithType> before forcing an immediate full blocking garbage collection.</span></span>|  
|<xref:System.GCCollectionMode.Optimized>|<span data-ttu-id="15ea1-119">Permite al recolector de elementos no utilizados determinar si la hora actual es la adecuada para reclamar objetos.</span><span class="sxs-lookup"><span data-stu-id="15ea1-119">Enables the garbage collector to determine whether the current time is optimal to reclaim objects.</span></span><br /><br /> <span data-ttu-id="15ea1-120">El recolector de elementos no utilizados puede determinar que una recolección no esté justificada por su insuficiente productividad, en cuyo caso volverá sin reclamar objetos.</span><span class="sxs-lookup"><span data-stu-id="15ea1-120">The garbage collector could determine that a collection would not be productive enough to be justified, in which case it will return without reclaiming objects.</span></span>|  
  
## <a name="background-or-blocking-collections"></a><span data-ttu-id="15ea1-121">Colecciones de fondo o de bloqueo</span><span class="sxs-lookup"><span data-stu-id="15ea1-121">Background or blocking collections</span></span>  

 <span data-ttu-id="15ea1-122">Puede llamar a la sobrecarga del método <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=nameWithType> para especificar si una recolección inducida se está bloqueando o no.</span><span class="sxs-lookup"><span data-stu-id="15ea1-122">You can call the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=nameWithType> method overload to specify whether an induced collection is blocking or not.</span></span> <span data-ttu-id="15ea1-123">El tipo de colección realizado depende de una combinación de los parámetros `mode` y `blocking` del método.</span><span class="sxs-lookup"><span data-stu-id="15ea1-123">The type of collection performed depends on a combination of the method's `mode` and `blocking` parameters.</span></span> <span data-ttu-id="15ea1-124">`mode` es un miembro de la enumeración <xref:System.GCCollectionMode> y `blocking` es un valor <xref:System.Boolean>.</span><span class="sxs-lookup"><span data-stu-id="15ea1-124">`mode` is a member of the <xref:System.GCCollectionMode> enumeration, and `blocking` is a <xref:System.Boolean> value.</span></span> <span data-ttu-id="15ea1-125">En la tabla siguiente se resume la interacción de los argumentos `mode` y `blocking`.</span><span class="sxs-lookup"><span data-stu-id="15ea1-125">The following table summarizes the interaction of the `mode` and `blocking` arguments.</span></span>  
  
|`mode`|`blocking` = `true`|`blocking` = `false`|  
|------------|--------------------------|---------------------------|  
|<span data-ttu-id="15ea1-126"><xref:System.GCCollectionMode.Forced> o <xref:System.GCCollectionMode.Default></span><span class="sxs-lookup"><span data-stu-id="15ea1-126"><xref:System.GCCollectionMode.Forced> or <xref:System.GCCollectionMode.Default></span></span>|<span data-ttu-id="15ea1-127">Se realiza una recolección de bloqueo lo antes posible.</span><span class="sxs-lookup"><span data-stu-id="15ea1-127">A blocking collection is performed as soon as possible.</span></span> <span data-ttu-id="15ea1-128">Si una colección en segundo plano está en curso y la generación es 0 o 1, el método <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> desencadena inmediatamente una colección de bloqueo y vuelve cuando la colección finaliza.</span><span class="sxs-lookup"><span data-stu-id="15ea1-128">If a background collection is in progress and generation is 0 or 1, the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method immediately triggers a blocking collection and returns when the collection is finished.</span></span> <span data-ttu-id="15ea1-129">Si una colección en segundo plano está en curso y el parámetro `generation` es 2, el método espera hasta que finaliza la colección en segundo plano, desencadena una generación de bloqueo 2 y luego vuelve.</span><span class="sxs-lookup"><span data-stu-id="15ea1-129">If a background collection is in progress and the `generation` parameter is 2, the method waits until the background collection is finished, triggers a blocking generation 2 collection, and then returns.</span></span>|<span data-ttu-id="15ea1-130">Se realiza una recolección lo antes posible.</span><span class="sxs-lookup"><span data-stu-id="15ea1-130">A collection is performed as soon as possible.</span></span> <span data-ttu-id="15ea1-131">El método <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> solicita una colección en segundo plano, pero esto no se garantiza; puede que aún se realice una colección de bloqueo, dependiendo de las circunstancias.</span><span class="sxs-lookup"><span data-stu-id="15ea1-131">The <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method requests a background collection, but this is not guaranteed; depending on the circumstances, a blocking collection may still be performed.</span></span> <span data-ttu-id="15ea1-132">Si una colección en segundo plano ya está en curso, el método vuelve inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="15ea1-132">If a background collection is already in progress, the method returns immediately.</span></span>|  
|<xref:System.GCCollectionMode.Optimized>|<span data-ttu-id="15ea1-133">Se puede realizar una recolección de bloqueo, dependiendo del estado del recolector de elementos no utilizados y del parámetro `generation`.</span><span class="sxs-lookup"><span data-stu-id="15ea1-133">A blocking collection may be performed, depending on the state of the garbage collector and the `generation` parameter.</span></span> <span data-ttu-id="15ea1-134">El recolector de elementos no utilizados intenta proporcionar un rendimiento óptimo.</span><span class="sxs-lookup"><span data-stu-id="15ea1-134">The garbage collector tries to provide optimal performance.</span></span>|<span data-ttu-id="15ea1-135">Se puede realizar una recolección, según el estado del recolector de elementos no utilizados.</span><span class="sxs-lookup"><span data-stu-id="15ea1-135">A collection may be performed, depending on the state of the garbage collector.</span></span> <span data-ttu-id="15ea1-136">El método <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> solicita una colección en segundo plano, pero esto no se garantiza; puede que aún se realice una colección de bloqueo, dependiendo de las circunstancias.</span><span class="sxs-lookup"><span data-stu-id="15ea1-136">The <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method requests a background collection, but this is not guaranteed; depending on the circumstances, a blocking collection may still be performed.</span></span> <span data-ttu-id="15ea1-137">El recolector de elementos no utilizados intenta proporcionar un rendimiento óptimo.</span><span class="sxs-lookup"><span data-stu-id="15ea1-137">The garbage collector tries to provide optimal performance.</span></span> <span data-ttu-id="15ea1-138">Si una colección en segundo plano ya está en curso, el método vuelve inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="15ea1-138">If a background collection is already in progress, the method returns immediately.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="15ea1-139">Vea también</span><span class="sxs-lookup"><span data-stu-id="15ea1-139">See also</span></span>

- [<span data-ttu-id="15ea1-140">Modos de latencia</span><span class="sxs-lookup"><span data-stu-id="15ea1-140">Latency Modes</span></span>](latency.md)
- [<span data-ttu-id="15ea1-141">Recolección de elementos no utilizados</span><span class="sxs-lookup"><span data-stu-id="15ea1-141">Garbage Collection</span></span>](index.md)

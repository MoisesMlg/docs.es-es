---
title: Decidir cuándo implementar el modelo asincrónico basado en eventos
ms.date: 03/30/2017
helpviewer_keywords:
- Event-based Asynchronous Pattern
- ProgressChangedEventArgs class
- BackgroundWorker component
- events [.NET], asynchronous
- AsyncOperationManager class
- threading [.NET], asynchronous features
- AsyncOperation class
- AsyncCompletedEventArgs class
ms.assetid: a00046aa-785d-4f7f-a8e5-d06475ea50da
ms.openlocfilehash: 096b3e9e5732989ff5e85a5b6df4ca413e29cbcd
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/18/2020
ms.locfileid: "94830420"
---
# <a name="deciding-when-to-implement-the-event-based-asynchronous-pattern"></a><span data-ttu-id="71162-102">Decidir cuándo implementar el modelo asincrónico basado en eventos</span><span class="sxs-lookup"><span data-stu-id="71162-102">Deciding When to Implement the Event-based Asynchronous Pattern</span></span>

<span data-ttu-id="71162-103">El modelo asincrónico basado en eventos proporciona un modelo para exponer el comportamiento asincrónico de una clase.</span><span class="sxs-lookup"><span data-stu-id="71162-103">The Event-based Asynchronous Pattern provides a pattern for exposing the asynchronous behavior of a class.</span></span> <span data-ttu-id="71162-104">Con la introducción de este modelo, .NET define dos modelos para exponer el comportamiento asincrónico: el modelo asincrónico basado en la interfaz <xref:System.IAsyncResult?displayProperty=nameWithType> y el modelo basado en eventos.</span><span class="sxs-lookup"><span data-stu-id="71162-104">With the introduction of this pattern, .NET defines two patterns for exposing asynchronous behavior: the Asynchronous Pattern based on the <xref:System.IAsyncResult?displayProperty=nameWithType> interface, and the event-based pattern.</span></span> <span data-ttu-id="71162-105">En este artículo se describe cuándo es adecuado implementarlos.</span><span class="sxs-lookup"><span data-stu-id="71162-105">This article describes when it's appropriate for you to implement both patterns.</span></span>

<span data-ttu-id="71162-106">Para obtener más información sobre la programación asincrónica con la interfaz <xref:System.IAsyncResult>, vea [Modelo de programación asincrónica (APM)](asynchronous-programming-model-apm.md).</span><span class="sxs-lookup"><span data-stu-id="71162-106">For more information about asynchronous programming with the <xref:System.IAsyncResult> interface, see [Asynchronous Programming Model (APM)](asynchronous-programming-model-apm.md).</span></span>

## <a name="general-principles"></a><span data-ttu-id="71162-107">Principios generales</span><span class="sxs-lookup"><span data-stu-id="71162-107">General Principles</span></span>

<span data-ttu-id="71162-108">En general, se deben exponer las características asincrónicas mediante el modelo asincrónico basado en eventos siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="71162-108">In general, you should expose asynchronous features using the Event-based Asynchronous Pattern whenever possible.</span></span> <span data-ttu-id="71162-109">Sin embargo, hay algunos requisitos que el modelo basado en eventos no puede cumplir.</span><span class="sxs-lookup"><span data-stu-id="71162-109">However, there are some requirements that the event-based pattern cannot meet.</span></span> <span data-ttu-id="71162-110">En esos casos, puede que necesite implementar el modelo <xref:System.IAsyncResult> además del modelo basado en eventos.</span><span class="sxs-lookup"><span data-stu-id="71162-110">In those cases, you may need to implement the <xref:System.IAsyncResult> pattern in addition to the event-based pattern.</span></span>

> [!NOTE]
> <span data-ttu-id="71162-111">Es raro que el modelo <xref:System.IAsyncResult> se implemente sin haber implementado el modelo basado en eventos.</span><span class="sxs-lookup"><span data-stu-id="71162-111">It is rare for the <xref:System.IAsyncResult> pattern to be implemented without the event-based pattern also being implemented.</span></span>

## <a name="guidelines"></a><span data-ttu-id="71162-112">Instrucciones</span><span class="sxs-lookup"><span data-stu-id="71162-112">Guidelines</span></span>

<span data-ttu-id="71162-113">En la lista siguiente se describen las instrucciones sobre cuándo implementar el modelo asincrónico basado en eventos:</span><span class="sxs-lookup"><span data-stu-id="71162-113">The following list describes the guidelines for when you should implement Event-based Asynchronous Pattern:</span></span>

- <span data-ttu-id="71162-114">Utilice el modelo basado en eventos como la API predeterminada para exponer el comportamiento asincrónico para la clase.</span><span class="sxs-lookup"><span data-stu-id="71162-114">Use the event-based pattern as the default API to expose asynchronous behavior for your class.</span></span>

- <span data-ttu-id="71162-115">No exponga el modelo <xref:System.IAsyncResult> cuando la clase se utiliza principalmente en una aplicación cliente, por ejemplo, Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="71162-115">Do not expose the <xref:System.IAsyncResult> pattern when your class is primarily used in a client application, for example Windows Forms.</span></span>

- <span data-ttu-id="71162-116">Exponga el modelo <xref:System.IAsyncResult> solo cuando sea necesario para satisfacer sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="71162-116">Only expose the <xref:System.IAsyncResult> pattern when it is necessary for meeting your requirements.</span></span> <span data-ttu-id="71162-117">Por ejemplo, la compatibilidad con una API existente puede requerir que se exponga el modelo <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-117">For example, compatibility with an existing API may require you to expose the <xref:System.IAsyncResult> pattern.</span></span>

- <span data-ttu-id="71162-118">No exponga el modelo <xref:System.IAsyncResult> sin exponer también el modelo basado en eventos.</span><span class="sxs-lookup"><span data-stu-id="71162-118">Do not expose the <xref:System.IAsyncResult> pattern without also exposing the event-based pattern.</span></span>

- <span data-ttu-id="71162-119">Si debe exponer el modelo <xref:System.IAsyncResult>, hágalo como una opción avanzada.</span><span class="sxs-lookup"><span data-stu-id="71162-119">If you must expose the <xref:System.IAsyncResult> pattern, do so as an advanced option.</span></span> <span data-ttu-id="71162-120">Por ejemplo, si genera un objeto proxy, genere el modelo basado en eventos de forma predeterminada, con una opción para generar el modelo <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-120">For example, if you generate a proxy object, generate the event-based pattern by default, with an option to generate the <xref:System.IAsyncResult> pattern.</span></span>

- <span data-ttu-id="71162-121">Compile su implementación del modelo basado en eventos en la implementación del modelo <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-121">Build your event-based pattern implementation on your <xref:System.IAsyncResult> pattern implementation.</span></span>

- <span data-ttu-id="71162-122">Evite exponer tanto el modelo basado en eventos como el modelo <xref:System.IAsyncResult> en la misma clase.</span><span class="sxs-lookup"><span data-stu-id="71162-122">Avoid exposing both the event-based pattern and the <xref:System.IAsyncResult> pattern on the same class.</span></span> <span data-ttu-id="71162-123">Exponga el modelo basado en eventos en las clases de "nivel superior" y el modelo <xref:System.IAsyncResult> en las clases de "nivel inferior".</span><span class="sxs-lookup"><span data-stu-id="71162-123">Expose the event-based pattern on "higher level" classes and the <xref:System.IAsyncResult> pattern on "lower level" classes.</span></span> <span data-ttu-id="71162-124">Por ejemplo, compare el modelo basado en eventos del componente <xref:System.Net.WebClient> con el modelo <xref:System.IAsyncResult> de la clase <xref:System.Web.HttpRequest>.</span><span class="sxs-lookup"><span data-stu-id="71162-124">For example, compare the event-based pattern on the <xref:System.Net.WebClient> component with the <xref:System.IAsyncResult> pattern on the <xref:System.Web.HttpRequest> class.</span></span>

  - <span data-ttu-id="71162-125">Exponga el modelo basado en eventos y el modelo <xref:System.IAsyncResult> en la misma clase cuando lo requiera la compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="71162-125">Expose the event-based pattern and the <xref:System.IAsyncResult> pattern on the same class when compatibility requires it.</span></span> <span data-ttu-id="71162-126">Por ejemplo, si ya ha publicado una API que usa el modelo <xref:System.IAsyncResult>, quizá necesite conservar el modelo <xref:System.IAsyncResult> por compatibilidad con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="71162-126">For example, if you have already released an API that uses the <xref:System.IAsyncResult> pattern, you would need to retain the <xref:System.IAsyncResult> pattern for backward compatibility.</span></span>

  - <span data-ttu-id="71162-127">Exponga el modelo basado en eventos y el modelo <xref:System.IAsyncResult> en la misma clase si la complejidad del modelo de objetos resultante supera la ventaja de separar las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="71162-127">Expose the event-based pattern and the <xref:System.IAsyncResult> pattern on the same class if the resulting object model complexity outweighs the benefit of separating the implementations.</span></span> <span data-ttu-id="71162-128">Es mejor exponer ambos modelos en una sola clase que evitar exponer el modelo basado en eventos.</span><span class="sxs-lookup"><span data-stu-id="71162-128">It is better to expose both patterns on a single class than to avoid exposing the event-based pattern.</span></span>

  - <span data-ttu-id="71162-129">Si debe exponer tanto el modelo basado en eventos como el modelo <xref:System.IAsyncResult> en una sola clase, use <xref:System.ComponentModel.EditorBrowsableAttribute> establecido en <xref:System.ComponentModel.EditorBrowsableState.Advanced> para marcar la implementación del modelo <xref:System.IAsyncResult> como una característica avanzada.</span><span class="sxs-lookup"><span data-stu-id="71162-129">If you must expose both the event-based pattern and <xref:System.IAsyncResult> pattern on a single class, use <xref:System.ComponentModel.EditorBrowsableAttribute> set to <xref:System.ComponentModel.EditorBrowsableState.Advanced> to mark the <xref:System.IAsyncResult> pattern implementation as an advanced feature.</span></span> <span data-ttu-id="71162-130">Esto indica a los entornos de diseño, como IntelliSense en Visual Studio, que no muestren las propiedades y los métodos de <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-130">This indicates to design environments, such as Visual Studio IntelliSense, not to display the <xref:System.IAsyncResult> properties and methods.</span></span> <span data-ttu-id="71162-131">Estas propiedades y métodos todavía son totalmente utilizables, pero el desarrollador que trabaja con IntelliSense tiene una visión más clara de la API.</span><span class="sxs-lookup"><span data-stu-id="71162-131">These properties and methods are still fully usable, but the developer working through IntelliSense has a clearer view of the API.</span></span>

## <a name="criteria-for-exposing-the-iasyncresult-pattern-in-addition-to-the-event-based-pattern"></a><span data-ttu-id="71162-132">Criterios para exponer el modelo IAsyncResult además del modelo basado en eventos</span><span class="sxs-lookup"><span data-stu-id="71162-132">Criteria for Exposing the IAsyncResult Pattern in Addition to the Event-based Pattern</span></span>

<span data-ttu-id="71162-133">Aunque el modelo asincrónico basado en eventos tiene muchas ventajas en los escenarios mencionados anteriormente, también tiene algunas desventajas, que debe tener en cuenta si el rendimiento es el requisito más importante.</span><span class="sxs-lookup"><span data-stu-id="71162-133">While the Event-based Asynchronous Pattern has many benefits under the previously mentioned scenarios, it does have some drawbacks, which you should be aware of if performance is your most important requirement.</span></span>

<span data-ttu-id="71162-134">Hay tres escenarios que no se abordan con el modelo basado en eventos ni con el modelo <xref:System.IAsyncResult>:</span><span class="sxs-lookup"><span data-stu-id="71162-134">There are three scenarios that the event-based pattern does not address as well as the <xref:System.IAsyncResult> pattern:</span></span>

- <span data-ttu-id="71162-135">Espera bloqueada en un objeto <xref:System.IAsyncResult></span><span class="sxs-lookup"><span data-stu-id="71162-135">Blocking wait on one <xref:System.IAsyncResult></span></span>

- <span data-ttu-id="71162-136">Espera bloqueada en muchos objetos <xref:System.IAsyncResult></span><span class="sxs-lookup"><span data-stu-id="71162-136">Blocking wait on many <xref:System.IAsyncResult> objects</span></span>

- <span data-ttu-id="71162-137">Sondeo de la finalización del objeto <xref:System.IAsyncResult></span><span class="sxs-lookup"><span data-stu-id="71162-137">Polling for completion on the <xref:System.IAsyncResult></span></span>

<span data-ttu-id="71162-138">Puede resolver estos escenarios con el modelo basado en eventos, pero es más complicado que usar el modelo <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-138">You can address these scenarios by using the event-based pattern, but doing so is more cumbersome than using the <xref:System.IAsyncResult> pattern.</span></span>

<span data-ttu-id="71162-139">Los desarrolladores suelen utilizar el modelo <xref:System.IAsyncResult> para los servicios que normalmente tienen requisitos de muy alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="71162-139">Developers often use the <xref:System.IAsyncResult> pattern for services that typically have very high performance requirements.</span></span> <span data-ttu-id="71162-140">Por ejemplo, el sondeo para el escenario de finalización es una técnica de servidor de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="71162-140">For example, the polling for completion scenario is a high-performance server technique.</span></span>

<span data-ttu-id="71162-141">Además, el modelo basado en eventos es menos eficaz que el modelo <xref:System.IAsyncResult> porque crea más objetos, especialmente <xref:System.EventArgs>, y debido a que se sincroniza entre subprocesos.</span><span class="sxs-lookup"><span data-stu-id="71162-141">Additionally, the event-based pattern is less efficient than the <xref:System.IAsyncResult> pattern because it creates more objects, especially <xref:System.EventArgs>, and because it synchronizes across threads.</span></span>

<span data-ttu-id="71162-142">En la lista siguiente se indican algunas recomendaciones que deben seguirse si decide utilizar el modelo <xref:System.IAsyncResult>:</span><span class="sxs-lookup"><span data-stu-id="71162-142">The following list shows some recommendations to follow if you decide to use the <xref:System.IAsyncResult> pattern:</span></span>

- <span data-ttu-id="71162-143">Solo exponga el modelo <xref:System.IAsyncResult> si necesita compatibilidad específica para los objetos <xref:System.Threading.WaitHandle> o <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-143">Only expose the <xref:System.IAsyncResult> pattern when you specifically require support for <xref:System.Threading.WaitHandle> or <xref:System.IAsyncResult> objects.</span></span>

- <span data-ttu-id="71162-144">Solo exponga el modelo <xref:System.IAsyncResult> si tiene una API existente que usa el modelo <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-144">Only expose the <xref:System.IAsyncResult> pattern when you have an existing API that uses the <xref:System.IAsyncResult> pattern.</span></span>

- <span data-ttu-id="71162-145">Si tiene una API existente basada en el modelo <xref:System.IAsyncResult>, considere también la posibilidad de exponer el modelo basado en eventos en la próxima versión.</span><span class="sxs-lookup"><span data-stu-id="71162-145">If you have an existing API based on the <xref:System.IAsyncResult> pattern, consider also exposing the event-based pattern in your next release.</span></span>

- <span data-ttu-id="71162-146">Solo exponga el modelo <xref:System.IAsyncResult> si tiene requisitos de alto rendimiento que haya comprobado que no se pueden satisfacer con el modelo basado en eventos, pero sí con el modelo <xref:System.IAsyncResult>.</span><span class="sxs-lookup"><span data-stu-id="71162-146">Only expose <xref:System.IAsyncResult> pattern if you have high performance requirements which you have verified cannot be met by the event-based pattern but can be met by the <xref:System.IAsyncResult> pattern.</span></span>

## <a name="see-also"></a><span data-ttu-id="71162-147">Vea también</span><span class="sxs-lookup"><span data-stu-id="71162-147">See also</span></span>

- [<span data-ttu-id="71162-148">Implementar un componente que admita el modelo asincrónico basado en eventos</span><span class="sxs-lookup"><span data-stu-id="71162-148">How to: Implement a Component That Supports the Event-based Asynchronous Pattern</span></span>](component-that-supports-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="71162-149">Modelo asincrónico basado en eventos (EAP)</span><span class="sxs-lookup"><span data-stu-id="71162-149">Event-based Asynchronous Pattern (EAP)</span></span>](event-based-asynchronous-pattern-eap.md)
- [<span data-ttu-id="71162-150">Implementación del modelo asincrónico basado en eventos</span><span class="sxs-lookup"><span data-stu-id="71162-150">Implementing the Event-based Asynchronous Pattern</span></span>](implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="71162-151">Procedimientos recomendados para implementar el modelo asincrónico basado en eventos</span><span class="sxs-lookup"><span data-stu-id="71162-151">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>](best-practices-for-implementing-the-event-based-asynchronous-pattern.md)
- <span data-ttu-id="71162-152">[Event-based Asynchronous Pattern Overview](event-based-asynchronous-pattern-overview.md) (Información general sobre el modelo asincrónico basado en eventos)</span><span class="sxs-lookup"><span data-stu-id="71162-152">[Event-based Asynchronous Pattern Overview](event-based-asynchronous-pattern-overview.md)</span></span>

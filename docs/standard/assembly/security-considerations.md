---
title: Consideraciones de seguridad sobre ensamblados
description: Cuando se compila un ensamblado .NET, se pueden especificar los permisos que son necesarios para su ejecución. En este artículo se describen los ensamblados con nombre seguro y las herramientas de firma.
ms.date: 08/20/2019
helpviewer_keywords:
- assemblies [.NET], security
- signcodes
- names [.NET], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET], signing
- granting permissions, assemblies
- assemblies [.NET], strong-named
- names [.NET], strong names
- permissions [.NET], assemblies
- security [.NET], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
ms.openlocfilehash: 91ea206abf80da275651854b9f13aa0116b7a1c5
ms.sourcegitcommit: 279fb6e8d515df51676528a7424a1df2f0917116
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/27/2020
ms.locfileid: "92687266"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="9068d-104">Consideraciones de seguridad sobre ensamblados</span><span class="sxs-lookup"><span data-stu-id="9068d-104">Assembly security considerations</span></span>

<span data-ttu-id="9068d-105">Cuando se compila un ensamblado, se puede especificar el conjunto de permisos que son necesarios para la ejecución del mismo.</span><span class="sxs-lookup"><span data-stu-id="9068d-105">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="9068d-106">La concesión de permisos específicos para un ensamblado se basa en la evidencia.</span><span class="sxs-lookup"><span data-stu-id="9068d-106">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="9068d-107">La evidencia se utiliza de dos formas distintas:</span><span class="sxs-lookup"><span data-stu-id="9068d-107">There are two distinct ways evidence is used:</span></span>  
  
- <span data-ttu-id="9068d-108">La evidencia de entrada se combina con la evidencia recopilada por el cargador para crear un juego final de evidencias que se utiliza en la resolución de directivas.</span><span class="sxs-lookup"><span data-stu-id="9068d-108">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="9068d-109">Entre los métodos que utilizan esta semántica se incluyen: **Assembly.Load** , **Assembly.LoadFrom** y **Activator.CreateInstance** .</span><span class="sxs-lookup"><span data-stu-id="9068d-109">The methods that use this semantic include **Assembly.Load** , **Assembly.LoadFrom** , and **Activator.CreateInstance** .</span></span>  
  
- <span data-ttu-id="9068d-110">La evidencia de entrada se utiliza sin modificaciones como el conjunto final de evidencias utilizadas en la resolución de directivas.</span><span class="sxs-lookup"><span data-stu-id="9068d-110">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="9068d-111">Entre los métodos que utilizan esta semántica se incluyen: **Assembly.Load(byte[])** y **AppDomain.DefineDynamicAssembly()** .</span><span class="sxs-lookup"><span data-stu-id="9068d-111">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()** .</span></span>  
  
  <span data-ttu-id="9068d-112">Se pueden conceder permisos opcionales mediante la [directiva de seguridad](../../framework/misc/code-access-security-basics.md) establecida en el equipo donde se ejecutará el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9068d-112">Optional permissions can be granted by the [security policy](../../framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="9068d-113">Si desea que su código controle todas las posibles excepciones de seguridad, puede:</span><span class="sxs-lookup"><span data-stu-id="9068d-113">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
- <span data-ttu-id="9068d-114">Insertar una solicitud de permiso para todos los permisos que deba tener su código y controlar por adelantado los errores que se puedan producir en tiempo de carga si no se conceden tales permisos.</span><span class="sxs-lookup"><span data-stu-id="9068d-114">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
- <span data-ttu-id="9068d-115">No utilizar una solicitud de permiso para obtener los permisos que pueda necesitar su código, pero estar preparado para controlar las excepciones de seguridad que se pueden producir si no se conceden los permisos.</span><span class="sxs-lookup"><span data-stu-id="9068d-115">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
  > [!NOTE]
  > <span data-ttu-id="9068d-116">La seguridad es una cuestión compleja, con muchas opciones posibles entre las que elegir.</span><span class="sxs-lookup"><span data-stu-id="9068d-116">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="9068d-117">Para más información, consulte [Conceptos clave de seguridad](../security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="9068d-117">For more information, see [Key Security Concepts](../security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="9068d-118">En el momento de la carga, se utiliza la evidencia del ensamblado como entrada para la directiva de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9068d-118">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="9068d-119">El administrador del equipo y la empresa y la configuración de directivas de usuario establecen la directiva de seguridad, que determina el conjunto de permisos que se concede a todo el código administrado cuando se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="9068d-119">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="9068d-120">La directiva de seguridad se puede establecer para la compañía del ensamblado (si tiene una firma generada utilizando la herramienta de firma), para el sitio y la zona Web (en términos de Internet Explorer) de los que se descargó el ensamblado o para el nombre seguro del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9068d-120">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="9068d-121">Por ejemplo, el administrador de un equipo puede establecer una directiva de seguridad que permita que todo el código descargado desde un sitio Web y firmado por una compañía de software dada pueda tener acceso a una base de datos del equipo, pero no le otorga permiso para escribir en el disco del equipo.</span><span class="sxs-lookup"><span data-stu-id="9068d-121">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="9068d-122">Ensamblados con nombre seguro y herramientas de firma</span><span class="sxs-lookup"><span data-stu-id="9068d-122">Strong-named assemblies and signing tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="9068d-123">Para garantizar la seguridad, no confíe únicamente en el uso de nombres seguros.</span><span class="sxs-lookup"><span data-stu-id="9068d-123">Do not rely on strong names for security.</span></span> <span data-ttu-id="9068d-124">Estos solo proporcionan una identidad única.</span><span class="sxs-lookup"><span data-stu-id="9068d-124">They provide a unique identity only.</span></span>

 <span data-ttu-id="9068d-125">Se puede firmar un ensamblado de dos formas diferentes y, a la vez, complementarias: con un nombre seguro o utilizando [SignTool.exe (Herramienta de firma)](../../framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="9068d-125">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="9068d-126">Al firmar un ensamblado con un nombre seguro, se agrega un cifrado mediante clave pública al archivo que contiene el manifiesto del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9068d-126">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="9068d-127">La firma mediante nombres seguros ayuda a comprobar la unicidad del nombre, impide la simulación de nombres y proporciona a los llamadores alguna identidad cuando se resuelve una referencia.</span><span class="sxs-lookup"><span data-stu-id="9068d-127">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="9068d-128">No hay ningún nivel de confianza asociado a un nombre seguro, lo que hace que [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) adquiera un carácter importante.</span><span class="sxs-lookup"><span data-stu-id="9068d-128">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="9068d-129">Las dos herramientas de firma requieren que una compañía de software demuestre su identidad a una autoridad de terceros y obtenga un certificado.</span><span class="sxs-lookup"><span data-stu-id="9068d-129">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="9068d-130">Este certificado se incrusta en el archivo y el administrador puede utilizarlo para decidir si debe confiar en la autenticidad del código.</span><span class="sxs-lookup"><span data-stu-id="9068d-130">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="9068d-131">Es posible asignar un nombre seguro y una firma digital creadas mediante la utilización de [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) en un ensamblado, o se puede utilizar cualquiera de las dos opciones por separado.</span><span class="sxs-lookup"><span data-stu-id="9068d-131">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="9068d-132">Ambas herramientas de firma sólo pueden firmar archivos de uno en uno; en el caso de un ensamblado de múltiples archivos, se firma el archivo que contiene el manifiesto del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9068d-132">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="9068d-133">Se almacena un nombre seguro en el archivo que contiene el manifiesto del ensamblado, pero la firma creada mediante la utilización de [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) se almacena en una ranura reservada del archivo ejecutable portable (PE) que contiene el manifiesto.</span><span class="sxs-lookup"><span data-stu-id="9068d-133">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="9068d-134">Se puede utilizar la firma de un ensamblado (con o sin nombre seguro) mediante [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) cuando ya se disponga de una jerarquía de confianza que se base en firmas generadas de [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) o cuando una determinada directiva utilice solo la parte de la clave y no compruebe una cadena de confianza.</span><span class="sxs-lookup"><span data-stu-id="9068d-134">Signing of an assembly using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9068d-135">Cuando se utilicen tanto un nombre seguro como una firma de la herramienta de firma en un ensamblado, primero se debe asignar el nombre seguro.</span><span class="sxs-lookup"><span data-stu-id="9068d-135">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="9068d-136">Common Language Runtime también realiza una comprobación de código hash; el manifiesto del ensamblado contiene una lista de todos los archivos que componen el ensamblado, incluido el código hash de cada archivo que existía cuando se compiló el manifiesto.</span><span class="sxs-lookup"><span data-stu-id="9068d-136">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="9068d-137">A medida que se carga cada uno de los archivos, se aplica un algoritmo hash a su contenido y se compara con el valor hash almacenado en el manifiesto.</span><span class="sxs-lookup"><span data-stu-id="9068d-137">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="9068d-138">Si los dos valores hash no coinciden, el ensamblado no se carga.</span><span class="sxs-lookup"><span data-stu-id="9068d-138">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="9068d-139">Debido a que los nombres seguros y las firmas que utilizan [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) garantizan la integridad, se puede basar la directiva de seguridad de acceso del código en estas dos formas de evidencia de ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9068d-139">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="9068d-140">Los nombres seguros y las firmas que utilizan [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) garantizan la integridad mediante firmas digitales y certificados.</span><span class="sxs-lookup"><span data-stu-id="9068d-140">Strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="9068d-141">Todas las tecnologías mencionadas (comprobación de código hash, nombres seguros y firmas que utilizan [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)) se combinan para garantizar que el ensamblado no ha sufrido ninguna alteración.</span><span class="sxs-lookup"><span data-stu-id="9068d-141">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9068d-142">Vea también</span><span class="sxs-lookup"><span data-stu-id="9068d-142">See also</span></span>

- [<span data-ttu-id="9068d-143">Ensamblados con nombre seguro</span><span class="sxs-lookup"><span data-stu-id="9068d-143">Strong-named assemblies</span></span>](strong-named.md)
- [<span data-ttu-id="9068d-144">Ensamblados de .NET</span><span class="sxs-lookup"><span data-stu-id="9068d-144">Assemblies in .NET</span></span>](index.md)
- [<span data-ttu-id="9068d-145">SignTool.exe (Herramienta de firma)</span><span class="sxs-lookup"><span data-stu-id="9068d-145">SignTool.exe (Sign Tool)</span></span>](../../framework/tools/signtool-exe.md)

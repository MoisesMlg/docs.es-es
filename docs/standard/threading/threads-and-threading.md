---
title: Subprocesos y subprocesamiento
description: Descubra el subprocesamiento, como los procesos y subprocesos, cuándo usar varios subprocesos, y cómo usar multithreading para aumentar la capacidad de respuesta o el rendimiento en .NET.
ms.date: 11/08/2018
helpviewer_keywords:
- multiple threads
- threading [.NET]
- threading [.NET], multiple threads
ms.assetid: 5baac3aa-e603-4fa6-9f89-0f2c1084e6b1
ms.openlocfilehash: 20550b597e27c75f00d16528871007988dd6b885
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/18/2020
ms.locfileid: "94819544"
---
# <a name="threads-and-threading"></a><span data-ttu-id="b5cb1-103">Subprocesos y subprocesamiento</span><span class="sxs-lookup"><span data-stu-id="b5cb1-103">Threads and threading</span></span>

<span data-ttu-id="b5cb1-104">El multithreading le permite aumentar la capacidad de respuesta de su aplicación y, en el caso de que la aplicación se ejecute en un sistema con varios procesadores o núcleos, aumentar su rendimiento.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-104">Multithreading allows you to increase the responsiveness of your application and, if your application runs on a multiprocessor or multi-core system, increase its throughput.</span></span>

## <a name="processes-and-threads"></a><span data-ttu-id="b5cb1-105">Procesos y subprocesos</span><span class="sxs-lookup"><span data-stu-id="b5cb1-105">Processes and threads</span></span>

<span data-ttu-id="b5cb1-106">Un *proceso* es un programa en ejecución.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-106">A *process* is an executing program.</span></span> <span data-ttu-id="b5cb1-107">Un sistema operativo utiliza procesos para separar las aplicaciones que se están ejecutando.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-107">An operating system uses processes to separate the applications that are being executed.</span></span> <span data-ttu-id="b5cb1-108">Un *subproceso* es la unidad básica a la que el sistema operativo asigna tiempo de procesador.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-108">A *thread* is the basic unit to which an operating system allocates processor time.</span></span> <span data-ttu-id="b5cb1-109">Cada subproceso tiene una [prioridad de programación](scheduling-threads.md) y mantiene un conjunto de estructuras que el sistema usa para guardar el contexto del subproceso mientras la ejecución del subproceso está pausada.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-109">Each thread has a [scheduling priority](scheduling-threads.md) and maintains a set of structures the system uses to save the thread context when the thread's execution is paused.</span></span> <span data-ttu-id="b5cb1-110">El contexto del subproceso incluye toda la información que el subproceso necesita para reanudar sin problemas la ejecución, incluido el conjunto de pila y registros de CPU del subproceso.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-110">The thread context includes all the information the thread needs to seamlessly resume execution, including the thread's set of CPU registers and stack.</span></span> <span data-ttu-id="b5cb1-111">Dentro de un proceso, se pueden ejecutar varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-111">Multiple threads can run in the context of a process.</span></span> <span data-ttu-id="b5cb1-112">Todos los subprocesos de un proceso comparten su espacio de direcciones virtuales.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-112">All threads of a process share its virtual address space.</span></span> <span data-ttu-id="b5cb1-113">Un subproceso puede ejecutar cualquier parte del código de programa, incluidas las partes que esté ejecutando otro subproceso.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-113">A thread can execute any part of the program code, including parts currently being executed by another thread.</span></span>

> [!NOTE]
> <span data-ttu-id="b5cb1-114">.NET Framework proporciona una manera de aislar las aplicaciones dentro de un proceso mediante el uso de *dominios de la aplicación*.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-114">.NET Framework provides a way to isolate applications within a process with the use of *application domains*.</span></span> <span data-ttu-id="b5cb1-115">Los dominios de aplicación no están disponibles en .NET Core. Para obtener más información, vea la sección [Dominios de aplicación y subprocesos](../../framework/app-domains/application-domains.md#application-domains-and-threads) del artículo [Dominios de aplicación](../../framework/app-domains/application-domains.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-115">(Application domains are not available on .NET Core.) For more information, see the [Application domains and threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) section of the [Application domains](../../framework/app-domains/application-domains.md) article.</span></span>

<span data-ttu-id="b5cb1-116">De forma predeterminada, un programa de .NET se inicia con un único subproceso, que se suele conocer como subproceso *principal*.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-116">By default, a .NET program is started with a single thread, often called the *primary* thread.</span></span> <span data-ttu-id="b5cb1-117">Sin embargo, puede crear subprocesos adicionales para ejecutar código en paralelo o simultáneamente con el subproceso principal.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-117">However, it can create additional threads to execute code in parallel or concurrently with the primary thread.</span></span> <span data-ttu-id="b5cb1-118">Normalmente, estos subprocesos se denominan subprocesos de *trabajo*.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-118">These threads are often called *worker* threads.</span></span>

## <a name="when-to-use-multiple-threads"></a><span data-ttu-id="b5cb1-119">Cuándo utilizar varios subprocesos</span><span class="sxs-lookup"><span data-stu-id="b5cb1-119">When to use multiple threads</span></span>

<span data-ttu-id="b5cb1-120">Utilice varios subprocesos para aumentar la capacidad de respuesta de la aplicación y aprovechar las ventajas de un sistema con varios procesadores o núcleos que le permita aumentar el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-120">You use multiple threads to increase the responsiveness of your application and to take advantage of a multiprocessor or multi-core system to increase the application's throughput.</span></span>

<span data-ttu-id="b5cb1-121">Le recomendamos que use una aplicación de escritorio en la que el subproceso principal sea responsable de los elementos de la interfaz de usuario e interactivo.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-121">Consider a desktop application, in which the primary thread is responsible for user interface elements and responds to user actions.</span></span> <span data-ttu-id="b5cb1-122">Use subprocesos de trabajo para realizar operaciones complejas que ocuparían el subproceso principal e impedirían la interacción con la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-122">Use worker threads to perform time-consuming operations that, otherwise, would occupy the primary thread and make the user interface non-responsive.</span></span> <span data-ttu-id="b5cb1-123">También puede usar un subproceso dedicado para la comunicación mediante red o dispositivo, de modo que su capacidad de respuesta ante los mensajes y eventos entrantes sea mayor.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-123">You can also use a dedicated thread for network or device communication to be more responsive to incoming messages or events.</span></span>

<span data-ttu-id="b5cb1-124">Si el programa realiza operaciones que pueden realizarse en paralelo, puede reducir el tiempo de ejecución total realizándolas en subprocesos separados y ejecutando el programa en un sistema con varios procesadores o núcleos.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-124">If your program performs operations that can be done in parallel, the total execution time can be decreased by performing those operations in separate threads and running the program on a multiprocessor or multi-core system.</span></span> <span data-ttu-id="b5cb1-125">En un sistema de este tipo, el uso del mutithreading puede aumentar el rendimiento y la capacidad de respuesta.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-125">On such a system, use of multithreading might increase throughput along with the increased responsiveness.</span></span>

## <a name="how-to-use-multithreading-in-net"></a><span data-ttu-id="b5cb1-126">Cómo usar el multithreading en .NET</span><span class="sxs-lookup"><span data-stu-id="b5cb1-126">How to use multithreading in .NET</span></span>

<span data-ttu-id="b5cb1-127">A partir de .NET Framework 4, la forma recomendada de usar el multithreading consiste en emplear las bibliotecas [TPL](../parallel-programming/task-parallel-library-tpl.md) y [PLINQ](../parallel-programming/introduction-to-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-127">Starting with .NET Framework 4, the recommended way to utilize multithreading is to use [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) and [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span></span> <span data-ttu-id="b5cb1-128">Para obtener más información, vea [Programación en paralelo](../parallel-programming/index.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-128">For more information, see [Parallel programming](../parallel-programming/index.md).</span></span>

<span data-ttu-id="b5cb1-129">Las bibliotecas TPL y PLINQ se basan en los subprocesos de <xref:System.Threading.ThreadPool>.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-129">Both TPL and PLINQ rely on the <xref:System.Threading.ThreadPool> threads.</span></span> <span data-ttu-id="b5cb1-130">La clase <xref:System.Threading.ThreadPool?displayProperty=nameWithType> proporciona una aplicación .NET con un grupo de subprocesos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-130">The <xref:System.Threading.ThreadPool?displayProperty=nameWithType> class provides a .NET application with a pool of worker threads.</span></span> <span data-ttu-id="b5cb1-131">También puede usar grupos de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-131">You can also use thread pool threads.</span></span> <span data-ttu-id="b5cb1-132">Para obtener más información, vea [Grupo de subprocesos administrado](the-managed-thread-pool.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-132">For more information, see [The managed thread pool](the-managed-thread-pool.md).</span></span>

<span data-ttu-id="b5cb1-133">Por último, puede usar la clase <xref:System.Threading.Thread?displayProperty=nameWithType> que representa un subproceso administrado.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-133">At last, you can use the <xref:System.Threading.Thread?displayProperty=nameWithType> class that represents a managed thread.</span></span> <span data-ttu-id="b5cb1-134">Para obtener más información, vea [Uso de subprocesos y subprocesamiento](using-threads-and-threading.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-134">For more information, see [Using threads and threading](using-threads-and-threading.md).</span></span>

<span data-ttu-id="b5cb1-135">Puede que se necesiten varios subprocesos para acceder a un recurso compartido.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-135">Multiple threads might need to access a shared resource.</span></span> <span data-ttu-id="b5cb1-136">Para mantener el recurso en un estado no dañado y evitar las condiciones de carrera, debe sincronizar el acceso del subproceso a este.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-136">To keep the resource in a uncorrupted state and avoid race conditions, you must synchronize the thread access to it.</span></span> <span data-ttu-id="b5cb1-137">También puede optar por coordinar la interacción en varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-137">You also might want to coordinate the interaction of multiple threads.</span></span> <span data-ttu-id="b5cb1-138">.NET proporciona una variedad de tipos que puede usar para sincronizar el acceso a un recurso compartido o coordinar la interacción de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-138">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span> <span data-ttu-id="b5cb1-139">Para obtener más información, vea [Información general sobre las primitivas de sincronización](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-139">For more information, see [Overview of synchronization primitives](overview-of-synchronization-primitives.md).</span></span>

<span data-ttu-id="b5cb1-140">Controle las excepciones de los subprocesos.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-140">Do handle exceptions in threads.</span></span> <span data-ttu-id="b5cb1-141">Las excepciones no controladas en los subprocesos suelen finalizar el proceso.</span><span class="sxs-lookup"><span data-stu-id="b5cb1-141">Unhandled exceptions in threads generally terminate the process.</span></span> <span data-ttu-id="b5cb1-142">Para más información, consulte [Excepciones en subprocesos administrados](exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b5cb1-142">For more information, see [Exceptions in managed threads](exceptions-in-managed-threads.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="b5cb1-143">Vea también</span><span class="sxs-lookup"><span data-stu-id="b5cb1-143">See also</span></span>

- [<span data-ttu-id="b5cb1-144">Objetos y características de subprocesos</span><span class="sxs-lookup"><span data-stu-id="b5cb1-144">Threading objects and features</span></span>](threading-objects-and-features.md)
- [<span data-ttu-id="b5cb1-145">Procedimientos recomendados para el subprocesamiento administrado</span><span class="sxs-lookup"><span data-stu-id="b5cb1-145">Managed threading best practices</span></span>](managed-threading-best-practices.md)
- [<span data-ttu-id="b5cb1-146">Procesamiento paralelo, simultaneidad y programación asincrónica en .NET</span><span class="sxs-lookup"><span data-stu-id="b5cb1-146">Parallel Processing, Concurrency, and Async Programming in .NET</span></span>](../parallel-processing-and-concurrency.md)
- [<span data-ttu-id="b5cb1-147">Acerca de los procesos y los subprocesos</span><span class="sxs-lookup"><span data-stu-id="b5cb1-147">About Processes and Threads</span></span>](/windows/desktop/procthread/about-processes-and-threads)

---
title: Uso de subprocesos y subprocesamiento
description: Obtenga información sobre cómo usar subprocesos y subprocesamiento en .NET para escribir aplicaciones que realicen muchas operaciones al mismo tiempo (multithreading).
ms.date: 08/08/2018
helpviewer_keywords:
- threading [.NET], about threading
- managed threading
ms.assetid: 9b5ec2cd-121b-4d49-b075-222cf26f2344
ms.openlocfilehash: 85968cfb1a228826429876e525f0c8452f97cfc4
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/18/2020
ms.locfileid: "94826097"
---
# <a name="using-threads-and-threading"></a><span data-ttu-id="c914d-103">Uso de subprocesos y subprocesamiento</span><span class="sxs-lookup"><span data-stu-id="c914d-103">Using threads and threading</span></span>

<span data-ttu-id="c914d-104">Con .NET, se pueden escribir aplicaciones que realicen varias operaciones al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="c914d-104">With .NET, you can write applications that perform multiple operations at the same time.</span></span> <span data-ttu-id="c914d-105">Las operaciones con la posibilidad de contener otras operaciones se pueden ejecutar en subprocesos independientes, lo que se conoce como *multithreading* o *subprocesamiento libre*.</span><span class="sxs-lookup"><span data-stu-id="c914d-105">Operations with the potential of holding up other operations can execute on separate threads, a process known as *multithreading* or *free threading*.</span></span>  
  
<span data-ttu-id="c914d-106">Las aplicaciones que usan multithreading responden mejor a la entrada del usuario, ya que la interfaz de usuario permanece activa mientras las tareas que requieren un uso intensivo del procesador se ejecutan en subprocesos separados.</span><span class="sxs-lookup"><span data-stu-id="c914d-106">Applications that use multithreading are more responsive to user input because the user interface stays active as processor-intensive tasks execute on separate threads.</span></span> <span data-ttu-id="c914d-107">El multithreading también es útil cuando se crean aplicaciones escalables, porque se pueden agregar subprocesos a medida que aumenta la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="c914d-107">Multithreading is also useful when you create scalable applications, because you can add threads as the workload increases.</span></span>

> [!NOTE]
> <span data-ttu-id="c914d-108">Si necesita más control sobre el comportamiento de los subprocesos de la aplicación, puede administrar los subprocesos por su cuenta.</span><span class="sxs-lookup"><span data-stu-id="c914d-108">If you need more control over the behavior of the application's threads, you can manage the threads yourself.</span></span> <span data-ttu-id="c914d-109">Pero la programación multiproceso se ha simplificado significativamente con las clases <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> y <xref:System.Threading.Tasks.Task?displayProperty=nameWithType>, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), las clases de colecciones simultáneas del espacio de nombres <xref:System.Collections.Concurrent?displayProperty=nameWithType> y un modelo de programación basado en el concepto de tareas en lugar de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="c914d-109">However, multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="c914d-110">Para obtener más información, vea [Programación en paralelo](../parallel-programming/index.md) y [Biblioteca de procesamiento paralelo basado en tareas (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="c914d-110">For more information, see [Parallel Programming](../parallel-programming/index.md) and [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span></span>

## <a name="how-to-create-and-start-a-new-thread"></a><span data-ttu-id="c914d-111">Procedimiento para crear e iniciar un subproceso nuevo</span><span class="sxs-lookup"><span data-stu-id="c914d-111">How to: Create and start a new thread</span></span>

<span data-ttu-id="c914d-112">Un subproceso se crea mediante la creación de una instancia de la clase <xref:System.Threading.Thread?displayProperty=nameWithType> y proporcionando al constructor el nombre del método que se quiere ejecutar en un subproceso nuevo.</span><span class="sxs-lookup"><span data-stu-id="c914d-112">You create a new thread by creating a new instance of the <xref:System.Threading.Thread?displayProperty=nameWithType> class and providing the name of the method that you want to execute on a new thread to the constructor.</span></span> <span data-ttu-id="c914d-113">Para iniciar un subproceso creado, llame al método <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c914d-113">To start a created thread, call the <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c914d-114">Para obtener más información y ejemplos, vea el artículo [Creación de subprocesos y análisis de los datos en el inicio](creating-threads-and-passing-data-at-start-time.md) y la referencia de la API <xref:System.Threading.Thread>.</span><span class="sxs-lookup"><span data-stu-id="c914d-114">For more information and examples, see the [Creating threads and passing data at start time](creating-threads-and-passing-data-at-start-time.md) article and the <xref:System.Threading.Thread> API reference.</span></span>

## <a name="how-to-stop-a-thread"></a><span data-ttu-id="c914d-115">Procedimiento para detener un subproceso</span><span class="sxs-lookup"><span data-stu-id="c914d-115">How to: Stop a thread</span></span>

<span data-ttu-id="c914d-116">Para terminar la ejecución de un subproceso, use <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c914d-116">To terminate the execution of a thread, use the <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c914d-117">Proporciona una manera unificada de detener los subprocesos de forma cooperativa.</span><span class="sxs-lookup"><span data-stu-id="c914d-117">It provides a unified way to stop threads cooperatively.</span></span> <span data-ttu-id="c914d-118">Para más información, consulte [Cancelación de subprocesos administrados](cancellation-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="c914d-118">For more information, see [Cancellation in managed threads](cancellation-in-managed-threads.md).</span></span>

<span data-ttu-id="c914d-119">A veces no es posible detener un subproceso de forma cooperativa, ya que ejecuta código de terceros no diseñado para la cancelación cooperativa.</span><span class="sxs-lookup"><span data-stu-id="c914d-119">Sometimes it is not possible to stop a thread cooperatively, because it runs third-party code not designed for cooperative cancellation.</span></span> <span data-ttu-id="c914d-120">En este caso, es posible que desee terminar la ejecución forzosamente.</span><span class="sxs-lookup"><span data-stu-id="c914d-120">In this case, you might want to terminate its execution forcibly.</span></span> <span data-ttu-id="c914d-121">Para terminar la ejecución de un subproceso forzosamente, en .NET Framework puede utilizar el método <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c914d-121">To terminate the execution of a thread forcibly, in .NET Framework you can use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c914d-122">Ese método genera una excepción <xref:System.Threading.ThreadAbortException> en el subproceso en el que se invoca.</span><span class="sxs-lookup"><span data-stu-id="c914d-122">That method raises a <xref:System.Threading.ThreadAbortException> on the thread on which it's invoked.</span></span> <span data-ttu-id="c914d-123">Para obtener más información, vea [Destruir subprocesos](destroying-threads.md).</span><span class="sxs-lookup"><span data-stu-id="c914d-123">For more information, see [Destroying threads](destroying-threads.md).</span></span> <span data-ttu-id="c914d-124">El método <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> no se admite en .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c914d-124">The <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method is not supported in .NET Core.</span></span> <span data-ttu-id="c914d-125">Si necesita terminar la ejecución de código de terceros de forma forzada en .NET Core, ejecútelo en el proceso independiente y use <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c914d-125">If you need to terminate the execution of third-party code forcibly in .NET Core, run it in the separate process and use <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="c914d-126"><xref:System.Threading.CancellationToken?displayProperty=nameWithType> no está disponible antes de .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="c914d-126">The <xref:System.Threading.CancellationToken?displayProperty=nameWithType> is not available before .NET Framework 4.</span></span> <span data-ttu-id="c914d-127">Para detener un subproceso en versiones anteriores de .NET Framework, implemente manualmente la cancelación cooperativa mediante las técnicas de sincronización de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="c914d-127">To stop a thread in older .NET Framework versions, implement the cooperative cancellation manually using the thread synchronization techniques.</span></span> <span data-ttu-id="c914d-128">Por ejemplo, puede crear el campo booleano volatile `shouldStop` y usarlo para solicitar que se detenga el código ejecutado por el subproceso.</span><span class="sxs-lookup"><span data-stu-id="c914d-128">For example, you can create the volatile boolean field `shouldStop` and use it to request the code executed by the thread to stop.</span></span> <span data-ttu-id="c914d-129">Para más información, vea [volatile](../../csharp/language-reference/keywords/volatile.md) en Referencia de C# y <xref:System.Threading.Volatile?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c914d-129">For more information, see [volatile](../../csharp/language-reference/keywords/volatile.md) in C# Reference and <xref:System.Threading.Volatile?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="c914d-130">Use el método <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> para hacer que el subproceso que realiza la llamada espere a la finalización del subproceso que se está deteniendo.</span><span class="sxs-lookup"><span data-stu-id="c914d-130">Use the <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> method to make the calling thread wait for the termination of the thread being stopped.</span></span>

## <a name="how-to-pause-or-interrupt-a-thread"></a><span data-ttu-id="c914d-131">Procedimiento para pausar o interrumpir un subproceso</span><span class="sxs-lookup"><span data-stu-id="c914d-131">How to: Pause or interrupt a thread</span></span>

<span data-ttu-id="c914d-132">El método <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> se usa para pausar el subproceso actual durante un período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="c914d-132">You use the <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> method to pause the current thread for a specified amount of time.</span></span> <span data-ttu-id="c914d-133">Un subproceso bloqueado se puede interrumpir mediante una llamada al método <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c914d-133">You can interrupt a blocked thread by calling the <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="c914d-134">Para obtener más información, vea [Pausa e interrupción de subprocesos](pausing-and-resuming-threads.md).</span><span class="sxs-lookup"><span data-stu-id="c914d-134">For more information, see [Pausing and interrupting threads](pausing-and-resuming-threads.md).</span></span>

## <a name="thread-properties"></a><span data-ttu-id="c914d-135">Propiedades de subproceso</span><span class="sxs-lookup"><span data-stu-id="c914d-135">Thread properties</span></span>

<span data-ttu-id="c914d-136">En la tabla siguiente se muestran algunas de las propiedades de <xref:System.Threading.Thread>:</span><span class="sxs-lookup"><span data-stu-id="c914d-136">The following table presents some of the <xref:System.Threading.Thread> properties:</span></span>  
  
|<span data-ttu-id="c914d-137">Propiedad.</span><span class="sxs-lookup"><span data-stu-id="c914d-137">Property</span></span>|<span data-ttu-id="c914d-138">Descripción</span><span class="sxs-lookup"><span data-stu-id="c914d-138">Description</span></span>|  
|--------------|-----------|  
|<xref:System.Threading.Thread.IsAlive%2A>|<span data-ttu-id="c914d-139">Devuelve `true` si el subproceso se ha iniciado y todavía no ha terminado con normalidad o se ha anulado.</span><span class="sxs-lookup"><span data-stu-id="c914d-139">Returns `true` if a thread has been started and has not yet terminated normally or aborted.</span></span>|  
|<xref:System.Threading.Thread.IsBackground%2A>|<span data-ttu-id="c914d-140">Obtiene o establece un valor booleano que indica si un subproceso es un subproceso en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="c914d-140">Gets or sets a Boolean that indicates if a thread is a background thread.</span></span> <span data-ttu-id="c914d-141">Los subprocesos en segundo plano son como los subprocesos en primer plano, con la diferencia de que un subproceso en segundo plano no impide que un proceso se detenga.</span><span class="sxs-lookup"><span data-stu-id="c914d-141">Background threads are like foreground threads, but a background thread doesn't prevent a process from stopping.</span></span> <span data-ttu-id="c914d-142">Una vez que se hayan detenido todos los subprocesos en primer plano que pertenecen a un proceso, Common Language Runtime finaliza el proceso mediante una llamada al método <xref:System.Threading.Thread.Abort%2A> en los subprocesos en segundo plano que continúan activos.</span><span class="sxs-lookup"><span data-stu-id="c914d-142">Once all foreground threads that belong to a process have stopped, the common language runtime ends the process by calling the <xref:System.Threading.Thread.Abort%2A> method on background threads that are still alive.</span></span> <span data-ttu-id="c914d-143">Para obtener más información, vea [Subprocesos de primer y segundo plano](foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="c914d-143">For more information, see [Foreground and Background Threads](foreground-and-background-threads.md).</span></span>|  
|<xref:System.Threading.Thread.Name%2A>|<span data-ttu-id="c914d-144">Obtiene o establece el nombre de un subproceso.</span><span class="sxs-lookup"><span data-stu-id="c914d-144">Gets or sets the name of a thread.</span></span> <span data-ttu-id="c914d-145">Suele usarse para detectar subprocesos individuales durante la depuración.</span><span class="sxs-lookup"><span data-stu-id="c914d-145">Most frequently used to discover individual threads when you debug.</span></span>|  
|<xref:System.Threading.Thread.Priority%2A>|<span data-ttu-id="c914d-146">Obtiene o establece un valor <xref:System.Threading.ThreadPriority> que el sistema operativo usa para dar prioridad a la programación de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="c914d-146">Gets or sets a <xref:System.Threading.ThreadPriority> value that is used by the operating system to prioritize thread scheduling.</span></span> <span data-ttu-id="c914d-147">Para obtener más información, vea [Planear subprocesos](scheduling-threads.md) y la referencia de <xref:System.Threading.ThreadPriority>.</span><span class="sxs-lookup"><span data-stu-id="c914d-147">For more information, see [Scheduling threads](scheduling-threads.md) and the <xref:System.Threading.ThreadPriority> reference.</span></span>|  
|<xref:System.Threading.Thread.ThreadState%2A>|<span data-ttu-id="c914d-148">Obtiene un valor <xref:System.Threading.ThreadState> que contiene los estados actuales de un subproceso.</span><span class="sxs-lookup"><span data-stu-id="c914d-148">Gets a <xref:System.Threading.ThreadState> value containing the current states of a thread.</span></span>|  

## <a name="see-also"></a><span data-ttu-id="c914d-149">Vea también</span><span class="sxs-lookup"><span data-stu-id="c914d-149">See also</span></span>

- <xref:System.Threading.Thread?displayProperty=nameWithType>
- [<span data-ttu-id="c914d-150">Subprocesos y subprocesamiento</span><span class="sxs-lookup"><span data-stu-id="c914d-150">Threads and Threading</span></span>](threads-and-threading.md)
- [<span data-ttu-id="c914d-151">Programación en paralelo</span><span class="sxs-lookup"><span data-stu-id="c914d-151">Parallel Programming</span></span>](../parallel-programming/index.md)

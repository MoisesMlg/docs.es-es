---
title: Objetos Principal e Identity
description: Lea acerca de los objetos de identidad, que representan a los usuarios de .NET. También puede leer sobre los objetos de entidad de seguridad, que encapsulan un objeto de identidad & un rol.
ms.date: 07/15/2020
helpviewer_keywords:
- WindowsIdentity objects
- GenericIdentity objects
- GenericPrincipal objects
- identity objects, about identity objects
- security [.NET], identity objects
- principal objects, about principal objects
- security [.NET], principals
- WindowsPrincipal objects
ms.assetid: aa5930ad-f3d7-40aa-b6f6-c6edcd5c64f7
ms.openlocfilehash: cfda506fc29e9a86e97b3c99faf2d4155c894f03
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/18/2020
ms.locfileid: "94824244"
---
# <a name="principal-and-identity-objects"></a><span data-ttu-id="a47c2-104">Objetos Principal e Identity</span><span class="sxs-lookup"><span data-stu-id="a47c2-104">Principal and Identity Objects</span></span>

> [!NOTE]
> <span data-ttu-id="a47c2-105">Este artículo se aplica a Windows.</span><span class="sxs-lookup"><span data-stu-id="a47c2-105">This article applies to Windows.</span></span>
>
> <span data-ttu-id="a47c2-106">Para obtener información sobre ASP.NET Core, consulte [ASP.net Core Security](/aspnet/core/security/).</span><span class="sxs-lookup"><span data-stu-id="a47c2-106">For information about ASP.NET Core, see [ASP.NET Core Security](/aspnet/core/security/).</span></span>

<span data-ttu-id="a47c2-107">El código administrado puede detectar la identidad o el rol de una entidad de seguridad a través de un <xref:System.Security.Principal.IPrincipal> objeto, que contiene una referencia a un <xref:System.Security.Principal.IIdentity> objeto.</span><span class="sxs-lookup"><span data-stu-id="a47c2-107">Managed code can discover the identity or the role of a principal through a <xref:System.Security.Principal.IPrincipal> object, which contains a reference to an <xref:System.Security.Principal.IIdentity> object.</span></span> <span data-ttu-id="a47c2-108">La comparación de objetos Identity y Principal puede resultar útil en conceptos familiares, como cuentas de usuario y de grupo.</span><span class="sxs-lookup"><span data-stu-id="a47c2-108">It might be helpful to compare identity and principal objects to familiar concepts like user and group accounts.</span></span> <span data-ttu-id="a47c2-109">En la mayoría de los entornos de red, las cuentas de usuario representan a personas o programas, mientras que las cuentas de grupo representan a ciertas categorías de usuarios y los derechos que poseen.</span><span class="sxs-lookup"><span data-stu-id="a47c2-109">In most network environments, user accounts represent people or programs, while group accounts represent certain categories of users and the rights they possess.</span></span> <span data-ttu-id="a47c2-110">De forma similar, los objetos de identidad de .NET representan a los usuarios, mientras que los roles representan pertenencias y contextos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="a47c2-110">Similarly, .NET identity objects represent users, while roles represent memberships and security contexts.</span></span> <span data-ttu-id="a47c2-111">En .NET, el objeto principal encapsula un objeto de identidad y un rol.</span><span class="sxs-lookup"><span data-stu-id="a47c2-111">In .NET, the principal object encapsulates both an identity object and a role.</span></span> <span data-ttu-id="a47c2-112">Las aplicaciones .NET conceden derechos a la entidad de seguridad en función de su identidad o, más comúnmente, su pertenencia a roles.</span><span class="sxs-lookup"><span data-stu-id="a47c2-112">.NET applications grant rights to the principal based on its identity or, more commonly, its role membership.</span></span>  
  
## <a name="identity-objects"></a><span data-ttu-id="a47c2-113">Objetos Identity</span><span class="sxs-lookup"><span data-stu-id="a47c2-113">Identity Objects</span></span>

<span data-ttu-id="a47c2-114">El objeto Identity encapsula información sobre el usuario o la entidad que se está validando.</span><span class="sxs-lookup"><span data-stu-id="a47c2-114">The identity object encapsulates information about the user or entity being validated.</span></span> <span data-ttu-id="a47c2-115">En su nivel más básico, los objetos Identity contienen un nombre y un tipo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a47c2-115">At their most basic level, identity objects contain a name and an authentication type.</span></span> <span data-ttu-id="a47c2-116">El nombre puede ser un nombre de usuario o el nombre de una cuenta de Windows, mientras que el tipo de autenticación puede ser un protocolo de inicio de admisión admitido, como Kerberos V5, o un valor personalizado.</span><span class="sxs-lookup"><span data-stu-id="a47c2-116">The name can either be a user's name or the name of a Windows account, while the authentication type can be either a supported logon protocol, such as Kerberos V5, or a custom value.</span></span> <span data-ttu-id="a47c2-117">.NET define un <xref:System.Security.Principal.GenericIdentity> objeto que se puede usar para la mayoría de los escenarios de inicio de sesión personalizados y un objeto más especializado <xref:System.Security.Principal.WindowsIdentity> que se puede usar cuando se desea que la aplicación se base en la autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="a47c2-117">.NET defines a <xref:System.Security.Principal.GenericIdentity> object that can be used for most custom logon scenarios and a more specialized <xref:System.Security.Principal.WindowsIdentity> object that can be used when you want your application to rely on Windows authentication.</span></span> <span data-ttu-id="a47c2-118">Además, puede definir la clase de identidad propia que encapsula la información personalizada del usuario.</span><span class="sxs-lookup"><span data-stu-id="a47c2-118">Additionally, you can define your own identity class that encapsulates custom user information.</span></span>  
  
<span data-ttu-id="a47c2-119">La <xref:System.Security.Principal.IIdentity> interfaz define las propiedades para tener acceso a un nombre y un tipo de autenticación, como Kerberos V5 o NTLM.</span><span class="sxs-lookup"><span data-stu-id="a47c2-119">The <xref:System.Security.Principal.IIdentity> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM.</span></span> <span data-ttu-id="a47c2-120">Todas las clases **Identity** implementan la interfaz **IIdentity**.</span><span class="sxs-lookup"><span data-stu-id="a47c2-120">All **Identity** classes implement the **IIdentity** interface.</span></span> <span data-ttu-id="a47c2-121">No hay una relación necesaria entre un objeto **Identity** y el token de proceso de Windows NT bajo el cual se está ejecutando actualmente un subproceso.</span><span class="sxs-lookup"><span data-stu-id="a47c2-121">There is no required relationship between an **Identity** object and the Windows NT process token under which a thread is currently executing.</span></span> <span data-ttu-id="a47c2-122">No obstante, si el objeto **Identity** es un objeto **WindowsIdentity**, se supone que la identidad representa un token de seguridad de Windows NT.</span><span class="sxs-lookup"><span data-stu-id="a47c2-122">However, if the **Identity** object is a **WindowsIdentity** object, the identity is assumed to represent a Windows NT security token.</span></span>  
  
## <a name="principal-objects"></a><span data-ttu-id="a47c2-123">Objetos Principal</span><span class="sxs-lookup"><span data-stu-id="a47c2-123">Principal Objects</span></span>

<span data-ttu-id="a47c2-124">El objeto Principal representa el contexto de seguridad bajo el cual se ejecuta código.</span><span class="sxs-lookup"><span data-stu-id="a47c2-124">The principal object represents the security context under which code is running.</span></span> <span data-ttu-id="a47c2-125">Las aplicaciones que implementan seguridad basada en roles conceden derechos tomando como base el rol asociado a un objeto Principal.</span><span class="sxs-lookup"><span data-stu-id="a47c2-125">Applications that implement role-based security grant rights based on the role associated with a principal object.</span></span> <span data-ttu-id="a47c2-126">De forma similar a los objetos de identidad, .NET proporciona un <xref:System.Security.Principal.GenericPrincipal> objeto y un <xref:System.Security.Principal.WindowsPrincipal> objeto.</span><span class="sxs-lookup"><span data-stu-id="a47c2-126">Similar to identity objects, .NET provides a <xref:System.Security.Principal.GenericPrincipal> object and a <xref:System.Security.Principal.WindowsPrincipal> object.</span></span> <span data-ttu-id="a47c2-127">También puede definir sus propias clases de entidad de seguridad personalizadas.</span><span class="sxs-lookup"><span data-stu-id="a47c2-127">You can also define your own custom principal classes.</span></span>  
  
<span data-ttu-id="a47c2-128">La <xref:System.Security.Principal.IPrincipal> interfaz define una propiedad para tener acceso a un objeto de **identidad** asociado, así como un método para determinar si el usuario identificado por el objeto de **entidad** de seguridad es miembro de un rol determinado.</span><span class="sxs-lookup"><span data-stu-id="a47c2-128">The <xref:System.Security.Principal.IPrincipal> interface defines a property for accessing an associated **Identity** object as well as a method for determining whether the user identified by the **Principal** object is a member of a given role.</span></span> <span data-ttu-id="a47c2-129">Todas las clases **Principal** implementan la interfaz **IPrincipal**, así como las propiedades y métodos adicionales necesarios.</span><span class="sxs-lookup"><span data-stu-id="a47c2-129">All **Principal** classes implement the **IPrincipal** interface as well as any additional properties and methods that are necessary.</span></span> <span data-ttu-id="a47c2-130">Por ejemplo, Common Language Runtime proporciona la clase **WindowsPrincipal**, que implementa funcionalidad adicional para asignar a roles la pertenencia a un grupo de Windows NT o Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="a47c2-130">For example, the common language runtime provides the **WindowsPrincipal** class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles.</span></span>  
  
<span data-ttu-id="a47c2-131">Un objeto de **entidad** de seguridad se enlaza a un <xref:System.Runtime.Remoting.Messaging.CallContext> objeto de contexto de llamada () dentro de un dominio de aplicación ( <xref:System.AppDomain> ).</span><span class="sxs-lookup"><span data-stu-id="a47c2-131">A **Principal** object is bound to a call context (<xref:System.Runtime.Remoting.Messaging.CallContext>) object within an application domain (<xref:System.AppDomain>).</span></span> <span data-ttu-id="a47c2-132">Un contexto de llamada predeterminado se crea siempre con cada dominio **AppDomain** nuevo, por lo que siempre hay un contexto de llamada disponible para aceptar el objeto **Principal**.</span><span class="sxs-lookup"><span data-stu-id="a47c2-132">A default call context is always created with each new **AppDomain**, so there is always a call context available to accept the **Principal** object.</span></span> <span data-ttu-id="a47c2-133">Cuando se crea un subproceso nuevo, también se crea un objeto **CallContext** para el subproceso.</span><span class="sxs-lookup"><span data-stu-id="a47c2-133">When a new thread is created, a **CallContext** object is also created for the thread.</span></span> <span data-ttu-id="a47c2-134">La referencia del objeto **Principal** se copia automáticamente desde el subproceso creador en el objeto **CallContext** del subproceso nuevo.</span><span class="sxs-lookup"><span data-stu-id="a47c2-134">The **Principal** object reference is automatically copied from the creating thread to the new thread's **CallContext**.</span></span> <span data-ttu-id="a47c2-135">Si el tiempo de ejecución no puede determinar qué objeto **Principal** pertenece al creador del subproceso, sigue la directiva predeterminada para la creación de objetos **Principal** e **Identity**.</span><span class="sxs-lookup"><span data-stu-id="a47c2-135">If the runtime cannot determine which **Principal** object belongs to the creator of the thread, it follows the default policy for **Principal** and **Identity** object creation.</span></span>  
  
<span data-ttu-id="a47c2-136">Una directiva específica de dominio de aplicación configurable define las reglas para decidir qué tipo de objeto **Principal** se ha de asociar a un dominio de aplicación nuevo.</span><span class="sxs-lookup"><span data-stu-id="a47c2-136">A configurable application domain-specific policy defines the rules for deciding what type of **Principal** object to associate with a new application domain.</span></span> <span data-ttu-id="a47c2-137">Cuando la directiva de seguridad lo permite, el tiempo de ejecución puede crear objetos **Principal** e **Identity** que reflejan el token de sistema operativo asociado al subproceso actual de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a47c2-137">Where security policy permits, the runtime can create **Principal** and **Identity** objects that reflect the operating system token associated with the current thread of execution.</span></span> <span data-ttu-id="a47c2-138">De forma predeterminada, el tiempo de ejecución utiliza objetos **Principal** e **Identity** que representan a usuarios no autenticados.</span><span class="sxs-lookup"><span data-stu-id="a47c2-138">By default, the runtime uses **Principal** and **Identity** objects that represent unauthenticated users.</span></span> <span data-ttu-id="a47c2-139">El tiempo de ejecución no crea estos objetos **Principal** y **Identity** predeterminados hasta que el código trata de tener acceso a ellos.</span><span class="sxs-lookup"><span data-stu-id="a47c2-139">The runtime does not create these default **Principal** and **Identity** objects until the code attempts to access them.</span></span>  
  
<span data-ttu-id="a47c2-140">El código de confianza que crea un dominio de aplicación puede establecer la directiva de dominio de aplicación que controla la construcción de los objetos **Principal** e **Identity** predeterminados.</span><span class="sxs-lookup"><span data-stu-id="a47c2-140">Trusted code that creates an application domain can set the application domain policy that controls construction of the default **Principal** and **Identity** objects.</span></span> <span data-ttu-id="a47c2-141">Esta directiva específica de dominio de aplicación se aplica a todos los subprocesos de ejecución de dicho dominio.</span><span class="sxs-lookup"><span data-stu-id="a47c2-141">This application domain-specific policy applies to all execution threads in that application domain.</span></span> <span data-ttu-id="a47c2-142">Un host de confianza sin administrar inherentemente tiene la capacidad de establecer esta Directiva, pero el código administrado que establece esta Directiva debe tener el <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> para controlar la Directiva de dominio.</span><span class="sxs-lookup"><span data-stu-id="a47c2-142">An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> for controlling domain policy.</span></span>  
  
<span data-ttu-id="a47c2-143">Cuando se transmite un objeto **Principal** a través de dominios de aplicación, pero dentro del mismo proceso (y, por tanto, en el mismo equipo), la infraestructura de comunicación remota copia una referencia en el objeto **Principal** asociado al contexto de quien efectúa una llamada en el contexto de quien la recibe.</span><span class="sxs-lookup"><span data-stu-id="a47c2-143">When transmitting a **Principal** object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the **Principal** object associated with the caller's context to the callee's context.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a47c2-144">Consulte también</span><span class="sxs-lookup"><span data-stu-id="a47c2-144">See also</span></span>

- [<span data-ttu-id="a47c2-145">Procedimiento para crear un objeto WindowsPrincipal</span><span class="sxs-lookup"><span data-stu-id="a47c2-145">How to: Create a WindowsPrincipal Object</span></span>](how-to-create-a-windowsprincipal-object.md)
- [<span data-ttu-id="a47c2-146">Procedimiento para crear objetos GenericPrincipal y GenericIdentity</span><span class="sxs-lookup"><span data-stu-id="a47c2-146">How to: Create GenericPrincipal and GenericIdentity Objects</span></span>](how-to-create-genericprincipal-and-genericidentity-objects.md)
- [<span data-ttu-id="a47c2-147">Reemplazar un objeto Principal</span><span class="sxs-lookup"><span data-stu-id="a47c2-147">Replacing a Principal Object</span></span>](replacing-a-principal-object.md)
- [<span data-ttu-id="a47c2-148">Suplantar y revertir</span><span class="sxs-lookup"><span data-stu-id="a47c2-148">Impersonating and Reverting</span></span>](impersonating-and-reverting.md)
- [<span data-ttu-id="a47c2-149">Seguridad basada en roles</span><span class="sxs-lookup"><span data-stu-id="a47c2-149">Role-Based Security</span></span>](role-based-security.md)
- [<span data-ttu-id="a47c2-150">Conceptos clave de seguridad</span><span class="sxs-lookup"><span data-stu-id="a47c2-150">Key Security Concepts</span></span>](key-security-concepts.md)
- [<span data-ttu-id="a47c2-151">Seguridad de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="a47c2-151">ASP.NET Core Security</span></span>](/aspnet/core/security/)

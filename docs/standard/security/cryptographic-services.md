---
title: servicios criptográficos
description: Información general de los métodos de cifrado y prácticas compatibles con .NET.
ms.date: 07/14/2020
ms.technology: dotnet-standard
helpviewer_keywords:
- cryptography [.NET]
- pattern of derived class inheritance
- digital signatures
- asymmetric cryptographic algorithms
- digital signatures, public-key systems
- public keys
- decryption [.NET]
- private keys
- MAC algorithms
- cryptographic algorithms
- private keys, overview
- encryption [.NET]
- security [.NET], encryption
- cryptographic services
- symmetric cryptographic algorithms
- hash
- message authentication codes
- derived class inheritance
- cryptography [.NET], about
- random number generation
ms.assetid: f96284bc-7b73-44b5-ac59-fac613ad09f8
ms.openlocfilehash: 463ccec5f60ff10331d501d39144a979d95eff95
ms.sourcegitcommit: 74d05613d6c57106f83f82ce8ee71176874ea3f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/03/2020
ms.locfileid: "93281732"
---
# <a name="cryptographic-services"></a><span data-ttu-id="4dbcd-103">servicios criptográficos</span><span class="sxs-lookup"><span data-stu-id="4dbcd-103">Cryptographic Services</span></span>

<span data-ttu-id="4dbcd-104">Las redes públicas como Internet no proporcionan un medio de comunicación segura entre entidades.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-104">Public networks such as the Internet do not provide a means of secure communication between entities.</span></span> <span data-ttu-id="4dbcd-105">La comunicación en esas redes es susceptible de que terceras personas, sin autorización, tengan acceso a ella o la modifiquen.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-105">Communication over such networks is susceptible to being read or even modified by unauthorized third parties.</span></span> <span data-ttu-id="4dbcd-106">La criptografía ayuda a proteger los datos para que no puedan ser vistos, proporciona mecanismos para la detección de datos modificados y facilita un medio de comunicación seguro en canales que, de otra forma, no serían seguros.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-106">Cryptography helps protect data from being viewed, provides ways to detect whether data has been modified, and helps provide a secure means of communication over otherwise nonsecure channels.</span></span> <span data-ttu-id="4dbcd-107">Por ejemplo, los datos pueden cifrarse con un algoritmo criptográfico y transmitirse en un estado cifrado a una tercera persona, que posteriormente los descifrará.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-107">For example, data can be encrypted by using a cryptographic algorithm, transmitted in an encrypted state, and later decrypted by the intended party.</span></span> <span data-ttu-id="4dbcd-108">Si un tercero intercepta los datos cifrados, le resultará difícil descifrarlos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-108">If a third party intercepts the encrypted data, it will be difficult to decipher.</span></span>

<span data-ttu-id="4dbcd-109">En .NET, las clases del <xref:System.Security.Cryptography> espacio de nombres administran muchos detalles de la criptografía.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-109">In .NET, the classes in the <xref:System.Security.Cryptography> namespace manage many details of cryptography for you.</span></span> <span data-ttu-id="4dbcd-110">Algunos son contenedores para implementaciones de sistema operativo, mientras que otros son simplemente implementaciones administradas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-110">Some are wrappers for operating system implementations, while others are purely managed implementations.</span></span> <span data-ttu-id="4dbcd-111">No necesita ser un experto en criptografía para utilizar estas clases.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-111">You do not need to be an expert in cryptography to use these classes.</span></span> <span data-ttu-id="4dbcd-112">Cuando crea una nueva instancia de una de las clases de algoritmos de cifrado, se generan automáticamente claves para facilitar el uso y las propiedades predeterminadas son lo más seguras posible.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-112">When you create a new instance of one of the encryption algorithm classes, keys are autogenerated for ease of use, and default properties are as safe and secure as possible.</span></span>

<span data-ttu-id="4dbcd-113">En esta información general se proporciona una sinopsis de los métodos y prácticas de cifrado compatibles con .NET, incluidos los manifiestos de ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-113">This overview provides a synopsis of the encryption methods and practices supported by .NET, including the ClickOnce manifests.</span></span>

## <a name="cryptographic-primitives"></a><span data-ttu-id="4dbcd-114">Primitivos criptográficos</span><span class="sxs-lookup"><span data-stu-id="4dbcd-114">Cryptographic Primitives</span></span>

<span data-ttu-id="4dbcd-115">En una situación típica donde se usa la criptografía, dos partes (Alicia y Roberto) se comunican a través de un canal que no es seguro.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-115">In a typical situation where cryptography is used, two parties (Alice and Bob) communicate over a nonsecure channel.</span></span> <span data-ttu-id="4dbcd-116">Ambos desean garantizar que su comunicación no la comprenda nadie que pueda estar escuchando.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-116">Alice and Bob want to ensure that their communication remains incomprehensible by anyone who might be listening.</span></span> <span data-ttu-id="4dbcd-117">Además, como Alicia y Roberto se encuentran en ubicaciones remotas, Alicia quiere asegurarse de que la información que recibe de Roberto no la modificó nadie durante la transmisión.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-117">Furthermore, because Alice and Bob are in remote locations, Alice must make sure that the information she receives from Bob has not been modified by anyone during transmission.</span></span> <span data-ttu-id="4dbcd-118">Por último, debe asegurarse también de que la información proviene realmente de Roberto y no de alguien que lo suplanta.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-118">In addition, she must make sure that the information really does originate from Bob and not from someone who is impersonating Bob.</span></span>

<span data-ttu-id="4dbcd-119">La criptografía se utiliza para lograr los objetivos siguientes:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-119">Cryptography is used to achieve the following goals:</span></span>

- <span data-ttu-id="4dbcd-120">Confidencialidad: para ayudar a proteger la identidad de un usuario o evitar que se lean sus datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-120">Confidentiality: To help protect a user's identity or data from being read.</span></span>

- <span data-ttu-id="4dbcd-121">Integridad de los datos: para ayudar a evitar su alteración.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-121">Data integrity: To help protect data from being changed.</span></span>

- <span data-ttu-id="4dbcd-122">Autenticación: para garantizar que los datos provienen de una parte concreta.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-122">Authentication: To ensure that data originates from a particular party.</span></span>

- <span data-ttu-id="4dbcd-123">Sin rechazo: para evitar que una determinada parte niegue que envió un mensaje.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-123">Non-repudiation: To prevent a particular party from denying that they sent a message.</span></span>

<span data-ttu-id="4dbcd-124">Para alcanzar estos objetivos, se puede usar una combinación de algoritmos y prácticas conocidas como primitivas criptográficas para crear un esquema criptográfico.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-124">To achieve these goals, you can use a combination of algorithms and practices known as cryptographic primitives to create a cryptographic scheme.</span></span> <span data-ttu-id="4dbcd-125">En la tabla siguiente se enumeran las primitivas criptográficas y su uso.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-125">The following table lists the cryptographic primitives and their uses.</span></span>

|<span data-ttu-id="4dbcd-126">Primitiva criptográfica</span><span class="sxs-lookup"><span data-stu-id="4dbcd-126">Cryptographic primitive</span></span>|<span data-ttu-id="4dbcd-127">Uso</span><span class="sxs-lookup"><span data-stu-id="4dbcd-127">Use</span></span>|
|-----------------------------|---------|
|<span data-ttu-id="4dbcd-128">Cifrado de clave secreta (criptografía simétrica)</span><span class="sxs-lookup"><span data-stu-id="4dbcd-128">Secret-key encryption (symmetric cryptography)</span></span>|<span data-ttu-id="4dbcd-129">Realiza la transformación de los datos para impedir que terceros los lean.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-129">Performs a transformation on data to keep it from being read by third parties.</span></span> <span data-ttu-id="4dbcd-130">Este tipo de cifrado utiliza una clave secreta compartida para cifrar y descifrar los datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-130">This type of encryption uses a single shared, secret key to encrypt and decrypt data.</span></span>|
|<span data-ttu-id="4dbcd-131">Cifrado de clave pública (criptografía asimétrica)</span><span class="sxs-lookup"><span data-stu-id="4dbcd-131">Public-key encryption (asymmetric cryptography)</span></span>|<span data-ttu-id="4dbcd-132">Realiza la transformación de los datos para impedir que terceros los lean.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-132">Performs a transformation on data to keep it from being read by third parties.</span></span> <span data-ttu-id="4dbcd-133">Este tipo de cifrado utiliza un par de claves pública y privada para cifrar y descifrar los datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-133">This type of encryption uses a public/private key pair to encrypt and decrypt data.</span></span>|
|<span data-ttu-id="4dbcd-134">Firmas criptográficas</span><span class="sxs-lookup"><span data-stu-id="4dbcd-134">Cryptographic signing</span></span>|<span data-ttu-id="4dbcd-135">Ayuda a comprobar que los datos se originan en una parte específica mediante la creación de una firma digital única para esa parte.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-135">Helps verify that data originates from a specific party by creating a digital signature that is unique to that party.</span></span> <span data-ttu-id="4dbcd-136">En este proceso también se usan funciones hash.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-136">This process also uses hash functions.</span></span>|
|<span data-ttu-id="4dbcd-137">Valores hash criptográficos</span><span class="sxs-lookup"><span data-stu-id="4dbcd-137">Cryptographic hashes</span></span>|<span data-ttu-id="4dbcd-138">Asigna datos de cualquier longitud a una secuencia de bytes de longitud fija.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-138">Maps data from any length to a fixed-length byte sequence.</span></span> <span data-ttu-id="4dbcd-139">Los valores hash son únicos estadísticamente; el valor hash de una secuencia de dos bytes distinta no será el mismo.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-139">Hashes are statistically unique; a different two-byte sequence will not hash to the same value.</span></span>|

## <a name="secret-key-encryption"></a><span data-ttu-id="4dbcd-140">Cifrado de clave secreta</span><span class="sxs-lookup"><span data-stu-id="4dbcd-140">Secret-Key Encryption</span></span>

<span data-ttu-id="4dbcd-141">Los algoritmos de cifrado de clave secreta utilizan una clave secreta única para cifrar y descifrar datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-141">Secret-key encryption algorithms use a single secret key to encrypt and decrypt data.</span></span> <span data-ttu-id="4dbcd-142">Debe asegurarse de que agentes no autorizados no obtienen acceso a la clave, ya que cualquier persona que tenga la clave podría utilizarla para descifrar los datos o cifrar sus propios datos y alegar que provienen de usted.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-142">You must secure the key from access by unauthorized agents, because any party that has the key can use it to decrypt your data or encrypt their own data, claiming it originated from you.</span></span>

<span data-ttu-id="4dbcd-143">El cifrado de clave secreta también se denomina cifrado simétrico puesto que se utiliza la misma clave para el cifrado y el descifrado.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-143">Secret-key encryption is also referred to as symmetric encryption because the same key is used for encryption and decryption.</span></span> <span data-ttu-id="4dbcd-144">Los algoritmos de cifrado de clave secreta son muy rápidos (comparados con los de clave pública) y resultan adecuados para realizar transformaciones criptográficas en grandes flujos de datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-144">Secret-key encryption algorithms are very fast (compared with public-key algorithms) and are well suited for performing cryptographic transformations on large streams of data.</span></span> <span data-ttu-id="4dbcd-145">Los algoritmos de cifrado asimétricos, como RSA, están limitados matemáticamente respecto al volumen de datos que pueden cifrar.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-145">Asymmetric encryption algorithms such as RSA are limited mathematically in how much data they can encrypt.</span></span> <span data-ttu-id="4dbcd-146">Los algoritmos de cifrado simétricos no suelen tener estos problemas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-146">Symmetric encryption algorithms do not generally have those problems.</span></span>

<span data-ttu-id="4dbcd-147">El tipo de algoritmo de clave secreta denominado cifrado de bloques se utiliza para cifrar un bloque de datos cada vez.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-147">A type of secret-key algorithm called a block cipher is used to encrypt one block of data at a time.</span></span> <span data-ttu-id="4dbcd-148">Los cifrados de bloques, como Estándar de cifrado de datos (DES), TripleDES y Estándar de cifrado avanzado (CA), transforman criptográficamente un bloque de entrada de *n* bytes en un bloque de salida de bytes cifrados.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-148">Block ciphers such as Data Encryption Standard (DES), TripleDES, and Advanced Encryption Standard (AES) cryptographically transform an input block of *n* bytes into an output block of encrypted bytes.</span></span> <span data-ttu-id="4dbcd-149">Si desea cifrar o descifrar una secuencia de bytes, debe hacerlo bloque a bloque.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-149">If you want to encrypt or decrypt a sequence of bytes, you have to do it block by block.</span></span> <span data-ttu-id="4dbcd-150">Dado que *n* es pequeño (8 bytes para DES y TripleDES y 16 bytes [valor predeterminado], 24 bytes o 32 bytes para AES), los valores mayores que *n* deben cifrarse bloque a bloque.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-150">Because *n* is small (8 bytes for DES and TripleDES; 16 bytes [the default], 24 bytes, or 32 bytes for AES), data values that are larger than *n* have to be encrypted one block at a time.</span></span> <span data-ttu-id="4dbcd-151">Los valores que son menores que *n* tienen que ampliarse hasta *n* para que se puedan procesar.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-151">Data values that are smaller than *n* have to be expanded to *n* in order to be processed.</span></span>

<span data-ttu-id="4dbcd-152">Una forma sencilla de cifrado de bloques es el modo Electronic Codebook (ECB).</span><span class="sxs-lookup"><span data-stu-id="4dbcd-152">One simple form of block cipher is called the electronic codebook (ECB) mode.</span></span> <span data-ttu-id="4dbcd-153">El modo ECB no se considera un modo seguro porque no utiliza un vector de inicialización para iniciar el primer bloque de texto simple.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-153">ECB mode is not considered secure, because it does not use an initialization vector to initialize the first plaintext block.</span></span> <span data-ttu-id="4dbcd-154">Para una clave secreta *k* determinada, un cifrado de bloques simple que no utiliza un vector de inicialización codificará el mismo bloque de entrada de texto simple en el mismo bloque de salida de texto cifrado.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-154">For a given secret key *k* , a simple block cipher that does not use an initialization vector will encrypt the same input block of plaintext into the same output block of ciphertext.</span></span> <span data-ttu-id="4dbcd-155">Por tanto, si hay bloques duplicados dentro la secuencia de texto simple de entrada, habrá bloques duplicados en la secuencia de texto cifrado de salida.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-155">Therefore, if you have duplicate blocks in your input plaintext stream, you will have duplicate blocks in your output ciphertext stream.</span></span> <span data-ttu-id="4dbcd-156">Estos bloques de salida duplicados podrían alertar a los usuarios sin autorización sobre la posibilidad de que se haya utilizado un cifrado débil en los algoritmos y los posibles modos de ataque.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-156">These duplicate output blocks alert unauthorized users to the weak encryption used the algorithms that might have been employed, and the possible modes of attack.</span></span> <span data-ttu-id="4dbcd-157">El modo de cifrado ECB es por tanto bastante vulnerable al análisis, y en última instancia, a la detección de claves.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-157">The ECB cipher mode is therefore quite vulnerable to analysis, and ultimately, key discovery.</span></span>

<span data-ttu-id="4dbcd-158">Las clases de cifrado de bloques que se proporcionan en la biblioteca de clases base utilizan un modo de encadenamiento predeterminado denominado encadenamiento de bloques de cifrado (CBC), aunque este valor puede cambiarse, si así se desea.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-158">The block cipher classes that are provided in the base class library use a default chaining mode called cipher-block chaining (CBC), although you can change this default if you want.</span></span>

<span data-ttu-id="4dbcd-159">El cifrado CBC subsana los problemas asociados con el cifrado ECB utilizando un vector de inicialización (IV) para cifrar el primer bloque de texto simple.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-159">CBC ciphers overcome the problems associated with ECB ciphers by using an initialization vector (IV) to encrypt the first block of plaintext.</span></span> <span data-ttu-id="4dbcd-160">Cada uno de los bloques de texto simple siguientes se somete a una operación OR exclusiva bit a bit (`XOR`) con el bloque de texto cifrado anterior antes de cifrarse.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-160">Each subsequent block of plaintext undergoes a bitwise exclusive OR (`XOR`) operation with the previous ciphertext block before it is encrypted.</span></span> <span data-ttu-id="4dbcd-161">Cada bloque de texto cifrado depende por tanto de todos los bloques anteriores.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-161">Each ciphertext block is therefore dependent on all previous blocks.</span></span> <span data-ttu-id="4dbcd-162">Cuando se utiliza este sistema, los encabezados de los mensajes comunes que un usuario no autorizado podría conocer no pueden utilizarse para aplicar técnicas de ingeniería inversa en una clave.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-162">When this system is used, common message headers that might be known to an unauthorized user cannot be used to reverse-engineer a key.</span></span>

<span data-ttu-id="4dbcd-163">Un modo de comprometer los datos cifrados con un cifrado CBC consiste en realizar una búsqueda exhaustiva de todas las claves posibles.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-163">One way to compromise data that is encrypted with a CBC cipher is to perform an exhaustive search of every possible key.</span></span> <span data-ttu-id="4dbcd-164">En función del tamaño de la clave utilizada para realizar el cifrado, este tipo de búsqueda llevará mucho tiempo aunque se utilicen los equipos más rápidos, y, por lo tanto, no es factible.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-164">Depending on the size of the key that is used to perform encryption, this kind of search is very time-consuming using even the fastest computers and is therefore infeasible.</span></span> <span data-ttu-id="4dbcd-165">Los tamaños de clave mayores son más difíciles de descifrar.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-165">Larger key sizes are more difficult to decipher.</span></span> <span data-ttu-id="4dbcd-166">Aunque el cifrado no garantiza totalmente que un adversario no recupere los datos cifrados, aumenta considerablemente la dificultad.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-166">Although encryption does not make it theoretically impossible for an adversary to retrieve the encrypted data, it does raise the cost of doing this.</span></span> <span data-ttu-id="4dbcd-167">Si se tardan tres meses en realizar una búsqueda exhaustiva para recuperar datos que solo son relevantes durante varios días, este método de búsqueda resulta poco práctico.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-167">If it takes three months to perform an exhaustive search to retrieve data that is meaningful only for a few days, the exhaustive search method is impractical.</span></span>

<span data-ttu-id="4dbcd-168">La desventaja del cifrado de clave secreta es que presupone que dos partes acuerdan una clave y un vector de inicialización, y que se comunican sus valores.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-168">The disadvantage of secret-key encryption is that it presumes two parties have agreed on a key and IV, and communicated their values.</span></span> <span data-ttu-id="4dbcd-169">El vector de inicialización no se considera secreto y se transmite como texto simple con el mensaje.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-169">The IV is not considered a secret and can be transmitted in plaintext with the message.</span></span> <span data-ttu-id="4dbcd-170">Sin embargo, la clave debe mantenerse en secreto a salvo de usuarios no autorizados.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-170">However, the key must be kept secret from unauthorized users.</span></span> <span data-ttu-id="4dbcd-171">Debido a estos problemas, el cifrado de clave secreta a menudo se utiliza junto con el cifrado de clave pública para comunicar en privado los valores de la clave y el vector de inicialización.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-171">Because of these problems, secret-key encryption is often used together with public-key encryption to privately communicate the values of the key and IV.</span></span>

<span data-ttu-id="4dbcd-172">Supongamos que Alicia y Roberto son dos personas que desean comunicarse a través de un canal que no es seguro. Ellos podrían utilizar el cifrado de clave secreta del modo siguiente: Alicia y Roberto están de acuerdo en utilizar un algoritmo determinado (AES, por ejemplo) con una clave y un vector de inicialización determinados.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-172">Assuming that Alice and Bob are two parties who want to communicate over a nonsecure channel, they might use secret-key encryption as follows: Alice and Bob agree to use one particular algorithm (AES, for example) with a particular key and IV.</span></span> <span data-ttu-id="4dbcd-173">Alice redacta un mensaje y crea una secuencia de red (quizás una canalización con nombre o correo electrónico de red) en la que se va a enviar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-173">Alice composes a message and creates a network stream (perhaps a named pipe or network email) on which to send the message.</span></span> <span data-ttu-id="4dbcd-174">A continuación, cifra el texto utilizando la clave y el vector de inicialización y envía el mensaje cifrado y el vector de inicialización a Roberto a través de intranet.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-174">Next, she encrypts the text using the key and IV, and sends the encrypted message and IV to Bob over the intranet.</span></span> <span data-ttu-id="4dbcd-175">Roberto recibe el texto cifrado y lo descifra utilizando el vector de inicialización y la clave acordada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-175">Bob receives the encrypted text and decrypts it by using the IV and previously agreed upon key.</span></span> <span data-ttu-id="4dbcd-176">Si se intercepta la transmisión, el interceptor no puede recuperar el mensaje original porque no conoce la clave.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-176">If the transmission is intercepted, the interceptor cannot recover the original message, because they do not know the key.</span></span> <span data-ttu-id="4dbcd-177">En este caso, solo debe mantenerse en secreto la clave.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-177">In this scenario, only the key must remain secret.</span></span> <span data-ttu-id="4dbcd-178">En un ejemplo real, Alicia o Roberto genera una clave secreta y utiliza el cifrado (asimétrico) de clave pública para transferir la clave (simétrica) secreta a la otra parte.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-178">In a real world scenario, either Alice or Bob generates a secret key and uses public-key (asymmetric) encryption to transfer the secret (symmetric) key to the other party.</span></span> <span data-ttu-id="4dbcd-179">Para obtener más información sobre el cifrado de clave pública, vea la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-179">For more information about public-key encryption, see the next section.</span></span>

<span data-ttu-id="4dbcd-180">.NET proporciona las siguientes clases que implementan algoritmos de cifrado de clave secreta:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-180">.NET provides the following classes that implement secret-key encryption algorithms:</span></span>

- <xref:System.Security.Cryptography.Aes>

- <span data-ttu-id="4dbcd-181"><xref:System.Security.Cryptography.HMACSHA256>, <xref:System.Security.Cryptography.HMACSHA384> y <xref:System.Security.Cryptography.HMACSHA512>.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-181"><xref:System.Security.Cryptography.HMACSHA256>, <xref:System.Security.Cryptography.HMACSHA384> and <xref:System.Security.Cryptography.HMACSHA512>.</span></span> <span data-ttu-id="4dbcd-182">(Técnicamente, son algoritmos de clave secreta, ya que representan códigos de autenticación de mensajes que se calculan mediante una función hash criptográfica combinada con una clave secreta.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-182">(These are technically secret-key algorithms because they represent message authentication codes that are calculated by using a cryptographic hash function combined with a secret key.</span></span> <span data-ttu-id="4dbcd-183">Vea [valores hash](#hash-values)más adelante en este artículo).</span><span class="sxs-lookup"><span data-stu-id="4dbcd-183">See [Hash Values](#hash-values), later in this article.)</span></span>

## <a name="public-key-encryption"></a><span data-ttu-id="4dbcd-184">Cifrado de clave pública</span><span class="sxs-lookup"><span data-stu-id="4dbcd-184">Public-Key Encryption</span></span>

<span data-ttu-id="4dbcd-185">El cifrado de clave pública utiliza una clave privada que debe mantenerse en secreto y a salvo de los usuarios no autorizados, así como una clave pública que puede comunicarse.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-185">Public-key encryption uses a private key that must be kept secret from unauthorized users and a public key that can be made public to anyone.</span></span> <span data-ttu-id="4dbcd-186">La clave pública y la clave privada están vinculadas matemáticamente; los datos cifrados con la clave pública solo pueden descifrarse con la clave privada y los datos firmados con la clave privada solo pueden comprobarse con la clave pública.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-186">The public key and the private key are mathematically linked; data that is encrypted with the public key can be decrypted only with the private key, and data that is signed with the private key can be verified only with the public key.</span></span> <span data-ttu-id="4dbcd-187">La clave pública está a disposición de cualquier persona y se utiliza para cifrar los datos que se envían a quien guarda la clave privada.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-187">The public key can be made available to anyone; it is used for encrypting data to be sent to the keeper of the private key.</span></span> <span data-ttu-id="4dbcd-188">Los algoritmos criptográficos de clave pública también se conocen como algoritmos asimétricos porque se necesita una clave para cifrar los datos y otra para descifrarlos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-188">Public-key cryptographic algorithms are also known as asymmetric algorithms because one key is required to encrypt data, and another key is required to decrypt data.</span></span> <span data-ttu-id="4dbcd-189">Una regla criptográfica básica prohíbe la reutilización de claves; además, las dos claves deben ser únicas en cada sesión de comunicación.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-189">A basic cryptographic rule prohibits key reuse, and both keys should be unique for each communication session.</span></span> <span data-ttu-id="4dbcd-190">Sin embargo, en la práctica, las claves asimétricas suelen durar bastante tiempo.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-190">However, in practice, asymmetric keys are generally long-lived.</span></span>

<span data-ttu-id="4dbcd-191">Dos personas (Alicia y Roberto) podrían utilizar el cifrado de clave pública del modo siguiente: en primer lugar, Alicia podría generar un par de claves pública y privada.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-191">Two parties (Alice and Bob) might use public-key encryption as follows: First, Alice generates a public/private key pair.</span></span> <span data-ttu-id="4dbcd-192">Si Roberto desea enviar a Alicia un mensaje cifrado, le pide la clave pública.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-192">If Bob wants to send Alice an encrypted message, he asks her for her public key.</span></span> <span data-ttu-id="4dbcd-193">Alicia envía a Roberto su clave pública a través de una red que no es segura y Roberto utiliza esta clave para cifrar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-193">Alice sends Bob her public key over a nonsecure network, and Bob uses this key to encrypt a message.</span></span> <span data-ttu-id="4dbcd-194">Roberto envía el mensaje cifrado a Alicia y ésta lo descifra utilizando su clave privada.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-194">Bob sends the encrypted message to Alice, and she decrypts it by using her private key.</span></span> <span data-ttu-id="4dbcd-195">Si Roberto recibiera la clave de Alicia a través de un canal que no es seguro, como una red pública, Roberto estaría expuesto a un ataque del tipo "Man in the middle".</span><span class="sxs-lookup"><span data-stu-id="4dbcd-195">If Bob received Alice's key over a nonsecure channel, such as a public network, Bob is open to a man-in-the-middle attack.</span></span> <span data-ttu-id="4dbcd-196">Por consiguiente, Roberto debe comprobar con Alicia que tiene una copia correcta de su clave pública.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-196">Therefore, Bob must verify with Alice that he has a correct copy of her public key.</span></span>

<span data-ttu-id="4dbcd-197">Durante la transmisión de la clave pública de Alicia, un agente no autorizado podría interceptarla.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-197">During the transmission of Alice's public key, an unauthorized agent might intercept the key.</span></span> <span data-ttu-id="4dbcd-198">Además, el mismo agente podría interceptar el mensaje cifrado de Roberto.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-198">Furthermore, the same agent might intercept the encrypted message from Bob.</span></span> <span data-ttu-id="4dbcd-199">No obstante, el agente no puede descifrar el mensaje con la clave pública.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-199">However, the agent cannot decrypt the message with the public key.</span></span> <span data-ttu-id="4dbcd-200">El mensaje solo puede descifrarse con la clave privada de Alicia, que no se ha transmitido.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-200">The message can be decrypted only with Alice's private key, which has not been transmitted.</span></span> <span data-ttu-id="4dbcd-201">Alicia no utiliza su clave privada para cifrar un mensaje de respuesta a Roberto, porque cualquiera que tenga la clave pública podría descifrarlo.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-201">Alice does not use her private key to encrypt a reply message to Bob, because anyone with the public key could decrypt the message.</span></span> <span data-ttu-id="4dbcd-202">Si Alicia desea enviar un mensaje a Roberto, le pide su clave pública y cifra su mensaje con ella.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-202">If Alice wants to send a message back to Bob, she asks Bob for his public key and encrypts her message using that public key.</span></span> <span data-ttu-id="4dbcd-203">Seguidamente, Roberto descifra el mensaje utilizando su clave privada asociada.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-203">Bob then decrypts the message using his associated private key.</span></span>

<span data-ttu-id="4dbcd-204">En este escenario, Alicia y Roberto utilizan un cifrado de clave pública (asimétrica) para transferir una clave secreta (simétrica) y utilizan el cifrado de clave secreta para el resto de la sesión.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-204">In this scenario, Alice and Bob use public-key (asymmetric) encryption to transfer a secret (symmetric) key and use secret-key encryption for the remainder of their session.</span></span>

<span data-ttu-id="4dbcd-205">En la lista siguiente se incluyen comparaciones entre algoritmos criptográficos de clave pública y de clave secreta:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-205">The following list offers comparisons between public-key and secret-key cryptographic algorithms:</span></span>

- <span data-ttu-id="4dbcd-206">Los algoritmos criptográficos de clave pública utilizan un tamaño de búfer fijo mientras que los de clave secreta usan un búfer de longitud variable.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-206">Public-key cryptographic algorithms use a fixed buffer size, whereas secret-key cryptographic algorithms use a variable-length buffer.</span></span>

- <span data-ttu-id="4dbcd-207">Los algoritmos de clave pública no se pueden usar para encadenar datos juntos en secuencias como sucede con los de clave secreta, ya que solo pueden cifrarse pequeñas cantidades de datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-207">Public-key algorithms cannot be used to chain data together into streams the way secret-key algorithms can, because only small amounts of data can be encrypted.</span></span> <span data-ttu-id="4dbcd-208">Por lo tanto, las operaciones asimétricas no utilizan el mismo modelo de streaming que las simétricas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-208">Therefore, asymmetric operations do not use the same streaming model as symmetric operations.</span></span>

- <span data-ttu-id="4dbcd-209">El cifrado de claves públicas tiene un espacio de claves (el intervalo de valores posibles de la clave) mucho mayor que el cifrado de claves secretas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-209">Public-key encryption has a much larger keyspace (range of possible values for the key) than secret-key encryption.</span></span> <span data-ttu-id="4dbcd-210">Por tanto, el cifrado de claves públicas es menos vulnerable a los ataques exhaustivos que prueban cada clave posible.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-210">Therefore, public-key encryption is less susceptible to exhaustive attacks that try every possible key.</span></span>

- <span data-ttu-id="4dbcd-211">Al no tener que estar protegidas, las claves públicas resultan fáciles de distribuir, siempre que exista algún mecanismo para comprobar la identidad del remitente.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-211">Public keys are easy to distribute because they do not have to be secured, provided that some way exists to verify the identity of the sender.</span></span>

- <span data-ttu-id="4dbcd-212">Algunos algoritmos de clave pública (como RSA y DSA, aunque no Diffie-Hellman) se pueden utilizar para crear firmas digitales con el fin de comprobar la identidad del remitente de los datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-212">Some public-key algorithms (such as RSA and DSA, but not Diffie-Hellman) can be used to create digital signatures to verify the identity of the sender of data.</span></span>

- <span data-ttu-id="4dbcd-213">Los algoritmos de clave pública son muy lentos comparados con los de clave secreta y no están diseñados para cifrar grandes cantidades de datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-213">Public-key algorithms are very slow compared with secret-key algorithms, and are not designed to encrypt large amounts of data.</span></span> <span data-ttu-id="4dbcd-214">Son útiles solo para transferir cantidades muy pequeñas de información.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-214">Public-key algorithms are useful only for transferring very small amounts of data.</span></span> <span data-ttu-id="4dbcd-215">Normalmente, el cifrado de clave pública se utiliza para cifrar la clave y el vector de inicialización que serán utilizados por un algoritmo de clave secreta.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-215">Typically, public-key encryption is used to encrypt a key and IV to be used by a secret-key algorithm.</span></span> <span data-ttu-id="4dbcd-216">Después de transferir la clave y el vector de inicialización, el cifrado de clave secreta se utiliza para el resto de la sesión.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-216">After the key and IV are transferred, secret-key encryption is used for the remainder of the session.</span></span>

<span data-ttu-id="4dbcd-217">.NET proporciona las siguientes clases que implementan algoritmos de clave pública:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-217">.NET provides the following classes that implement public-key algorithms:</span></span>

- <xref:System.Security.Cryptography.RSA>

- <xref:System.Security.Cryptography.ECDsa>

- <xref:System.Security.Cryptography.ECDiffieHellman>

- <xref:System.Security.Cryptography.DSA>

<span data-ttu-id="4dbcd-218">RSA permite el cifrado y la firma, pero DSA solo se puede usar para la firma.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-218">RSA allows both encryption and signing, but DSA can be used only for signing.</span></span> <span data-ttu-id="4dbcd-219">DSA no es tan seguro como RSA y se recomienda RSA.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-219">DSA is not as secure as RSA, and we recommend RSA.</span></span> <span data-ttu-id="4dbcd-220">Diffie-Hellman solo se puede usar para la generación de claves.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-220">Diffie-Hellman can be used only for key generation.</span></span> <span data-ttu-id="4dbcd-221">En general, los algoritmos de clave pública tienen una aplicación más limitada que los algoritmos de clave privada.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-221">In general, public-key algorithms are more limited in their uses than private-key algorithms.</span></span>

## <a name="digital-signatures"></a><span data-ttu-id="4dbcd-222">Firmas digitales</span><span class="sxs-lookup"><span data-stu-id="4dbcd-222">Digital Signatures</span></span>

<span data-ttu-id="4dbcd-223">Los algoritmos de clave pública también se pueden usar para formar firmas digitales.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-223">Public-key algorithms can also be used to form digital signatures.</span></span> <span data-ttu-id="4dbcd-224">Las firmas digitales autentican la identidad de un remitente (si se fía de la clave pública de éste) y ayudan a proteger la integridad de los datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-224">Digital signatures authenticate the identity of a sender (if you trust the sender's public key) and help protect the integrity of data.</span></span> <span data-ttu-id="4dbcd-225">Con una clave pública generada por Alicia, el remitente de los datos de Alicia puede comprobar que ésta los envió si compara la firma digital de los datos de Alicia y la clave pública de ésta.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-225">Using a public key generated by Alice, the recipient of Alice's data can verify that Alice sent it by comparing the digital signature to Alice's data and Alice's public key.</span></span>

<span data-ttu-id="4dbcd-226">Para utilizar criptografía de clave pública con el objeto de firmar digitalmente un mensaje, Alicia aplica primero un algoritmo hash al mensaje para crear una síntesis del mismo.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-226">To use public-key cryptography to digitally sign a message, Alice first applies a hash algorithm to the message to create a message digest.</span></span> <span data-ttu-id="4dbcd-227">La síntesis del mensaje es una representación compacta y única de los datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-227">The message digest is a compact and unique representation of data.</span></span> <span data-ttu-id="4dbcd-228">Seguidamente, Alicia cifra la síntesis del mensaje con su clave privada para crear su firma personal.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-228">Alice then encrypts the message digest with her private key to create her personal signature.</span></span> <span data-ttu-id="4dbcd-229">Después de recibir el mensaje y la firma, Roberto descifra esta última utilizando la clave pública de Alicia para recuperar la síntesis del mensaje y envía éste de forma aleatoria mediante el mismo algoritmo hash que utilizó Alicia.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-229">Upon receiving the message and signature, Bob decrypts the signature using Alice's public key to recover the message digest and hashes the message using the same hash algorithm that Alice used.</span></span> <span data-ttu-id="4dbcd-230">Si la síntesis del mensaje que calcula Roberto coincide exactamente con la que ha recibido de Alicia, Roberto puede estar seguro de que el mensaje provino del poseedor de la clave privada y de que no se han modificado los datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-230">If the message digest that Bob computes exactly matches the message digest received from Alice, Bob is assured that the message came from the possessor of the private key and that the data has not been modified.</span></span> <span data-ttu-id="4dbcd-231">Si Roberto confía en que Alicia es la propietaria de la clave privada, sabe que el mensaje proviene de Alicia.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-231">If Bob trusts that Alice is the possessor of the private key, he knows that the message came from Alice.</span></span>

> [!NOTE]
> <span data-ttu-id="4dbcd-232">Cualquiera puede comprobar una firma, ya que la clave pública del remitente es de dominio público y normalmente se incluye en el formato de firma digital.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-232">A signature can be verified by anyone because the sender's public key is common knowledge and is typically included in the digital signature format.</span></span> <span data-ttu-id="4dbcd-233">Este método no mantiene la confidencialidad del mensaje; para que sea secreto, también se debe cifrar.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-233">This method does not retain the secrecy of the message; for the message to be secret, it must also be encrypted.</span></span>

<span data-ttu-id="4dbcd-234">.NET proporciona las siguientes clases que implementan algoritmos de firma digital:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-234">.NET provides the following classes that implement digital signature algorithms:</span></span>

- <xref:System.Security.Cryptography.RSA>

- <xref:System.Security.Cryptography.ECDsa>

- <xref:System.Security.Cryptography.DSA>

## <a name="hash-values"></a><span data-ttu-id="4dbcd-235">Valores hash</span><span class="sxs-lookup"><span data-stu-id="4dbcd-235">Hash Values</span></span>

<span data-ttu-id="4dbcd-236">Los algoritmos hash asignan valores binarios de longitud arbitraria a valores binarios más pequeños de longitud fija, que se denominan valores hash.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-236">Hash algorithms map binary values of an arbitrary length to smaller binary values of a fixed length, known as hash values.</span></span> <span data-ttu-id="4dbcd-237">Un valor hash es una representación numérica de un segmento de datos.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-237">A hash value is a numerical representation of a piece of data.</span></span> <span data-ttu-id="4dbcd-238">Si aplica un algoritmo hash a un párrafo de texto simple y cambia solo una letra del párrafo, el valor hash subsiguiente producirá un valor distinto.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-238">If you hash a paragraph of plaintext and change even one letter of the paragraph, a subsequent hash will produce a different value.</span></span> <span data-ttu-id="4dbcd-239">Si el valor hash es criptográficamente seguro, su valor cambiará significativamente.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-239">If the hash is cryptographically strong, its value will change significantly.</span></span> <span data-ttu-id="4dbcd-240">Por ejemplo, si se cambia únicamente un solo bit de un mensaje, una función hash segura puede generar un resultado que difiera en un 50 por ciento.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-240">For example, if a single bit of a message is changed, a strong hash function may produce an output that differs by 50 percent.</span></span> <span data-ttu-id="4dbcd-241">Muchos valores de entrada pueden aplicar un algoritmo hash al mismo valor de salida.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-241">Many input values may hash to the same output value.</span></span> <span data-ttu-id="4dbcd-242">Sin embargo, técnicamente es poco factible encontrar dos entradas distintas cuyo valor hash sea el mismo.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-242">However, it is computationally infeasible to find two distinct inputs that hash to the same value.</span></span>

<span data-ttu-id="4dbcd-243">Dos partes (Alicia y Roberto) podrían utilizar una función hash para asegurar la integridad de los mensajes.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-243">Two parties (Alice and Bob) could use a hash function to ensure message integrity.</span></span> <span data-ttu-id="4dbcd-244">Podrían seleccionar un algoritmo hash para firmar sus mensajes.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-244">They would select a hash algorithm to sign their messages.</span></span> <span data-ttu-id="4dbcd-245">Alicia escribiría un mensaje y, a continuación, crearía un valor hash de ese mensaje utilizando el algoritmo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-245">Alice would write a message, and then create a hash of that message by using the selected algorithm.</span></span> <span data-ttu-id="4dbcd-246">Después seguiría uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-246">They would then follow one of the following methods:</span></span>

- <span data-ttu-id="4dbcd-247">Alicia enviaría a Roberto el mensaje de texto simple y el mensaje al que aplicó el algoritmo hash (firma digital).</span><span class="sxs-lookup"><span data-stu-id="4dbcd-247">Alice sends the plaintext message and the hashed message (digital signature) to Bob.</span></span> <span data-ttu-id="4dbcd-248">Roberto recibiría el mensaje y le aplicaría el algoritmo hash. A continuación, compararía su valor hash con el valor hash que recibió de Alicia.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-248">Bob receives and hashes the message and compares his hash value to the hash value that he received from Alice.</span></span> <span data-ttu-id="4dbcd-249">Si los dos valores hash son idénticos, el mensaje no se ha modificado.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-249">If the hash values are identical, the message was not altered.</span></span> <span data-ttu-id="4dbcd-250">Si los valores no son idénticos, el mensaje se modificó después de que Alicia lo escribiera.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-250">If the values are not identical, the message was altered after Alice wrote it.</span></span>

  <span data-ttu-id="4dbcd-251">Desgraciadamente, este método no determina la autenticidad del remitente.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-251">Unfortunately, this method does not establish the authenticity of the sender.</span></span> <span data-ttu-id="4dbcd-252">Cualquiera puede suplantar a Alicia y enviar un mensaje a Roberto.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-252">Anyone can impersonate Alice and send a message to Bob.</span></span> <span data-ttu-id="4dbcd-253">Pueden utilizar el mismo algoritmo hash para firmar su mensaje, y todo lo que Roberto podría determinar es que el mensaje coincide con su firma.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-253">They can use the same hash algorithm to sign their message, and all Bob can determine is that the message matches its signature.</span></span> <span data-ttu-id="4dbcd-254">Esta es una forma de ataque de tipo "Man in the middle".</span><span class="sxs-lookup"><span data-stu-id="4dbcd-254">This is one form of a man-in-the-middle attack.</span></span> <span data-ttu-id="4dbcd-255">Para obtener más información, vea [ejemplo de comunicación segura de Cryptography Next Generation (CNG)](/previous-versions/cc488018(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="4dbcd-255">For more information, see [Cryptography Next Generation (CNG) Secure Communication Example](/previous-versions/cc488018(v=vs.100)).</span></span>

- <span data-ttu-id="4dbcd-256">Alicia envía el mensaje de texto simple a Roberto a través de un canal público que no es seguro.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-256">Alice sends the plaintext message to Bob over a nonsecure public channel.</span></span> <span data-ttu-id="4dbcd-257">Envía a Roberto el mensaje al que aplicó el algoritmo hash a través de un canal privado seguro.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-257">She sends the hashed message to Bob over a secure private channel.</span></span> <span data-ttu-id="4dbcd-258">Roberto recibe el mensaje de texto simple, le aplica un algoritmo hash y compara el valor hash con el valor hash que se intercambió de forma privada.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-258">Bob receives the plaintext message, hashes it, and compares the hash to the privately exchanged hash.</span></span> <span data-ttu-id="4dbcd-259">Si los valores hash coinciden, Roberto sabe dos cosas:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-259">If the hashes match, Bob knows two things:</span></span>

  - <span data-ttu-id="4dbcd-260">que el mensaje no se alteró.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-260">The message was not altered.</span></span>

  - <span data-ttu-id="4dbcd-261">que el remitente del mensaje (Alicia) es auténtico.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-261">The sender of the message (Alice) is authentic.</span></span>

  <span data-ttu-id="4dbcd-262">Para que este sistema funcione, Alicia debe ocultar el valor hash original a todos excepto a Roberto.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-262">For this system to work, Alice must hide her original hash value from all parties except Bob.</span></span>

- <span data-ttu-id="4dbcd-263">Alicia envía el mensaje de texto simple a Roberto a través de un canal público que no es seguro y publica el mensaje al que aplicó el algoritmo hash en su sitio web para que esté visible públicamente.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-263">Alice sends the plaintext message to Bob over a nonsecure public channel and places the hashed message on her publicly viewable Web site.</span></span>

  <span data-ttu-id="4dbcd-264">Este método evita que se manipule el mensaje, ya que impide que nadie modifique el valor hash.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-264">This method prevents message tampering by preventing anyone from modifying the hash value.</span></span> <span data-ttu-id="4dbcd-265">Aunque cualquier persona puede leer el mensaje y su valor hash, este valor hash únicamente lo puede modificar Alicia.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-265">Although the message and its hash can be read by anyone, the hash value can be changed only by Alice.</span></span> <span data-ttu-id="4dbcd-266">Un atacante que desee suplantar a Alicia necesitaría tener acceso al sitio web de Alicia.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-266">An attacker who wants to impersonate Alice would require access to Alice's Web site.</span></span>

<span data-ttu-id="4dbcd-267">Ninguno de los métodos anteriores evitará que alguien lea los mensajes de Alicia, ya que se transmiten en texto simple.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-267">None of the previous methods will prevent someone from reading Alice's messages, because they are transmitted in plaintext.</span></span> <span data-ttu-id="4dbcd-268">Para conseguir una seguridad total, normalmente se necesitarán firmas digitales (firma del mensaje) y mecanismos de cifrado.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-268">Full security typically requires digital signatures (message signing) and encryption.</span></span>

<span data-ttu-id="4dbcd-269">.NET proporciona las siguientes clases que implementan algoritmos hash:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-269">.NET provides the following classes that implement hashing algorithms:</span></span>

- <span data-ttu-id="4dbcd-270"><xref:System.Security.Cryptography.SHA256>.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-270"><xref:System.Security.Cryptography.SHA256>.</span></span>

- <span data-ttu-id="4dbcd-271"><xref:System.Security.Cryptography.SHA384>.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-271"><xref:System.Security.Cryptography.SHA384>.</span></span>

- <span data-ttu-id="4dbcd-272"><xref:System.Security.Cryptography.SHA512>.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-272"><xref:System.Security.Cryptography.SHA512>.</span></span>

<span data-ttu-id="4dbcd-273">.NET también proporciona <xref:System.Security.Cryptography.MD5> y <xref:System.Security.Cryptography.SHA1> .</span><span class="sxs-lookup"><span data-stu-id="4dbcd-273">.NET also provides <xref:System.Security.Cryptography.MD5> and <xref:System.Security.Cryptography.SHA1>.</span></span> <span data-ttu-id="4dbcd-274">Pero los algoritmos MD5 y SHA-1 se han descubierto como inseguros, y ahora se recomienda usar SHA-2.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-274">But the MD5 and SHA-1 algorithms have been found to be insecure, and SHA-2 is now recommended instead.</span></span> <span data-ttu-id="4dbcd-275">SHA-2 incluye SHA256, SHA384 y SHA512.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-275">SHA-2 includes SHA256, SHA384, and SHA512.</span></span>

## <a name="random-number-generation"></a><span data-ttu-id="4dbcd-276">generación de números aleatorios</span><span class="sxs-lookup"><span data-stu-id="4dbcd-276">Random Number Generation</span></span>

<span data-ttu-id="4dbcd-277">La generación de números aleatorios es propia de muchas operaciones criptográficas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-277">Random number generation is integral to many cryptographic operations.</span></span> <span data-ttu-id="4dbcd-278">Por ejemplo, las claves criptográficas deben ser lo más aleatorias posible para que no se puedan reproducir.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-278">For example, cryptographic keys need to be as random as possible so that it is infeasible to reproduce them.</span></span> <span data-ttu-id="4dbcd-279">Los generadores de números aleatorios criptográficos deben generar resultados que, mediante cálculos, no se pueden predecir con una probabilidad mayor del cincuenta por ciento.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-279">Cryptographic random number generators must generate output that is computationally infeasible to predict with a probability that is better than one half.</span></span> <span data-ttu-id="4dbcd-280">Por tanto, cualquier método para predecir el siguiente bit del resultado no debe ser más eficaz que el cálculo aleatorio.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-280">Therefore, any method of predicting the next output bit must not perform better than random guessing.</span></span> <span data-ttu-id="4dbcd-281">Las clases de .NET usan generadores de números aleatorios para generar claves criptográficas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-281">The classes in .NET use random number generators to generate cryptographic keys.</span></span>

<span data-ttu-id="4dbcd-282">La clase <xref:System.Security.Cryptography.RandomNumberGenerator> es una implementación de un algoritmo generador de números aleatorios.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-282">The <xref:System.Security.Cryptography.RandomNumberGenerator> class is an implementation of a random number generator algorithm.</span></span>

## <a name="clickonce-manifests"></a><span data-ttu-id="4dbcd-283">Manifiestos de ClickOnce</span><span class="sxs-lookup"><span data-stu-id="4dbcd-283">ClickOnce Manifests</span></span>

<span data-ttu-id="4dbcd-284">Las siguientes clases de criptografía permiten obtener y comprobar información sobre las firmas de manifiesto para las aplicaciones que se implementan mediante la [tecnología ClickOnce](/visualstudio/deployment/clickonce-security-and-deployment):</span><span class="sxs-lookup"><span data-stu-id="4dbcd-284">The following cryptography classes let you obtain and verify information about manifest signatures for applications that are deployed using [ClickOnce technology](/visualstudio/deployment/clickonce-security-and-deployment):</span></span>

- <span data-ttu-id="4dbcd-285">La clase <xref:System.Security.Cryptography.ManifestSignatureInformation> obtiene información sobre una firma de manifiesto cuando se utiliza la sobrecarga de su método <xref:System.Security.Cryptography.ManifestSignatureInformation.VerifySignature%2A> .</span><span class="sxs-lookup"><span data-stu-id="4dbcd-285">The <xref:System.Security.Cryptography.ManifestSignatureInformation> class obtains information about a manifest signature when you use its <xref:System.Security.Cryptography.ManifestSignatureInformation.VerifySignature%2A> method overloads.</span></span>

- <span data-ttu-id="4dbcd-286">Puede utilizar la enumeración <xref:System.Security.ManifestKinds> para especificar los manifiestos que se van a comprobar.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-286">You can use the <xref:System.Security.ManifestKinds> enumeration to specify which manifests to verify.</span></span> <span data-ttu-id="4dbcd-287">El resultado de la comprobación es uno de los valores de la enumeración <xref:System.Security.Cryptography.SignatureVerificationResult> .</span><span class="sxs-lookup"><span data-stu-id="4dbcd-287">The result of the verification is one of the <xref:System.Security.Cryptography.SignatureVerificationResult> enumeration values.</span></span>

- <span data-ttu-id="4dbcd-288">La clase <xref:System.Security.Cryptography.ManifestSignatureInformationCollection> proporciona una colección de objetos <xref:System.Security.Cryptography.ManifestSignatureInformation> de solo lectura de las firmas comprobadas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-288">The <xref:System.Security.Cryptography.ManifestSignatureInformationCollection> class provides a read-only collection of <xref:System.Security.Cryptography.ManifestSignatureInformation> objects of the verified signatures.</span></span>

<span data-ttu-id="4dbcd-289">Además, las clases siguientes proporcionan información de firma específica:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-289">In addition, the following classes provide specific signature information:</span></span>

- <span data-ttu-id="4dbcd-290"><xref:System.Security.Cryptography.StrongNameSignatureInformation> contiene información sobre la firma de nombre seguro de un manifiesto.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-290"><xref:System.Security.Cryptography.StrongNameSignatureInformation> holds the strong name signature information for a manifest.</span></span>

- <span data-ttu-id="4dbcd-291"><xref:System.Security.Cryptography.X509Certificates.AuthenticodeSignatureInformation> representa la información sobre la firma Authenticode de un manifiesto.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-291"><xref:System.Security.Cryptography.X509Certificates.AuthenticodeSignatureInformation> represents the Authenticode signature information for a manifest.</span></span>

- <span data-ttu-id="4dbcd-292"><xref:System.Security.Cryptography.X509Certificates.TimestampInformation> contiene información sobre la marca de tiempo de una firma Authenticode.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-292"><xref:System.Security.Cryptography.X509Certificates.TimestampInformation> contains information about the time stamp on an Authenticode signature.</span></span>

- <span data-ttu-id="4dbcd-293"><xref:System.Security.Cryptography.X509Certificates.TrustStatus> proporciona un mecanismo sencillo para comprobar si se confía en una firma Authenticode.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-293"><xref:System.Security.Cryptography.X509Certificates.TrustStatus> provides a simple way to check whether an Authenticode signature is trusted.</span></span>

## <a name="cryptography-next-generation-cng-classes"></a><span data-ttu-id="4dbcd-294">Clases de criptografía de próxima generación (CNG)</span><span class="sxs-lookup"><span data-stu-id="4dbcd-294">Cryptography Next Generation (CNG) Classes</span></span>

<span data-ttu-id="4dbcd-295">Las clases de Criptografía de próxima generación (CNG) proporcionan un contenedor administrado en torno a funciones CNG nativas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-295">The Cryptography Next Generation (CNG) classes provide a managed wrapper around the native CNG functions.</span></span> <span data-ttu-id="4dbcd-296">(CNG es el sustituto de CryptoAPI). Estas clases tienen "CNG" como parte de sus nombres.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-296">(CNG is the replacement for CryptoAPI.) These classes have "Cng" as part of their names.</span></span> <span data-ttu-id="4dbcd-297">La clase contenedora de claves <xref:System.Security.Cryptography.CngKey> es fundamental en estas clases contenedoras CNG, pues abstrae el almacenamiento y el uso de claves CNG.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-297">Central to the CNG wrapper classes is the <xref:System.Security.Cryptography.CngKey> key container class, which abstracts the storage and use of CNG keys.</span></span> <span data-ttu-id="4dbcd-298">Esta clase permite almacenar de forma segura un par de claves o una clave pública y hacer referencia a ella utilizando un nombre de cadena simple.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-298">This class lets you store a key pair or a public key securely and refer to it by using a simple string name.</span></span> <span data-ttu-id="4dbcd-299">La clase de firma <xref:System.Security.Cryptography.ECDsaCng> y la clase de cifrado <xref:System.Security.Cryptography.ECDiffieHellmanCng> basadas en curvas elípticas pueden utilizar los objetos <xref:System.Security.Cryptography.CngKey> .</span><span class="sxs-lookup"><span data-stu-id="4dbcd-299">The elliptic curve-based <xref:System.Security.Cryptography.ECDsaCng> signature class and the <xref:System.Security.Cryptography.ECDiffieHellmanCng> encryption class can use <xref:System.Security.Cryptography.CngKey> objects.</span></span>

<span data-ttu-id="4dbcd-300">La clase <xref:System.Security.Cryptography.CngKey> se utiliza en otras numerosas operaciones, entre las que se incluyen la apertura, creación, eliminación y exportación de claves.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-300">The <xref:System.Security.Cryptography.CngKey> class is used for a variety of additional operations, including opening, creating, deleting, and exporting keys.</span></span> <span data-ttu-id="4dbcd-301">También proporciona acceso al identificador de clave subyacente que se va a utilizar en las llamadas directas a las funciones nativas.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-301">It also provides access to the underlying key handle to use when calling native functions directly.</span></span>

<span data-ttu-id="4dbcd-302">.NET también incluye una serie de clases CNG compatibles, como las siguientes:</span><span class="sxs-lookup"><span data-stu-id="4dbcd-302">.NET also includes a variety of supporting CNG classes, such as the following:</span></span>

- <span data-ttu-id="4dbcd-303"><xref:System.Security.Cryptography.CngProvider> mantiene un proveedor de almacenamiento de claves.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-303"><xref:System.Security.Cryptography.CngProvider> maintains a key storage provider.</span></span>

- <span data-ttu-id="4dbcd-304"><xref:System.Security.Cryptography.CngAlgorithm> mantiene un algoritmo CNG.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-304"><xref:System.Security.Cryptography.CngAlgorithm> maintains a CNG algorithm.</span></span>

- <span data-ttu-id="4dbcd-305"><xref:System.Security.Cryptography.CngProperty> mantiene las propiedades clave que se utilizan con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-305"><xref:System.Security.Cryptography.CngProperty> maintains frequently used key properties.</span></span>

## <a name="see-also"></a><span data-ttu-id="4dbcd-306">Consulte también</span><span class="sxs-lookup"><span data-stu-id="4dbcd-306">See also</span></span>

- <span data-ttu-id="4dbcd-307">[Modelo de criptografía](cryptography-model.md) : describe cómo se implementa la criptografía en la biblioteca de clases base.</span><span class="sxs-lookup"><span data-stu-id="4dbcd-307">[Cryptography Model](cryptography-model.md) - Describes how cryptography is implemented in the base class library.</span></span>
- [<span data-ttu-id="4dbcd-308">Criptografía multiplataforma</span><span class="sxs-lookup"><span data-stu-id="4dbcd-308">Cross-Platform Cryptography</span></span>](cross-platform-cryptography.md)
- [<span data-ttu-id="4dbcd-309">Vulnerabilidades de temporalización con descifrado simétrico en modo CBC al usar el relleno</span><span class="sxs-lookup"><span data-stu-id="4dbcd-309">Timing vulnerabilities with CBC-mode symmetric decryption using padding</span></span>](vulnerabilities-cbc-mode.md)
- [<span data-ttu-id="4dbcd-310">ASP.NET Core protección de datos</span><span class="sxs-lookup"><span data-stu-id="4dbcd-310">ASP.NET Core Data Protection</span></span>](/aspnet/core/security/data-protection/introduction)

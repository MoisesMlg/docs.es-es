---
title: Consideraciones de seguridad y de interacción remota
description: Obtenga información sobre las consideraciones de seguridad relativas a la comunicación remota, que le permite configurar la llamada transparente entre dominios de aplicación, procesos o equipos.
ms.date: 03/30/2017
helpviewer_keywords:
- code security, remoting
- remoting, security
- security [.NET Framework], remoting
- secure coding, remoting
ms.assetid: 125d2ab8-55a4-4e5f-af36-a7d401a37ab0
ms.openlocfilehash: 883c20483c4d315a45e1f4dab959d42cbb6e3c4b
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96288208"
---
# <a name="security-and-remoting-considerations"></a><span data-ttu-id="5a7f2-103">Consideraciones de seguridad y de interacción remota</span><span class="sxs-lookup"><span data-stu-id="5a7f2-103">Security and Remoting Considerations</span></span>

[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]

<span data-ttu-id="5a7f2-104">La comunicación remota permite configurar llamadas transparentes entre dominios de aplicación, procesos o equipos.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-104">Remoting allows you to set up transparent calling between application domains, processes, or computers.</span></span> <span data-ttu-id="5a7f2-105">Sin embargo, el recorrido de la pila de seguridad de acceso del código no puede cruzar los límites de los procesos o equipos (se aplica entre dominios de aplicación del mismo proceso).</span><span class="sxs-lookup"><span data-stu-id="5a7f2-105">However, the code access security stack walk cannot cross process or machine boundaries (it does apply between application domains of the same process).</span></span>  
  
 <span data-ttu-id="5a7f2-106">Las clases que se pueden usar de forma remota (derivadas de una clase <xref:System.MarshalByRefObject>) deben asumir la responsabilidad de la seguridad.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-106">Any class that is remotable (derived from a <xref:System.MarshalByRefObject> class) needs to take responsibility for security.</span></span> <span data-ttu-id="5a7f2-107">El código debe usarse solo en entornos cerrados donde el código llamador puede ser de confianza de forma implícita, o las llamadas remotas deben diseñarse de modo que no sometan el código protegido a entradas externas que pudieran usarlo de forma malintencionada.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-107">Either the code should be used only in closed environments where the calling code can be implicitly trusted, or remoting calls should be designed so that they do not subject protected code to outside entry that could be used maliciously.</span></span>  
  
 <span data-ttu-id="5a7f2-108">Por lo general, nunca debe exponer métodos, propiedades o eventos que estén protegidos por las comprobaciones declarativas [LinkDemand](link-demands.md) y <xref:System.Security.Permissions.SecurityAction.InheritanceDemand> Security.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-108">Generally, you should never expose methods, properties, or events that are protected by declarative [LinkDemand](link-demands.md) and <xref:System.Security.Permissions.SecurityAction.InheritanceDemand> security checks.</span></span> <span data-ttu-id="5a7f2-109">Con la comunicación remota, estas comprobaciones no se fuerzan.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-109">With remoting, these checks are not enforced.</span></span> <span data-ttu-id="5a7f2-110">Otras comprobaciones de seguridad, como <xref:System.Security.Permissions.SecurityAction.Demand> , [Assert](using-the-assert-method.md), etc., funcionan entre dominios de aplicación dentro de un proceso, pero no funcionan en escenarios entre procesos o entre equipos.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-110">Other security checks, such as <xref:System.Security.Permissions.SecurityAction.Demand>, [Assert](using-the-assert-method.md), and so on, work between application domains within a process but do not work in cross-process or cross-machine scenarios.</span></span>  
  
## <a name="protected-objects"></a><span data-ttu-id="5a7f2-111">Objetos protegidos</span><span class="sxs-lookup"><span data-stu-id="5a7f2-111">Protected objects</span></span>  

 <span data-ttu-id="5a7f2-112">Algunos objetos contienen un estado de seguridad en sí mismos.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-112">Some objects hold security state in themselves.</span></span> <span data-ttu-id="5a7f2-113">Estos objetos no se deben pasar a código que no sea de confianza, porque este adquiriría una autorización de seguridad más allá de sus propios permisos.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-113">These objects should not be passed to untrusted code, which would then acquire security authorization beyond its own permissions.</span></span>  
  
 <span data-ttu-id="5a7f2-114">Un ejemplo es la creación de un objeto <xref:System.IO.FileStream>.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-114">One example is creating a <xref:System.IO.FileStream> object.</span></span> <span data-ttu-id="5a7f2-115"><xref:System.Security.Permissions.FileIOPermission> se solicita en el momento de la creación y, si se realiza correctamente, se devuelve el objeto de archivo.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-115">The <xref:System.Security.Permissions.FileIOPermission> is demanded at the time of creation and, if it succeeds, the file object is returned.</span></span> <span data-ttu-id="5a7f2-116">Sin embargo, si esta referencia de objeto se pasa al código sin los permisos de archivo, el objeto podrá leer y escribir este archivo en particular.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-116">However, if this object reference is passed to code without file permissions, the object will be able to read and write to this particular file.</span></span>  
  
 <span data-ttu-id="5a7f2-117">La defensa más sencilla para este tipo de objeto es solicitar el mismo **FileIOPermission** de cualquier código que intente obtener la referencia de objeto a través de un elemento de la API pública.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-117">The simplest defense for such an object is to demand the same **FileIOPermission** of any code that seeks to get the object reference through a public API element.</span></span>  
  
## <a name="application-domain-crossing-issues"></a><span data-ttu-id="5a7f2-118">Problemas de cruce entre dominios de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="5a7f2-118">Application domain crossing issues</span></span>  

 <span data-ttu-id="5a7f2-119">Para aislar código en entornos de hospedaje administrado, es habitual generar varios dominios de aplicación secundarios con directiva explícita para reducir los niveles de permiso para varios ensamblados.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-119">To isolate code in managed hosting environments, it is common to generate multiple child application domains with explicit policy reducing the permission levels for various assemblies.</span></span> <span data-ttu-id="5a7f2-120">Sin embargo, la directiva de estos ensamblados no cambia en el dominio de aplicación predeterminado.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-120">However, the policy for those assemblies remains unchanged in the default application domain.</span></span> <span data-ttu-id="5a7f2-121">Si uno de los dominios de aplicación secundarios puede forzar que el dominio de aplicación predeterminado cargue un ensamblado, se pierde el efecto de aislamiento del código y los tipos del ensamblado cargado forzosamente podrán ejecutar código en un nivel de confianza más alto.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-121">If one of the child application domains can force the default application domain to load an assembly, the effect of code isolation is lost and types in the forcibly loaded assembly will be able to run code at a higher level of trust.</span></span>  
  
 <span data-ttu-id="5a7f2-122">Un dominio de aplicación puede forzar que otro dominio de aplicación cargue un ensamblado y ejecute el código contenido en él llamando a un proxy a un objeto hospedado en el otro dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-122">An application domain can force another application domain to load an assembly and run code contained therein by calling a proxy to an object hosted in the other application domain.</span></span> <span data-ttu-id="5a7f2-123">Para obtener un proxy de dominio entre aplicaciones, el dominio de aplicación que hospeda el objeto debe distribuir uno mediante un valor devuelto o un parámetro de llamada a método.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-123">To obtain a cross-application-domain proxy, the application domain hosting the object must distribute one through a method call parameter or return value.</span></span> <span data-ttu-id="5a7f2-124">O bien, si acaba de crear el dominio de aplicación, el creador tiene un proxy al objeto <xref:System.AppDomain> de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-124">Or, if the application domain was just created, the creator has a proxy to the <xref:System.AppDomain> object by default.</span></span> <span data-ttu-id="5a7f2-125">Por lo tanto, para evitar romper el aislamiento del código, un dominio de aplicación con un nivel de confianza mayor no debe distribuir referencias a objetos con cálculo de referencias por referencia (instancias de clases derivadas de <xref:System.MarshalByRefObject>) en su dominio a dominios de aplicación con niveles de confianza inferiores.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-125">Thus, to avoid breaking code isolation, an application domain with a higher level of trust should not distribute references to marshaled-by-reference objects (instances of classes derived from <xref:System.MarshalByRefObject>) in its domain to application domains with lower levels of trust.</span></span>  
  
 <span data-ttu-id="5a7f2-126">Normalmente, el dominio de aplicación predeterminado crea los dominios de aplicación secundarios con un objeto de control en cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-126">Usually, the default application domain creates the child application domains with a control object in each one.</span></span> <span data-ttu-id="5a7f2-127">El objeto de control administra el nuevo dominio de aplicación y, en ocasiones, recibe pedidos del dominio de aplicación predeterminado, pero en realidad no puede contactar con el dominio directamente.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-127">The control object manages the new application domain and occasionally takes orders from the default application domain, but it cannot actually contact the domain directly.</span></span> <span data-ttu-id="5a7f2-128">En ocasiones, el dominio de aplicación predeterminado llama a su proxy al objeto de control.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-128">Occasionally, the default application domain calls its proxy to the control object.</span></span> <span data-ttu-id="5a7f2-129">Sin embargo, puede haber casos en los que es necesario que el objeto de control devuelva la llamada al dominio de aplicación predeterminado.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-129">However, there might be cases in which it is necessary for the control object to call back to the default application domain.</span></span> <span data-ttu-id="5a7f2-130">En estos casos, el dominio de aplicación predeterminado pasa un objeto de devolución de llamada de serialización por referencia al constructor del objeto de control.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-130">In these cases, the default application domain passes a marshal-by-reference callback object to the constructor of the control object.</span></span> <span data-ttu-id="5a7f2-131">Es responsabilidad del objeto de control proteger este proxy.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-131">It is the responsibility of the control object to protect this proxy.</span></span> <span data-ttu-id="5a7f2-132">Si el objeto de control colocó el proxy en un campo estático público de una clase pública o expone públicamente el proxy, se abriría un mecanismo peligroso para que otro código vuelva a llamar al dominio de aplicación predeterminado.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-132">If the control object placed the proxy on a public static field of a public class or otherwise publicly exposed the proxy, a dangerous mechanism for other code to call back into the default application domain would be opened up.</span></span> <span data-ttu-id="5a7f2-133">Por este motivo, los objetos de control siempre son de confianza de forma implícita para que el proxy sea privado.</span><span class="sxs-lookup"><span data-stu-id="5a7f2-133">For this reason, control objects are always implicitly trusted to keep the proxy private.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5a7f2-134">Vea también</span><span class="sxs-lookup"><span data-stu-id="5a7f2-134">See also</span></span>

- [<span data-ttu-id="5a7f2-135">Instrucciones de codificación segura</span><span class="sxs-lookup"><span data-stu-id="5a7f2-135">Secure Coding Guidelines</span></span>](../../standard/security/secure-coding-guidelines.md)

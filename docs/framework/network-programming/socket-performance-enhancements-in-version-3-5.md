---
title: Mejoras de rendimiento de socket en la versión 3.5
description: Obtenga información sobre las mejoras de rendimiento de la clase System.Net.Sockets.Socket en .NET Framework 3.5.
ms.date: 03/30/2017
ms.assetid: 225aa5f9-c54b-4620-ab64-5cd100cfd54c
ms.openlocfilehash: 5bd7c97d6a6edd5f914d6fe3118b6d81b64544e0
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96263144"
---
# <a name="socket-performance-enhancements-in-version-35"></a><span data-ttu-id="4dd67-103">Mejoras de rendimiento de socket en la versión 3.5</span><span class="sxs-lookup"><span data-stu-id="4dd67-103">Socket Performance Enhancements in Version 3.5</span></span>

<span data-ttu-id="4dd67-104">En la versión 3.5 se ha mejorado la clase <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> para su uso por parte de aplicaciones que usan la E/S de red asincrónica para lograr el máximo rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4dd67-104">The <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> class has been enhanced in Version 3.5 for use by applications that use asynchronous network I/O to achieve the highest performance.</span></span> <span data-ttu-id="4dd67-105">Se han agregado una serie de clases como parte de un conjunto de mejoras de la clase <xref:System.Net.Sockets.Socket> que proporcionan un patrón asincrónico alternativo que pueden usar las aplicaciones de socket de alto rendimiento especializadas.</span><span class="sxs-lookup"><span data-stu-id="4dd67-105">A series of new classes have been added as part of a set of enhancements to the <xref:System.Net.Sockets.Socket> class that provide an alternative asynchronous pattern that can be used by specialized high-performance socket applications.</span></span> <span data-ttu-id="4dd67-106">Estas mejoras se han diseñado específicamente para las aplicaciones de servidor de red que necesitan un alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="4dd67-106">These enhancements were specifically designed for network server applications that require high performance.</span></span> <span data-ttu-id="4dd67-107">Una aplicación puede usar el patrón asincrónico mejorado exclusivamente o solo en áreas activas de destino de su aplicación (al recibir grandes cantidades de datos, por ejemplo).</span><span class="sxs-lookup"><span data-stu-id="4dd67-107">An application can use the enhanced asynchronous pattern exclusively, or only in targeted hot areas of their application (when receiving large amounts of data, for example).</span></span>  
  
## <a name="class-enhancements"></a><span data-ttu-id="4dd67-108">Mejoras de clase</span><span class="sxs-lookup"><span data-stu-id="4dd67-108">Class Enhancements</span></span>  

 <span data-ttu-id="4dd67-109">La característica principal de estas mejoras es la elusión de la asignación y la sincronización repetidas de objetos durante la E/S de socket asincrónico de gran volumen.</span><span class="sxs-lookup"><span data-stu-id="4dd67-109">The main feature of these enhancements is the avoidance of the repeated allocation and synchronization of objects during high-volume asynchronous socket I/O.</span></span> <span data-ttu-id="4dd67-110">El patrón de diseño de principio o final actualmente implementado por la clase <xref:System.Net.Sockets.Socket> para la E/S de socket asincrónico exige asignar un objeto <xref:System.IAsyncResult?displayProperty=nameWithType> para cada operación de socket asincrónico.</span><span class="sxs-lookup"><span data-stu-id="4dd67-110">The Begin/End design pattern currently implemented by the <xref:System.Net.Sockets.Socket> class for asynchronous socket I/O requires a <xref:System.IAsyncResult?displayProperty=nameWithType> object be allocated for each asynchronous socket operation.</span></span>  
  
 <span data-ttu-id="4dd67-111">En las nuevas mejoras de la clase <xref:System.Net.Sockets.Socket>, las operaciones de socket asincrónico se describen mediante objetos reutilizables de la clase <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=nameWithType> asignados y mantenidos por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4dd67-111">In the new <xref:System.Net.Sockets.Socket> class enhancements, asynchronous socket operations are described by reusable <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=nameWithType> class objects allocated and maintained by the application.</span></span> <span data-ttu-id="4dd67-112">Las aplicaciones de socket de alto rendimiento saben mejor la cantidad de operaciones de socket superpuestas que se deben mantener.</span><span class="sxs-lookup"><span data-stu-id="4dd67-112">High-performance socket applications know best the amount of overlapped socket operations that must be sustained.</span></span> <span data-ttu-id="4dd67-113">La aplicación puede crear tantos objetos <xref:System.Net.Sockets.SocketAsyncEventArgs> como necesite.</span><span class="sxs-lookup"><span data-stu-id="4dd67-113">The application can create as many of the <xref:System.Net.Sockets.SocketAsyncEventArgs> objects that it needs.</span></span> <span data-ttu-id="4dd67-114">Por ejemplo, si una aplicación de servidor necesita tener 15 operaciones de aceptación de socket pendientes en todo momento para admitir velocidades de conexión de cliente entrantes, puede asignar 15 objetos reutilizables <xref:System.Net.Sockets.SocketAsyncEventArgs> de antemano para ese fin.</span><span class="sxs-lookup"><span data-stu-id="4dd67-114">For example, if a server application needs to have 15 socket accept operations outstanding at all times to support incoming client connection rates, it can allocate 15 reusable <xref:System.Net.Sockets.SocketAsyncEventArgs> objects in advance for that purpose.</span></span>  
  
 <span data-ttu-id="4dd67-115">El patrón para realizar una operación de socket asincrónico con esta clase consta de los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="4dd67-115">The pattern for performing an asynchronous socket operation with this class consists of the following steps:</span></span>  
  
1. <span data-ttu-id="4dd67-116">Asigne un nuevo objeto de contexto <xref:System.Net.Sockets.SocketAsyncEventArgs> u obtenga uno libre de un grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="4dd67-116">Allocate a new <xref:System.Net.Sockets.SocketAsyncEventArgs> context object, or get a free one from an application pool.</span></span>  
  
2. <span data-ttu-id="4dd67-117">Establezca propiedades en el objeto de contexto para la operación que se va a realizar (el método delegado de devolución de llamada y el búfer de datos, por ejemplo).</span><span class="sxs-lookup"><span data-stu-id="4dd67-117">Set properties on the context object to the operation about to be performed (the callback delegate method and data buffer, for example).</span></span>  
  
3. <span data-ttu-id="4dd67-118">Llame al método de socket adecuado (xxxAsync) para iniciar la operación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="4dd67-118">Call the appropriate socket method (xxxAsync) to initiate the asynchronous operation.</span></span>  
  
4. <span data-ttu-id="4dd67-119">Si el método de socket asincrónico (xxxAsync) devuelve true en la devolución de llamada, consulte el estado de finalización en las propiedades de contexto.</span><span class="sxs-lookup"><span data-stu-id="4dd67-119">If the asynchronous socket method (xxxAsync) returns true in the callback, query the context properties for completion status.</span></span>  
  
5. <span data-ttu-id="4dd67-120">Si el método de socket asincrónico (xxxAsync) devuelve false en la devolución de llamada, la operación se ha completado de forma sincrónica.</span><span class="sxs-lookup"><span data-stu-id="4dd67-120">If the asynchronous socket method (xxxAsync) returns false in the callback, the operation completed synchronously.</span></span> <span data-ttu-id="4dd67-121">Para ver el resultado de la operación se pueden consultar las propiedades de contexto.</span><span class="sxs-lookup"><span data-stu-id="4dd67-121">The context properties may be queried for the operation result.</span></span>  
  
6. <span data-ttu-id="4dd67-122">Vuelva a usar el contexto para otra operación, vuelva a colocarlo en el grupo o descártelo.</span><span class="sxs-lookup"><span data-stu-id="4dd67-122">Reuse the context for another operation, put it back in the pool, or discard it.</span></span>  
  
 <span data-ttu-id="4dd67-123">La duración del nuevo objeto de contexto de operación de socket asincrónico está determinada por las referencias en el código de aplicación y las referencias de E/S asincrónicas.</span><span class="sxs-lookup"><span data-stu-id="4dd67-123">The lifetime of the new asynchronous socket operation context object is determined by references in the application code and asynchronous I/O references.</span></span> <span data-ttu-id="4dd67-124">No es necesario que la aplicación conserve una referencia a un objeto de contexto de operación de socket asincrónico una vez que se ha enviado como parámetro a uno de los métodos de operación de socket asincrónico.</span><span class="sxs-lookup"><span data-stu-id="4dd67-124">It is not necessary for the application to retain a reference to an asynchronous socket operation context object after it is submitted as a parameter to one of the asynchronous socket operation methods.</span></span> <span data-ttu-id="4dd67-125">La referencia se conserva hasta que se devuelve la devolución de llamada de finalización.</span><span class="sxs-lookup"><span data-stu-id="4dd67-125">It will remain referenced until the completion callback returns.</span></span> <span data-ttu-id="4dd67-126">Pero para la aplicación supone una ventaja conservar la referencia al objeto de contexto para poderla reutilizar para una operación de socket asincrónico futura.</span><span class="sxs-lookup"><span data-stu-id="4dd67-126">However it is advantageous for the application to retain the reference to the context object so that it can be reused for a future asynchronous socket operation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4dd67-127">Vea también</span><span class="sxs-lookup"><span data-stu-id="4dd67-127">See also</span></span>

- <xref:System.Net.Sockets.Socket?displayProperty=nameWithType>
- <xref:System.Net.Sockets.SendPacketsElement?displayProperty=nameWithType>
- <xref:System.Net.Sockets.SocketAsyncEventArgs?displayProperty=nameWithType>
- <xref:System.Net.Sockets.SocketAsyncOperation?displayProperty=nameWithType>
- [<span data-ttu-id="4dd67-128">Network Programming Samples (Ejemplos de programación de red)</span><span class="sxs-lookup"><span data-stu-id="4dd67-128">Network Programming Samples</span></span>](network-programming-samples.md)
- [<span data-ttu-id="4dd67-129">Ejemplos de código de socket</span><span class="sxs-lookup"><span data-stu-id="4dd67-129">Socket Code Examples</span></span>](socket-code-examples.md)

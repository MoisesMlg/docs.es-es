---
title: Extremos de servicio y direccionamiento de la cola
ms.date: 03/30/2017
ms.assetid: 7d2d59d7-f08b-44ed-bd31-913908b83d97
ms.openlocfilehash: f7c3221d466d2599139eb29a8358d726c2b4edda
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96253926"
---
# <a name="service-endpoints-and-queue-addressing"></a><span data-ttu-id="aadb9-102">Extremos de servicio y direccionamiento de la cola</span><span class="sxs-lookup"><span data-stu-id="aadb9-102">Service Endpoints and Queue Addressing</span></span>

<span data-ttu-id="aadb9-103">En este tema se aborda cómo los clientes direccionan servicios que leen de las colas y cómo los puntos de conexión de servicio se asignan a las colas.</span><span class="sxs-lookup"><span data-stu-id="aadb9-103">This topic discusses how clients address services that read from queues and how service endpoints map to queues.</span></span> <span data-ttu-id="aadb9-104">Como recordatorio, en la siguiente ilustración se muestra la implementación de la aplicación en cola de Windows Communication Foundation clásico (WCF).</span><span class="sxs-lookup"><span data-stu-id="aadb9-104">As a reminder, the following illustration shows the classic Windows Communication Foundation (WCF) queued application deployment.</span></span>  
  
 <span data-ttu-id="aadb9-105">![Diagrama de aplicaciones puestas en cola](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span><span class="sxs-lookup"><span data-stu-id="aadb9-105">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="aadb9-106">Para que el cliente pueda enviar el mensaje al servicio, el cliente direcciona el mensaje a la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="aadb9-106">For the client to send the message to the service, the client addresses the message to the Target Queue.</span></span> <span data-ttu-id="aadb9-107">Para que el servicio pueda leer mensajes de la cola, establece su dirección de escucha en la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="aadb9-107">For the service to read messages from the queue, it sets its listen address to the Target Queue.</span></span> <span data-ttu-id="aadb9-108">El direccionamiento en WCF es un identificador uniforme de recursos (URI), mientras que los nombres de cola de Message Queuing (MSMQ) no están basados en URI.</span><span class="sxs-lookup"><span data-stu-id="aadb9-108">Addressing in WCF is Uniform Resource Identifier (URI)-based while Message Queuing (MSMQ) queue names are not URI-based.</span></span> <span data-ttu-id="aadb9-109">Por lo tanto, es esencial entender cómo direccionar las colas creadas en MSMQ mediante WCF.</span><span class="sxs-lookup"><span data-stu-id="aadb9-109">It is therefore essential to understand how to address queues created in MSMQ using WCF.</span></span>  
  
## <a name="msmq-addressing"></a><span data-ttu-id="aadb9-110">Direccionamiento MSMQ</span><span class="sxs-lookup"><span data-stu-id="aadb9-110">MSMQ Addressing</span></span>  

 <span data-ttu-id="aadb9-111">MSMQ utiliza rutas de acceso y nombres de formato para identificar una cola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-111">MSMQ uses paths and format names to identify a queue.</span></span> <span data-ttu-id="aadb9-112">Las rutas de acceso especifican un nombre de host y `QueueName`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-112">Paths specify a host name and a `QueueName`.</span></span> <span data-ttu-id="aadb9-113">Opcionalmente, puede haber un `Private$` entre el nombre de host y el `QueueName` para indicar una cola privada que no se publica en el servicio de directorio Active Directory.</span><span class="sxs-lookup"><span data-stu-id="aadb9-113">Optionally, there can be a `Private$` between the host name and the `QueueName` to indicate a private queue that is not published in the Active Directory directory service.</span></span>  
  
 <span data-ttu-id="aadb9-114">Los nombres de ruta de acceso se asignan a "FormatNames" para determinar aspectos adicionales de la dirección, incluido el protocolo de enrutamiento y transferencia del administrador de cola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-114">Path names are mapped to "FormatNames" to determine additional aspects of the address, including routing and queue manager transfer protocol.</span></span> <span data-ttu-id="aadb9-115">El Administrador de la cola admite dos protocolos de transferencia: protocolo MSMQ nativo y SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="aadb9-115">The Queue Manager supports two transfer protocols: native MSMQ protocol and SOAP Reliable Messaging Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="aadb9-116">Para obtener más información acerca de la ruta de acceso y los nombres de formato de MSMQ, vea [acerca de Message Queue Server](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="aadb9-116">For more information about MSMQ path and format names, see [About Message Queuing](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span></span>  
  
## <a name="netmsmqbinding-and-service-addressing"></a><span data-ttu-id="aadb9-117">NetMsmqBinding y direccionamiento del servicio</span><span class="sxs-lookup"><span data-stu-id="aadb9-117">NetMsmqBinding and Service Addressing</span></span>  

 <span data-ttu-id="aadb9-118">Al direccionar un mensaje a un servicio, el esquema en el URI se selecciona basándose en el transporte utilizado para la comunicación.</span><span class="sxs-lookup"><span data-stu-id="aadb9-118">When addressing a message to a service, the scheme in the URI is chosen based on the transport used for communication.</span></span> <span data-ttu-id="aadb9-119">Cada transporte en WCF tiene un esquema único.</span><span class="sxs-lookup"><span data-stu-id="aadb9-119">Each transport in WCF has a unique scheme.</span></span> <span data-ttu-id="aadb9-120">El esquema debe reflejar la naturaleza de transporte utilizada para la comunicación.</span><span class="sxs-lookup"><span data-stu-id="aadb9-120">The scheme must reflect the nature of transport used for communication.</span></span> <span data-ttu-id="aadb9-121">Por ejemplo, net.tcp, net.pipe, HTTP, etc.</span><span class="sxs-lookup"><span data-stu-id="aadb9-121">For example, net.tcp, net.pipe, HTTP, and so on.</span></span>  
  
 <span data-ttu-id="aadb9-122">El transporte en cola MSMQ en WCF expone un esquema net. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="aadb9-122">The MSMQ queued transport in WCF exposes a net.msmq scheme.</span></span> <span data-ttu-id="aadb9-123">Cualquier mensaje direccionado utilizando el esquema net.msmq se envía utilizando `NetMsmqBinding` a través del canal de transporte puesto en cola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-123">Any message addressed using the net.msmq scheme is sent using the `NetMsmqBinding` over the MSMQ queued transport channel.</span></span>  
  
 <span data-ttu-id="aadb9-124">El direccionamiento de una cola en WCF se basa en el siguiente patrón:</span><span class="sxs-lookup"><span data-stu-id="aadb9-124">The addressing of a queue in WCF is based on the following pattern:</span></span>  
  
 <span data-ttu-id="aadb9-125">net. MSMQ:// \<*host-name*> /[Private/] \<*queue-name*></span><span class="sxs-lookup"><span data-stu-id="aadb9-125">net.msmq: // \<*host-name*> / [private/] \<*queue-name*></span></span>  
  
 <span data-ttu-id="aadb9-126">donde:</span><span class="sxs-lookup"><span data-stu-id="aadb9-126">where:</span></span>  
  
- <span data-ttu-id="aadb9-127">\<*host-name*> es el nombre del equipo que hospeda la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="aadb9-127">\<*host-name*> is the name of the machine that hosts the Target Queue.</span></span>  
  
- <span data-ttu-id="aadb9-128">[privado] es opcional.</span><span class="sxs-lookup"><span data-stu-id="aadb9-128">[private] is optional.</span></span> <span data-ttu-id="aadb9-129">Se utiliza al direccionar una cola de destino que es una cola privada.</span><span class="sxs-lookup"><span data-stu-id="aadb9-129">It is used when addressing a Target Queue that is a private queue.</span></span> <span data-ttu-id="aadb9-130">Para direccionar una cola pública, no debe especificar privado.</span><span class="sxs-lookup"><span data-stu-id="aadb9-130">To address a public queue, you must not specify private.</span></span> <span data-ttu-id="aadb9-131">Tenga en cuenta que, a diferencia de las rutas de acceso de MSMQ, no hay "$" en el formulario URI de WCF.</span><span class="sxs-lookup"><span data-stu-id="aadb9-131">Note that, unlike MSMQ paths, there is no "$" in the WCF URI form.</span></span>  
  
- <span data-ttu-id="aadb9-132">\<*queue-name*> es el nombre de la cola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-132">\<*queue-name*> is the name of the queue.</span></span> <span data-ttu-id="aadb9-133">El nombre de la cola también puede hacer referencia a una subcola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-133">The queue name can also refer to a subqueue.</span></span> <span data-ttu-id="aadb9-134">Por lo tanto, \<*queue-name*>  =  \<*name-of-queue*> [;*subqueue-Name*].</span><span class="sxs-lookup"><span data-stu-id="aadb9-134">Thus, \<*queue-name*> = \<*name-of-queue*>[;*sub-queue-name*].</span></span>  
  
 <span data-ttu-id="aadb9-135">Ejemplo1: Para direccional una cola privada PurchaseOrders hospedada en el equipo abc atadatum.com, el URI sería net.msmq://abc.adatum.com/private/PurchaseOrders.</span><span class="sxs-lookup"><span data-stu-id="aadb9-135">Example1: To address a private queue PurchaseOrders hosted on computer abc atadatum.com, the URI would be net.msmq://abc.adatum.com/private/PurchaseOrders.</span></span>  
  
 <span data-ttu-id="aadb9-136">Ejemplo2: Para direccionar una cola pública AccountsPayable hospedada en el equipo def atadatum.com, el URI sería net.msmq://def.adatum.com/AccountsPayable.</span><span class="sxs-lookup"><span data-stu-id="aadb9-136">Example2: To address a public queue AccountsPayable hosted on computer def atadatum.com, the URI would be net.msmq://def.adatum.com/AccountsPayable.</span></span>  
  
 <span data-ttu-id="aadb9-137">El agente de escucha usa la dirección de la cola como URI de escucha desde donde leer los mensajes.</span><span class="sxs-lookup"><span data-stu-id="aadb9-137">The queue address is used as the Listen URI by the Listener to read messages from.</span></span> <span data-ttu-id="aadb9-138">En otras palabras, la dirección de la cola es equivalente al puerto de escucha del socket TCP.</span><span class="sxs-lookup"><span data-stu-id="aadb9-138">In other words, the queue address is equivalent to the listen port of TCP socket.</span></span>  
  
 <span data-ttu-id="aadb9-139">Un extremo que lee de una cola debe especificar la dirección de la cola utilizando el mismo esquema especificada previamente al abrir ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="aadb9-139">An endpoint that reads from a queue must specify the address of the queue using the same scheme specified previously when opening the ServiceHost.</span></span> <span data-ttu-id="aadb9-140">Para obtener ejemplos, vea [enlace de .net MSMQ](../samples/net-msmq-binding.md).</span><span class="sxs-lookup"><span data-stu-id="aadb9-140">For examples, see [Net MSMQ Binding](../samples/net-msmq-binding.md).</span></span>  
  
### <a name="multiple-contracts-in-a-queue"></a><span data-ttu-id="aadb9-141">Varios contratos en una cola</span><span class="sxs-lookup"><span data-stu-id="aadb9-141">Multiple Contracts in a Queue</span></span>  

 <span data-ttu-id="aadb9-142">Los mensajes en una cola pueden implementar diferentes contratos.</span><span class="sxs-lookup"><span data-stu-id="aadb9-142">Messages in a queue can implement different contracts.</span></span> <span data-ttu-id="aadb9-143">En este caso, es esencial que una de las condiciones siguientes sea verdadera para leer correctamente y procesar todos los mensajes:</span><span class="sxs-lookup"><span data-stu-id="aadb9-143">In this case, it is essential that one of the following is true to successfully read and process all messages:</span></span>  
  
- <span data-ttu-id="aadb9-144">Especifique un punto de conexión para un servicio que implementa todos los contratos.</span><span class="sxs-lookup"><span data-stu-id="aadb9-144">Specify an endpoint for a service that implements all the contracts.</span></span> <span data-ttu-id="aadb9-145">Éste es el método recomendado.</span><span class="sxs-lookup"><span data-stu-id="aadb9-145">This is the recommended approach.</span></span>  
  
- <span data-ttu-id="aadb9-146">Especifique varios puntos de conexión con contratos diferentes, pero asegúrese de que todos los puntos de conexión utilicen el mismo objeto `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-146">Specify multiple endpoints with different contracts, but ensure that all the endpoints use the same `NetMsmqBinding` object.</span></span> <span data-ttu-id="aadb9-147">La lógica de distribución en ServiceModel utiliza una bomba de mensaje que lee los mensajes del canal de transporte para su distribución, lo que eventualmente desmultiplexa mensajes basados en el contrato a extremos diferentes.</span><span class="sxs-lookup"><span data-stu-id="aadb9-147">The dispatching logic in ServiceModel uses a message pump that reads messages out of the transport channel for dispatch, which eventually de-multiplexes messages based on the contract to different endpoints.</span></span> <span data-ttu-id="aadb9-148">Una bomba de mensaje se crea para un par de escucha URI/enlace.</span><span class="sxs-lookup"><span data-stu-id="aadb9-148">A message pump is created for a listen URI/Binding pair.</span></span> <span data-ttu-id="aadb9-149">La dirección de la cola es utilizada como URI de escucha por el agente de escucha puesto en cola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-149">The queue address is used as the Listen URI by the queued listener.</span></span> <span data-ttu-id="aadb9-150">Si todos los extremos utilizan el mismo objeto de enlace, ello garantiza que se utiliza una única bomba de mensaje para leer el mensaje y desmultiplexarlo a los extremos pertinentes basados en el contrato.</span><span class="sxs-lookup"><span data-stu-id="aadb9-150">Having all the endpoints use the same binding object ensures that a single message pump is used to read the message and de-multiplex to relevant endpoints based on the contract.</span></span>  
  
### <a name="srmp-messaging"></a><span data-ttu-id="aadb9-151">Mensajería SRMP</span><span class="sxs-lookup"><span data-stu-id="aadb9-151">SRMP Messaging</span></span>  

 <span data-ttu-id="aadb9-152">Como se ha abordado previamente, puede utilizar el protocolo SRMP para las transferencias de colas a colas.</span><span class="sxs-lookup"><span data-stu-id="aadb9-152">As previously discussed, you can use the SRMP protocol for queue-to-queue transfers.</span></span> <span data-ttu-id="aadb9-153">Ello se utiliza normalmente cuando un transporte http transmite mensajes entre la cola de transmisión y la cola de destino.</span><span class="sxs-lookup"><span data-stu-id="aadb9-153">This is commonly used when an HTTP transport transmits messages between the Transmission Queue and the Target Queue.</span></span>  
  
 <span data-ttu-id="aadb9-154">Para utilizar el protocolo de transferencia SRMP, direccione los mensajes utilizando el esquema del URI de net.msmq, como se ha mencionado previamente y especifica la opción de SRMP o SRMP Seguro en la propiedad `QueueTransferProtocol` de `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-154">To use the SRMP transfer protocol, address messages using the net.msmq URI scheme, as mentioned previously, and specify the choice of SRMP or Secured SRMP in the `QueueTransferProtocol` property of the `NetMsmqBinding`.</span></span>  
  
 <span data-ttu-id="aadb9-155">Especificar la propiedad `QueueTransferProtocol` es una característica de solo envío.</span><span class="sxs-lookup"><span data-stu-id="aadb9-155">Specifying the `QueueTransferProtocol` property is a send-only feature.</span></span> <span data-ttu-id="aadb9-156">Es una indicación por parte del cliente sobre qué tipo de protocolo de transferencia de la cola debe utilizarse.</span><span class="sxs-lookup"><span data-stu-id="aadb9-156">This is an indication by the client which kind of queue transfer protocol to use.</span></span>  
  
### <a name="using-active-directory"></a><span data-ttu-id="aadb9-157">Utilizar Active Directory</span><span class="sxs-lookup"><span data-stu-id="aadb9-157">Using Active Directory</span></span>  

 <span data-ttu-id="aadb9-158">MSMQ se entrega con soporte para la integración de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="aadb9-158">MSMQ comes with support for Active Directory integration.</span></span> <span data-ttu-id="aadb9-159">Cuando MSMQ se instala con integración de Active Directory, el equipo debe formar parte de un dominio de Windows.</span><span class="sxs-lookup"><span data-stu-id="aadb9-159">When MSMQ is installed with Active Directory integration, the machine must be part of a Windows domain.</span></span> <span data-ttu-id="aadb9-160">Active Directory se utiliza para publicar colas para la detección; dichas colas se denominan *colas públicas*.</span><span class="sxs-lookup"><span data-stu-id="aadb9-160">Active Directory is used to publish queues for discovery; such queues are called *public queues*.</span></span> <span data-ttu-id="aadb9-161">Al direccionar una cola, la cola se puede resolver utilizando Active Directory.</span><span class="sxs-lookup"><span data-stu-id="aadb9-161">When addressing a queue, the queue can be resolved using Active Directory.</span></span> <span data-ttu-id="aadb9-162">Esto es similar a cómo Domain Name System (DNS) se utiliza para resolver la dirección IP de un nombre de red.</span><span class="sxs-lookup"><span data-stu-id="aadb9-162">This is similar to how Domain Name System (DNS) is used to resolve the IP address of a network name.</span></span> <span data-ttu-id="aadb9-163">La propiedad `UseActiveDirectory` en `NetMsmqBinding` es un valor booleano que indica si el canal en cola debe utilizar Active Directory para resolver el URI de la cola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-163">The `UseActiveDirectory` property in `NetMsmqBinding` is a Boolean that indicates whether the queued channel must use Active Directory to resolve the queue URI.</span></span> <span data-ttu-id="aadb9-164">De forma predeterminada, se establece en `false`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-164">By default it is set to `false`.</span></span> <span data-ttu-id="aadb9-165">Si la propiedad `UseActiveDirectory` está establecida en `true`,el canal en cola utiliza Active Directory para convertir el URI net.msmq:// en nombre de formato.</span><span class="sxs-lookup"><span data-stu-id="aadb9-165">If the `UseActiveDirectory` property is set to `true`, then the queued channel uses Active Directory to convert the net.msmq:// URI to format name.</span></span>  
  
 <span data-ttu-id="aadb9-166">La propiedad `UseActiveDirectory` solo es significativa para el cliente que está enviando el mensaje porque se utiliza para resolver la dirección de la cola al enviar mensajes.</span><span class="sxs-lookup"><span data-stu-id="aadb9-166">The `UseActiveDirectory` property is meaningful only for the client that is sending the message because it is used to resolve the address of the queue when sending messages.</span></span>  
  
### <a name="mapping-netmsmq-uri-to-message-queuing-format-names"></a><span data-ttu-id="aadb9-167">Asignar el URI net.msmq a nombres de formato de Message Queuing</span><span class="sxs-lookup"><span data-stu-id="aadb9-167">Mapping net.msmq URI to Message Queuing Format Names</span></span>  

 <span data-ttu-id="aadb9-168">El canal en cola actúa asignando el nombre del URI net.msmq proporcionado al canal a los nombres de formato de MSMQ.</span><span class="sxs-lookup"><span data-stu-id="aadb9-168">The queued channel handles mapping the net.msmq URI name provided to the channel to MSMQ format names.</span></span> <span data-ttu-id="aadb9-169">La tabla siguiente resume las reglas utilizadas para la asignación entre ellos.</span><span class="sxs-lookup"><span data-stu-id="aadb9-169">The following table summarizes the rules used to map between them.</span></span>  
  
|<span data-ttu-id="aadb9-170">Dirección de cola basada en URI WCF</span><span class="sxs-lookup"><span data-stu-id="aadb9-170">WCF URI-based queue address</span></span>|<span data-ttu-id="aadb9-171">Utilizar la propiedad de Active Directory</span><span class="sxs-lookup"><span data-stu-id="aadb9-171">Use Active Directory property</span></span>|<span data-ttu-id="aadb9-172">Propiedad del protocolo de transferencia de la cola</span><span class="sxs-lookup"><span data-stu-id="aadb9-172">Queue Transfer Protocol property</span></span>|<span data-ttu-id="aadb9-173">Nombres de formato de MSMQ resultantes</span><span class="sxs-lookup"><span data-stu-id="aadb9-173">Resulting MSMQ format names</span></span>|  
|----------------------------------|-----------------------------------|--------------------------------------|---------------------------------|  
|`Net.msmq://<machine-name>/private/abc`|<span data-ttu-id="aadb9-174">False (valor predeterminado)</span><span class="sxs-lookup"><span data-stu-id="aadb9-174">False (default)</span></span>|<span data-ttu-id="aadb9-175">Native (valor predeterminado)</span><span class="sxs-lookup"><span data-stu-id="aadb9-175">Native (default)</span></span>|`DIRECT=OS:machine-name\private$\abc`|  
|`Net.msmq://<machine-name>/private/abc`|<span data-ttu-id="aadb9-176">False</span><span class="sxs-lookup"><span data-stu-id="aadb9-176">False</span></span>|<span data-ttu-id="aadb9-177">SRMP</span><span class="sxs-lookup"><span data-stu-id="aadb9-177">SRMP</span></span>|`DIRECT=http://machine/msmq/private$/abc`|  
|`Net.msmq://<machine-name>/private/abc`|<span data-ttu-id="aadb9-178">True</span><span class="sxs-lookup"><span data-stu-id="aadb9-178">True</span></span>|<span data-ttu-id="aadb9-179">Nativa</span><span class="sxs-lookup"><span data-stu-id="aadb9-179">Native</span></span>|<span data-ttu-id="aadb9-180">`PUBLIC=some-guid` (el GUID de la cola)</span><span class="sxs-lookup"><span data-stu-id="aadb9-180">`PUBLIC=some-guid` (the GUID of the queue)</span></span>|  
  
### <a name="reading-messages-from-the-dead-letter-queue-or-the-poison-message-queue"></a><span data-ttu-id="aadb9-181">Leer los mensajes de la cola de mensajes no enviados o la cola de mensajes dudosos</span><span class="sxs-lookup"><span data-stu-id="aadb9-181">Reading Messages from the Dead-Letter Queue or the Poison-Message Queue</span></span>  

 <span data-ttu-id="aadb9-182">Para leer los mensajes de una cola de mensajes dudosos que es una subcola de la cola de destino, abra `ServiceHost` con la dirección de la subcola.</span><span class="sxs-lookup"><span data-stu-id="aadb9-182">To read messages from a poison-message queue that is a subqueue of the target queue, open the `ServiceHost` with the address of the subqueue.</span></span>  
  
 <span data-ttu-id="aadb9-183">Ejemplo: un servicio que lee de la cola de mensajes dudosos de la cola privada PurchaseOrders del equipo local direccionaría net.msmq://localhost/private/PurchaseOrders;poison.</span><span class="sxs-lookup"><span data-stu-id="aadb9-183">Example: A service that reads from the poison-message queue of the PurchaseOrders private queue from the local machine would address net.msmq://localhost/private/PurchaseOrders;poison.</span></span>  
  
 <span data-ttu-id="aadb9-184">Para leer los mensajes de una cola de mensajes con problemas de entrega transaccionales de un sistema, el URI debe tener el formato siguiente: net.msmq://localhost/system$;DeadXact.</span><span class="sxs-lookup"><span data-stu-id="aadb9-184">To read messages from a system transactional dead-letter queue, the URI must be of the form: net.msmq://localhost/system$;DeadXact.</span></span>  
  
 <span data-ttu-id="aadb9-185">Para leer los mensajes de una cola de mensajes no enviados no transaccionales de un sistema, el URI debe tener la forma siguiente: net.msmq://localhost/system$;DeadLetter.</span><span class="sxs-lookup"><span data-stu-id="aadb9-185">To read messages from a system nontransactional dead-letter queue, the URI must be of the form: net.msmq://localhost/system$;DeadLetter.</span></span>  
  
 <span data-ttu-id="aadb9-186">Al utilizar una cola de mensajes no enviados personalizada, observe que la cola de mensajes no enviados debe estar situada en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="aadb9-186">When using a custom dead-letter queue, note that the dead-letter queue must reside on the local computer.</span></span> <span data-ttu-id="aadb9-187">Como tal, el URI para la cola de mensajes no enviados está restringido a la forma:</span><span class="sxs-lookup"><span data-stu-id="aadb9-187">As such, the URI for the dead-letter queue is restricted to the form:</span></span>  
  
 <span data-ttu-id="aadb9-188">net. MSMQ://localhost/[Private/]  \<*custom-dead-letter-queue-name*> .</span><span class="sxs-lookup"><span data-stu-id="aadb9-188">net.msmq: //localhost/ [private/]  \<*custom-dead-letter-queue-name*>.</span></span>  
  
 <span data-ttu-id="aadb9-189">Un servicio WCF comprueba que todos los mensajes que recibe se dirigieron a la cola concreta en la que escucha.</span><span class="sxs-lookup"><span data-stu-id="aadb9-189">A WCF service verifies that all messages it receives were addressed to the particular queue it is listening on.</span></span> <span data-ttu-id="aadb9-190">Si la cola de destino del mensaje no coincide con la cola donde se encuentra, el servicio no procesa el mensaje.</span><span class="sxs-lookup"><span data-stu-id="aadb9-190">If the message’s destination queue does not match the queue it is found in, the service does not process the message.</span></span> <span data-ttu-id="aadb9-191">Se trata de una cuestión que los servicios que escuchan a una cola de mensajes no enviados deben abordar porque cualquier mensaje en la cola de mensajes no enviados debía ser entregado a otra parte.</span><span class="sxs-lookup"><span data-stu-id="aadb9-191">This is an issue that services listening to a dead-letter queue must address because any message in the dead-letter queue was meant to be delivered elsewhere.</span></span> <span data-ttu-id="aadb9-192">Para leer los mensajes de una cola de mensajes no enviados o de una cola de mensajes dudosos, debe utilizarse `ServiceBehavior` con el parámetro <xref:System.ServiceModel.AddressFilterMode.Any>.</span><span class="sxs-lookup"><span data-stu-id="aadb9-192">To read messages from a dead-letter queue, or from a poison queue, a `ServiceBehavior` with the <xref:System.ServiceModel.AddressFilterMode.Any> parameter must be used.</span></span> <span data-ttu-id="aadb9-193">Para obtener un ejemplo, vea [colas de mensajes con problemas de entrega](../samples/dead-letter-queues.md).</span><span class="sxs-lookup"><span data-stu-id="aadb9-193">For an example, see [Dead Letter Queues](../samples/dead-letter-queues.md).</span></span>  
  
## <a name="msmqintegrationbinding-and-service-addressing"></a><span data-ttu-id="aadb9-194">MsmqIntegrationBinding y direccionamiento del servicio</span><span class="sxs-lookup"><span data-stu-id="aadb9-194">MsmqIntegrationBinding and Service Addressing</span></span>  

 <span data-ttu-id="aadb9-195">`MsmqIntegrationBinding` se utiliza para la comunicación con aplicaciones MSMQ tradicionales.</span><span class="sxs-lookup"><span data-stu-id="aadb9-195">The `MsmqIntegrationBinding` is used for communication with traditional MSMQ applications.</span></span> <span data-ttu-id="aadb9-196">Para facilitar la interoperación con una aplicación MSMQ existente, WCF solo admite el direccionamiento de nombres de formato.</span><span class="sxs-lookup"><span data-stu-id="aadb9-196">To ease interoperation with an existing MSMQ application, WCF supports only format name addressing.</span></span> <span data-ttu-id="aadb9-197">Por consiguiente, los mensajes enviados utilizando este enlace deben cumplir el esquema del URI:</span><span class="sxs-lookup"><span data-stu-id="aadb9-197">Thus, messages sent using this binding must conform to the URI scheme:</span></span>  
  
 <span data-ttu-id="aadb9-198">MSMQ. FormatName:\<*MSMQ-format-name*>></span><span class="sxs-lookup"><span data-stu-id="aadb9-198">msmq.formatname:\<*MSMQ-format-name*>></span></span>  
  
 <span data-ttu-id="aadb9-199">MSMQ-Format-Name tiene el formato especificado por MSMQ en [About Message Queuing](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="aadb9-199">The MSMQ-format-name is of the form specified by MSMQ in [About Message Queuing](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span></span>  
  
 <span data-ttu-id="aadb9-200">Observe que solo puede utilizar los nombres de formato directos, y los nombres de formato públicos y privados (requiere la integración de Active Directory) al recibir los mensajes de una cola utilizando `MsmqIntegrationBinding`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-200">Note that you can only use direct format names, and public and private format names (requires Active Directory integration) when receiving messages from a queue using `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="aadb9-201">Sin embargo, se aconseja que utilice los nombres de formato directos.</span><span class="sxs-lookup"><span data-stu-id="aadb9-201">However, it is advised that you use direct format names.</span></span> <span data-ttu-id="aadb9-202">Por ejemplo, en Windows Vista, el uso de cualquier otro nombre de formato produce un error porque el sistema intenta abrir una subcola, que solo se puede abrir con nombres de formato directo.</span><span class="sxs-lookup"><span data-stu-id="aadb9-202">For example, on Windows Vista, using any other format name causes an error because the system attempts to open a subqueue, which can only be opened with direct format names.</span></span>  
  
 <span data-ttu-id="aadb9-203">Al direccionar SRMP utilizando `MsmqIntegrationBinding`, no hay ningún requisito para agregar /msmq/ en el nombre de formato directo para ayudar a Internet Information Services (IIS) con la distribución.</span><span class="sxs-lookup"><span data-stu-id="aadb9-203">When addressing SRMP using `MsmqIntegrationBinding`, there is no requirement to add /msmq/ in the direct format name to help Internet Information Services (IIS) with dispatching.</span></span> <span data-ttu-id="aadb9-204">Por ejemplo: al direccionar una cola ABC mediante el protocolo SRMP, en lugar de `DIRECT=http://adatum.com/msmq/private$/abc` , debe usar `DIRECT=http://adatum.com/private$/abc` .</span><span class="sxs-lookup"><span data-stu-id="aadb9-204">For example: When addressing a queue abc using the SRMP protocol, instead of `DIRECT=http://adatum.com/msmq/private$/abc`, you should use `DIRECT=http://adatum.com/private$/abc`.</span></span>  
  
 <span data-ttu-id="aadb9-205">Observe que no puede utilizar net.msmq:// direccionando con `MsmqIntegrationBinding`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-205">Note that you cannot use net.msmq:// addressing with `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="aadb9-206">Dado que `MsmqIntegrationBinding` admite el direccionamiento de nombres de formato de MSMQ de forma libre, puede utilizar un servicio WCF que use este enlace para utilizar las características de multidifusión y lista de distribución en MSMQ.</span><span class="sxs-lookup"><span data-stu-id="aadb9-206">Because `MsmqIntegrationBinding` supports free-form MSMQ format name addressing, you can use a WCF service that uses this binding to use multicast and distribution list features in MSMQ.</span></span> <span data-ttu-id="aadb9-207">Una excepción es especificar `CustomDeadLetterQueue` al utilizar `MsmqIntegrationBinding`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-207">One exception is specifying `CustomDeadLetterQueue` when using the `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="aadb9-208">Debe tener la forma net.msmq://, similar a cómo se especifica utilizando `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="aadb9-208">It must be of the form net.msmq://, similar to how it is specified using the `NetMsmqBinding`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aadb9-209">Vea también</span><span class="sxs-lookup"><span data-stu-id="aadb9-209">See also</span></span>

- [<span data-ttu-id="aadb9-210">Alojamiento web de una aplicación en cola</span><span class="sxs-lookup"><span data-stu-id="aadb9-210">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)

---
title: Tokens y notificaciones SAML
description: Obtenga información sobre cómo usa WFC tokens de SAML para llevar instrucciones que son conjuntos de notificaciones realizadas por una entidad sobre otra entidad.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
- issued tokens
- SAML token
ms.assetid: 930b6e34-9eab-4e95-826c-4e06659bb977
ms.openlocfilehash: a1de58ae28041b8e89822120c9369612217eb3b7
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96288521"
---
# <a name="saml-tokens-and-claims"></a><span data-ttu-id="e1749-103">Tokens y notificaciones SAML</span><span class="sxs-lookup"><span data-stu-id="e1749-103">SAML Tokens and Claims</span></span>

<span data-ttu-id="e1749-104">Los *tokens* del lenguaje de marcado de aserciones de seguridad (SAML) son representaciones XML de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e1749-104">Security Assertions Markup Language (SAML) *tokens* are XML representations of claims.</span></span> <span data-ttu-id="e1749-105">De forma predeterminada, los tokens SAML Windows Communication Foundation (WCF) emplea en escenarios de seguridad federados son *tokens emitidos*.</span><span class="sxs-lookup"><span data-stu-id="e1749-105">By default, SAML tokens Windows Communication Foundation (WCF) uses in federated security scenarios are *issued tokens*.</span></span>  
  
 <span data-ttu-id="e1749-106">Los tokens SAML llevan instrucciones que son conjuntos de notificaciones realizadas por una entidad sobre otra entidad.</span><span class="sxs-lookup"><span data-stu-id="e1749-106">SAML tokens carry statements that are sets of claims made by one entity about another entity.</span></span> <span data-ttu-id="e1749-107">Por ejemplo, en escenarios de seguridad asociados, las instrucciones son realizadas por un servicio de token de seguridad sobre un usuario del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1749-107">For example, in federated security scenarios, the statements are made by a security token service about a user in the system.</span></span> <span data-ttu-id="e1749-108">El servicio de token de seguridad firma el token SAML para indicar la veracidad de las instrucciones contenidas en el token.</span><span class="sxs-lookup"><span data-stu-id="e1749-108">The security token service signs the SAML token to indicate the veracity of the statements contained in the token.</span></span> <span data-ttu-id="e1749-109">Además, el token SAML está asociado a material clave criptográfico del que el usuario del token SAML demuestra tener conocimiento.</span><span class="sxs-lookup"><span data-stu-id="e1749-109">In addition, the SAML token is associated with cryptographic key material that the user of the SAML token proves knowledge of.</span></span> <span data-ttu-id="e1749-110">Esta prueba convence al usuario de confianza que el token SAML fue realmente emitido para ese usuario.</span><span class="sxs-lookup"><span data-stu-id="e1749-110">This proof satisfies the relying party that the SAML token was, in fact, issued to that user.</span></span> <span data-ttu-id="e1749-111">Por ejemplo, en un escenario típico:</span><span class="sxs-lookup"><span data-stu-id="e1749-111">For example, in a typical scenario:</span></span>  
  
1. <span data-ttu-id="e1749-112">Un cliente solicita un token de SAML de un servicio de token de seguridad, autenticándose para ese servicio de token de seguridad usando las credenciales de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1749-112">A client requests a SAML token from a security token service, authenticating to that security token service by using Windows credentials.</span></span>  
  
2. <span data-ttu-id="e1749-113">El servicio de token de seguridad emite un token SAML para el cliente.</span><span class="sxs-lookup"><span data-stu-id="e1749-113">The security token service issues a SAML token to the client.</span></span> <span data-ttu-id="e1749-114">El token SAML se firma con un certificado asociado al servicio de token de seguridad y contiene una clave de prueba cifrada para el servicio de destino.</span><span class="sxs-lookup"><span data-stu-id="e1749-114">The SAML token is signed with a certificate associated with the security token service and contains a proof key encrypted for the target service.</span></span>  
  
3. <span data-ttu-id="e1749-115">El cliente también recibe una copia de la *clave de prueba*.</span><span class="sxs-lookup"><span data-stu-id="e1749-115">The client also receives a copy of the *proof key*.</span></span> <span data-ttu-id="e1749-116">Después, el cliente presenta el token SAML al servicio de aplicación (el *usuario de confianza*) y firma el mensaje con esa clave de prueba.</span><span class="sxs-lookup"><span data-stu-id="e1749-116">The client then presents the SAML token to the application service (the *relying party*) and signs the message with that proof key.</span></span>  
  
4. <span data-ttu-id="e1749-117">La firma a través del token SAML indica al usuario de confianza que el servicio de token de seguridad emitió el token.</span><span class="sxs-lookup"><span data-stu-id="e1749-117">The signature over the SAML token tells the relying party that the security token service issued the token.</span></span> <span data-ttu-id="e1749-118">La firma del mensaje creada con la clave de prueba indica al usuario de confianza que el token fue emitido para el cliente.</span><span class="sxs-lookup"><span data-stu-id="e1749-118">The message signature created with the proof key tells the relying party that the token was issued to the client.</span></span>  
  
## <a name="from-claims-to-samlattributes"></a><span data-ttu-id="e1749-119">De notificaciones a SamlAttributes</span><span class="sxs-lookup"><span data-stu-id="e1749-119">From Claims to SamlAttributes</span></span>  

 <span data-ttu-id="e1749-120">En WCF, las instrucciones de los tokens SAML se modelan como <xref:System.IdentityModel.Tokens.SamlAttribute> objetos, que se pueden rellenar directamente a partir de <xref:System.IdentityModel.Claims.Claim> objetos, siempre que el <xref:System.IdentityModel.Claims.Claim> objeto tenga una <xref:System.IdentityModel.Claims.Claim.Right%2A> propiedad de <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> y la <xref:System.IdentityModel.Claims.Claim.Resource%2A> propiedad sea de tipo <xref:System.String> .</span><span class="sxs-lookup"><span data-stu-id="e1749-120">In WCF, statements in SAML tokens are modeled as <xref:System.IdentityModel.Tokens.SamlAttribute> objects, which can be populated directly from <xref:System.IdentityModel.Claims.Claim> objects, provided the <xref:System.IdentityModel.Claims.Claim> object has a <xref:System.IdentityModel.Claims.Claim.Right%2A> property of <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> and the <xref:System.IdentityModel.Claims.Claim.Resource%2A> property is of type <xref:System.String>.</span></span> <span data-ttu-id="e1749-121">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="e1749-121">For example:</span></span>  
  
 [!code-csharp[c_CreateSTS#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_creatests/cs/source.cs#8)]
 [!code-vb[c_CreateSTS#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_creatests/vb/source.vb#8)]  
  
> [!NOTE]
> <span data-ttu-id="e1749-122">Cuando los tokens SAML se serializan en mensajes, o cuando los emite un servicio de token de seguridad o son presentados por los clientes a servicios como parte de autenticación, la cuota de tamaño máximo del mensaje debe ser suficientemente grande para alojar el token SAML y las otras partes del mensaje.</span><span class="sxs-lookup"><span data-stu-id="e1749-122">When SAML tokens are serialized in messages, either when they are issued by a security token service or when they are presented by clients to services as part of authentication, the maximum message size quota must be sufficiently large to accommodate the SAML token and the other message parts.</span></span> <span data-ttu-id="e1749-123">En casos normales, las cuotas de tamaño del mensaje predeterminadas son suficientes.</span><span class="sxs-lookup"><span data-stu-id="e1749-123">In normal cases, the default message size quotas are sufficient.</span></span> <span data-ttu-id="e1749-124">Sin embargo, en casos donde un token SAML es grande que porque contiene centenares de notificaciones, puede necesitar aumentar las cuotas para alojar el token serializado.</span><span class="sxs-lookup"><span data-stu-id="e1749-124">However, in cases where a SAML token is large because it contains hundreds of claims, you may need to increase the quotas to accommodate the serialized token.</span></span> <span data-ttu-id="e1749-125">Para obtener más información, vea [consideraciones de seguridad para los datos](security-considerations-for-data.md).</span><span class="sxs-lookup"><span data-stu-id="e1749-125">For more information, see [Security Considerations for Data](security-considerations-for-data.md).</span></span>  
  
## <a name="from-samlattributes-to-claims"></a><span data-ttu-id="e1749-126">De SamlAttributes a notificaciones</span><span class="sxs-lookup"><span data-stu-id="e1749-126">From SamlAttributes to Claims</span></span>  

 <span data-ttu-id="e1749-127">Cuando los tokens SAML se reciben en mensajes, las diversas instrucciones en el token SAML se convierten en objetos <xref:System.IdentityModel.Policy.IAuthorizationPolicy> que se colocan en <xref:System.IdentityModel.Policy.AuthorizationContext>.</span><span class="sxs-lookup"><span data-stu-id="e1749-127">When SAML tokens are received in messages, the various statements in the SAML token are turned into <xref:System.IdentityModel.Policy.IAuthorizationPolicy> objects that are placed into the <xref:System.IdentityModel.Policy.AuthorizationContext>.</span></span> <span data-ttu-id="e1749-128">La propiedad <xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A> de <xref:System.IdentityModel.Policy.AuthorizationContext> devuelve las notificaciones de cada instrucción SAML y se pueden examinar para determinar si autenticar y autorizar al usuario.</span><span class="sxs-lookup"><span data-stu-id="e1749-128">The claims from each SAML statement are returned by the <xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A> property of the <xref:System.IdentityModel.Policy.AuthorizationContext> and can be examined to determine whether to authenticate and authorize the user.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1749-129">Vea también</span><span class="sxs-lookup"><span data-stu-id="e1749-129">See also</span></span>

- <xref:System.IdentityModel.Policy.AuthorizationContext>
- <xref:System.IdentityModel.Policy.IAuthorizationPolicy>
- <xref:System.IdentityModel.Claims.ClaimSet>
- [<span data-ttu-id="e1749-130">Federación</span><span class="sxs-lookup"><span data-stu-id="e1749-130">Federation</span></span>](federation.md)
- [<span data-ttu-id="e1749-131">Procedimiento para crear un cliente federado</span><span class="sxs-lookup"><span data-stu-id="e1749-131">How to: Create a Federated Client</span></span>](how-to-create-a-federated-client.md)
- [<span data-ttu-id="e1749-132">Procedimiento para configurar las credenciales en un servicio de federación</span><span class="sxs-lookup"><span data-stu-id="e1749-132">How to: Configure Credentials on a Federation Service</span></span>](how-to-configure-credentials-on-a-federation-service.md)
- [<span data-ttu-id="e1749-133">Administración de notificaciones y autorización con el modelo de identidad</span><span class="sxs-lookup"><span data-stu-id="e1749-133">Managing Claims and Authorization with the Identity Model</span></span>](managing-claims-and-authorization-with-the-identity-model.md)
- [<span data-ttu-id="e1749-134">Notificaciones y tokens</span><span class="sxs-lookup"><span data-stu-id="e1749-134">Claims and Tokens</span></span>](claims-and-tokens.md)
- [<span data-ttu-id="e1749-135">Creación de notificaciones y valores de recursos</span><span class="sxs-lookup"><span data-stu-id="e1749-135">Claim Creation and Resource Values</span></span>](claim-creation-and-resource-values.md)
- [<span data-ttu-id="e1749-136">Procedimiento para crear una notificación personalizada</span><span class="sxs-lookup"><span data-stu-id="e1749-136">How to: Create a Custom Claim</span></span>](../extending/how-to-create-a-custom-claim.md)

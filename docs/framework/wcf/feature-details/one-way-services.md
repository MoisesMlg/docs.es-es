---
title: Servicios unidireccionales
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Communication Foundation [WCF], one-way service contracts
- WCF [WCF], one-way service contracts
- service contracts [WCF], defining one-way
ms.assetid: 19053a36-4492-45a3-bfe6-0365ee0205a3
ms.openlocfilehash: c4b69d68c52e9f199348544e5838babc9f4d8c2c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96248089"
---
# <a name="one-way-services"></a><span data-ttu-id="b288f-102">Servicios unidireccionales</span><span class="sxs-lookup"><span data-stu-id="b288f-102">One-Way Services</span></span>

<span data-ttu-id="b288f-103">El comportamiento predeterminado de una operación de servicio es el patrón de solicitud-respuesta.</span><span class="sxs-lookup"><span data-stu-id="b288f-103">The default behavior of a service operation is the request-reply pattern.</span></span> <span data-ttu-id="b288f-104">En un patrón de este tipo, el cliente espera el mensaje de respuesta, aun cuando la operación de servicio se representa en código como un método `void`.</span><span class="sxs-lookup"><span data-stu-id="b288f-104">In a request-reply pattern, the client waits for the reply message, even if the service operation is represented in code as a `void` method.</span></span> <span data-ttu-id="b288f-105">Con una operación unidireccional, sólo se transmite un mensaje.</span><span class="sxs-lookup"><span data-stu-id="b288f-105">With a one-way operation, only one message is transmitted.</span></span> <span data-ttu-id="b288f-106">El receptor no envía un mensaje de respuesta, ni el remitente lo espera.</span><span class="sxs-lookup"><span data-stu-id="b288f-106">The receiver does not send a reply message, nor does the sender expect one.</span></span>  
  
 <span data-ttu-id="b288f-107">Use el patrón de diseño unidireccional:</span><span class="sxs-lookup"><span data-stu-id="b288f-107">Use the one-way design pattern:</span></span>  
  
- <span data-ttu-id="b288f-108">Cuando el cliente debe llamar a las operaciones y no está afectado por el resultado de la operación en el nivel de la operación.</span><span class="sxs-lookup"><span data-stu-id="b288f-108">When the client must call operations and is not affected by the result of the operation at the operation level.</span></span>  
  
- <span data-ttu-id="b288f-109">Cuando se usa la clase <xref:System.ServiceModel.NetMsmqBinding> o <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="b288f-109">When using the <xref:System.ServiceModel.NetMsmqBinding> or the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> class.</span></span> <span data-ttu-id="b288f-110">(Para obtener más información acerca de este escenario, vea [colas en WCF](queues-in-wcf.md)).</span><span class="sxs-lookup"><span data-stu-id="b288f-110">(For more information about this scenario, see [Queues in WCF](queues-in-wcf.md).)</span></span>  
  
 <span data-ttu-id="b288f-111">Cuando una operación es unidireccional, no hay ningún mensaje de respuesta para devolver la información de error al cliente.</span><span class="sxs-lookup"><span data-stu-id="b288f-111">When an operation is one-way, there is no response message to carry error information back to the client.</span></span> <span data-ttu-id="b288f-112">Puede detectar las condiciones de error mediante las características del enlace subyacente, como sesiones de confianza, o diseñando un contrato de servicio dúplex que utiliza dos operaciones unidireccionales; es decir, un contrato unidireccional del cliente al servicio para llamar a la operación de servicio y otro contrato unidireccional entre el servicio y el cliente para que el servicio pueda devolver los errores al cliente utilizando una devolución de llamada que el cliente implementa.</span><span class="sxs-lookup"><span data-stu-id="b288f-112">You can detect error conditions by using features of the underlying binding, such as reliable sessions, or by designing a duplex service contract that uses two one-way operations—a one-way contract from the client to the service to call service operation and another one-way contract between the service and the client so that the service can send back faults to the client using a callback that the client implements.</span></span>  
  
 <span data-ttu-id="b288f-113">Para crear un contrato de servicio unidireccional, defina su contrato de servicio, aplique la clase <xref:System.ServiceModel.OperationContractAttribute> a cada operación y establezca la propiedad <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> en `true`, tal y como se muestra en el código muestra siguiente.</span><span class="sxs-lookup"><span data-stu-id="b288f-113">To create a one-way service contract, define your service contract, apply the <xref:System.ServiceModel.OperationContractAttribute> class to each operation, and set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as shown in the following sample code.</span></span>  
  
```csharp
[ServiceContract(Namespace="http://Microsoft.ServiceModel.Samples")]  
public interface IOneWayCalculator  
{  
    [OperationContract(IsOneWay=true)]  
    void Add(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Subtract(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Multiply(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Divide(double n1, double n2);  
}  
```  
  
 <span data-ttu-id="b288f-114">Para obtener un ejemplo completo, vea el ejemplo [unidireccional](../samples/one-way.md) .</span><span class="sxs-lookup"><span data-stu-id="b288f-114">For a complete example, see the [One-Way](../samples/one-way.md) sample.</span></span>  
  
## <a name="clients-blocking-with-one-way-operations"></a><span data-ttu-id="b288f-115">Clientes que se bloquean con operaciones unidireccionales</span><span class="sxs-lookup"><span data-stu-id="b288f-115">Clients Blocking with One-Way Operations</span></span>  

 <span data-ttu-id="b288f-116">Es importante tener en cuentan que, mientras que algunas aplicaciones unidireccionales devuelven en cuanto los datos salientes se escriben en la conexión de red, en varios escenarios, la implementación de un enlace o de un servicio puede hacer que un cliente WCF se bloquee mediante operaciones unidireccionales.</span><span class="sxs-lookup"><span data-stu-id="b288f-116">It is important to realize that while some one-way applications return as soon as the outbound data is written to the network connection, in several scenarios the implementation of a binding or of a service can cause a WCF client to block using one-way operations.</span></span> <span data-ttu-id="b288f-117">En las aplicaciones cliente de WCF, el objeto de cliente de WCF no vuelve hasta que los datos salientes se hayan escrito en la conexión de red.</span><span class="sxs-lookup"><span data-stu-id="b288f-117">In WCF client applications, the WCF client object does not return until the outbound data has been written to the network connection.</span></span> <span data-ttu-id="b288f-118">Esto se cumple para todos los patrones de intercambio de mensajes, incluidas las operaciones unidireccionales, lo que significa que cualquier problema que se produzca al escribir los datos en el transporte impide que se devuelva el cliente.</span><span class="sxs-lookup"><span data-stu-id="b288f-118">This is true for all message exchange patterns, including one-way operations; this means that any problem writing the data to the transport prevents the client from returning.</span></span> <span data-ttu-id="b288f-119">Dependiendo del problema, el resultado podría ser una excepción o un retraso en el envío de mensajes al servicio.</span><span class="sxs-lookup"><span data-stu-id="b288f-119">Depending upon the problem, the result could be an exception or a delay in sending messages to the service.</span></span>  
  
 <span data-ttu-id="b288f-120">Por ejemplo, si el transporte no puede buscar el punto de conexión, se emite una excepción <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> sin mucho retraso.</span><span class="sxs-lookup"><span data-stu-id="b288f-120">For example, if the transport cannot find the endpoint, a <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> exception is thrown without much delay.</span></span> <span data-ttu-id="b288f-121">Sin embargo, también es posible que el servicio no pueda leer los datos fuera de la conexión por alguna razón, lo que evita que se devuelva la operación de envío de transporte del cliente.</span><span class="sxs-lookup"><span data-stu-id="b288f-121">However, it is also possible that the service is unable to read the data off the wire for some reason, which prevents the client transport send operation from returning.</span></span> <span data-ttu-id="b288f-122">En estos casos, si se supera el período <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> en el enlace de transporte de cliente, se emitirá <xref:System.TimeoutException?displayProperty=nameWithType>, pero no hasta que se haya superado el período de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="b288f-122">In these cases, if the <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> period on the client transport binding is exceeded, a <xref:System.TimeoutException?displayProperty=nameWithType> is thrown—but not until the timeout period has been exceeded.</span></span> <span data-ttu-id="b288f-123">También es posible activar tantos mensajes en un servicio que el servicio no pueda procesarlos sobrepasado un cierto punto.</span><span class="sxs-lookup"><span data-stu-id="b288f-123">It is also possible to fire so many messages at a service that the service cannot process them past a certain point.</span></span> <span data-ttu-id="b288f-124">En este caso también, el cliente unidireccional se bloquea hasta que el servicio pueda procesar los mensajes o hasta que se produzca una excepción.</span><span class="sxs-lookup"><span data-stu-id="b288f-124">In this case, too, the one-way client blocks until the service can process the messages or until an exception is thrown.</span></span>  
  
 <span data-ttu-id="b288f-125">Otra variación es la situación en la que la propiedad <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> del servicio está establecida en <xref:System.ServiceModel.ConcurrencyMode.Single> y el enlace utiliza sesiones.</span><span class="sxs-lookup"><span data-stu-id="b288f-125">Another variation is the situation in which the service <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ConcurrencyMode.Single> and the binding uses sessions.</span></span> <span data-ttu-id="b288f-126">En este caso, el distribuidor exige la clasificación en los mensajes entrantes (un requisito de sesiones), que evita que los mensajes subsiguientes se lean fuera de la red hasta que el servicio haya procesado el mensaje anterior para esa sesión.</span><span class="sxs-lookup"><span data-stu-id="b288f-126">In this case, the dispatcher enforces ordering on the incoming messages (a requirement of sessions), which prevents subsequent messages from being read off the network until the service has processed the preceding message for that session.</span></span> <span data-ttu-id="b288f-127">De nuevo, el cliente se bloquea, pero si una excepción se produce depende de si el servicio puede procesar los datos de espera antes de la configuración del tiempo de espera en el cliente.</span><span class="sxs-lookup"><span data-stu-id="b288f-127">Again, the client blocks, but whether an exception occurs depends upon whether the service is able to process the waiting data prior to the timeout settings on the client.</span></span>  
  
 <span data-ttu-id="b288f-128">Puede mitigar algunos de estos problemas insertando un búfer entre el objeto de cliente y la operación de envío de transporte del cliente.</span><span class="sxs-lookup"><span data-stu-id="b288f-128">You can mitigate some of this problem by inserting a buffer between the client object and the client transport's send operation.</span></span> <span data-ttu-id="b288f-129">Por ejemplo, utilizar las llamadas asincrónicas o una cola de mensajes en memoria puede permitir que el objeto de cliente devuelva rápidamente.</span><span class="sxs-lookup"><span data-stu-id="b288f-129">For example, using asynchronous calls or using an in-memory message queue can enable the client object to return quickly.</span></span> <span data-ttu-id="b288f-130">Ambos enfoques pueden aumentar la funcionalidad, pero el tamaño del grupo de subprocesos y la cola de mensajes todavía exigen límites.</span><span class="sxs-lookup"><span data-stu-id="b288f-130">Both approaches may increase functionality, but the size of the thread pool and the message queue still enforce limits.</span></span>  
  
 <span data-ttu-id="b288f-131">En su lugar, se recomienda que examine los distintos controles en el servicio así como en el cliente y después pruebe sus escenarios de aplicación para determinar la mejor configuración en cada lado.</span><span class="sxs-lookup"><span data-stu-id="b288f-131">It is recommended, instead, that you examine the various controls on the service as well as on the client, and then test your application scenarios to determine the best configuration on either side.</span></span> <span data-ttu-id="b288f-132">Por ejemplo, si el uso de sesiones está bloqueando el procesamiento de mensajes en su servicio, puede establecer la propiedad <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> en <xref:System.ServiceModel.InstanceContextMode.PerCall> de manera que una instancia del servicio diferente pueda procesar cada mensaje, y establecer <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> en <xref:System.ServiceModel.ConcurrencyMode.Multiple> para permitir que más de un subproceso envíe los mensajes cada vez.</span><span class="sxs-lookup"><span data-stu-id="b288f-132">For example, if the use of sessions is blocking the processing of messages on your service, you can set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.PerCall> so that each message can be processed by a different service instance, and set the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> to <xref:System.ServiceModel.ConcurrencyMode.Multiple> in order to allow more than one thread to dispatch messages at a time.</span></span> <span data-ttu-id="b288f-133">Otro enfoque es aumentar las cuotas de lectura de los enlaces de cliente y servicio.</span><span class="sxs-lookup"><span data-stu-id="b288f-133">Another approach is to increase the read quotas of the service and client bindings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b288f-134">Vea también</span><span class="sxs-lookup"><span data-stu-id="b288f-134">See also</span></span>

- [<span data-ttu-id="b288f-135">Unidireccional</span><span class="sxs-lookup"><span data-stu-id="b288f-135">One-Way</span></span>](../samples/one-way.md)

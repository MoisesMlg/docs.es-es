---
title: Hospedar servicios de flujo de trabajo
ms.date: 03/30/2017
ms.assetid: 2d55217e-8697-4113-94ce-10b60863342e
ms.openlocfilehash: 3bd45575e06ba742b0e6c43766c5e80dff47c03b
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96256006"
---
# <a name="hosting-workflow-services"></a><span data-ttu-id="abeef-102">Hospedar servicios de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="abeef-102">Hosting Workflow Services</span></span>

<span data-ttu-id="abeef-103">Debe hospedarse un servicio del flujo de trabajo para que responda a los mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="abeef-103">A workflow service must be hosted for it to respond to incoming messages.</span></span> <span data-ttu-id="abeef-104">Los servicios del flujo de trabajo usan la infraestructura de mensajería de WCF y, por lo tanto, se hospedan de maneras similares.</span><span class="sxs-lookup"><span data-stu-id="abeef-104">Workflow services use the WCF messaging infrastructure and are therefore hosted in similar ways.</span></span> <span data-ttu-id="abeef-105">Al igual que los servicios WCF, los servicios de flujo de trabajo se pueden hospedar en cualquier aplicación administrada, en Internet Information Services (IIS) o en Windows Process Activation Services (WAS).</span><span class="sxs-lookup"><span data-stu-id="abeef-105">Like WCF services, workflow services can be hosted in any managed application, under Internet Information Services (IIS), or under Windows Process Activation Services (WAS).</span></span> <span data-ttu-id="abeef-106">Además, los servicios de flujo de trabajo se pueden hospedar en Windows Server App fabric.</span><span class="sxs-lookup"><span data-stu-id="abeef-106">In addition, workflow services can be hosted under Windows Server App Fabric.</span></span> <span data-ttu-id="abeef-107">Para obtener más información acerca de Windows Server App fabric, consulte la [documentación de Windows Server App fabric](/previous-versions/appfabric/ff384253(v=azure.10)), [características de hospedaje de AppFabric](/previous-versions/appfabric/ee677189(v=azure.10))y conceptos de hospedaje de [AppFabric](/previous-versions/appfabric/ee677371(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="abeef-107">For more information about Windows Server App Fabric see [Windows Server App Fabric documentation](/previous-versions/appfabric/ff384253(v=azure.10)), [AppFabric Hosting Features](/previous-versions/appfabric/ee677189(v=azure.10)), and [AppFabric Hosting Concepts](/previous-versions/appfabric/ee677371(v=azure.10)).</span></span> <span data-ttu-id="abeef-108">Para obtener más información acerca de las distintas formas de hospedar servicios WCF, vea [servicios de hospedaje](../hosting-services.md).</span><span class="sxs-lookup"><span data-stu-id="abeef-108">For more information about the various ways to host WCF services see [Hosting Services](../hosting-services.md).</span></span>

## <a name="hosting-in-a-managed-application"></a><span data-ttu-id="abeef-109">Hospedar en una aplicación administrada</span><span class="sxs-lookup"><span data-stu-id="abeef-109">Hosting in a managed application</span></span>

 <span data-ttu-id="abeef-110">Para hospedar un servicio de flujo de trabajo en una aplicación administrada, use la clase <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="abeef-110">To host a workflow service in a managed application, use the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="abeef-111">El constructor <xref:System.ServiceModel.Activities.WorkflowServiceHost> le permite especificar una instancia de servicio del flujo de trabajo singleton, una definición del servicio de flujo de trabajo o una actividad que usa las actividades de mensajería de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="abeef-111">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> constructor allows you to specify a singleton workflow service instance, a workflow service definition, or an activity that uses the workflow messaging activities.</span></span> <span data-ttu-id="abeef-112">Una llamada al método <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> hace que el servicio comience a realizar escuchas de los mensajes entrantes.</span><span class="sxs-lookup"><span data-stu-id="abeef-112">Calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> causes the service to start listening for incoming messages.</span></span>

## <a name="hosting-under-iis-or-was"></a><span data-ttu-id="abeef-113">Hospedar en IIS o WAS</span><span class="sxs-lookup"><span data-stu-id="abeef-113">Hosting under IIS or WAS</span></span>

 <span data-ttu-id="abeef-114">Hospedar un servicio de flujo de trabajo en IIS o FUE implica la creación de un directorio virtual y la colocación de archivos en el directorio virtual para definir el servicio y su comportamiento.</span><span class="sxs-lookup"><span data-stu-id="abeef-114">Hosting a workflow service under IIS or WAS involves creating a virtual directory and placing files in the virtual directory that define the service and its behavior.</span></span> <span data-ttu-id="abeef-115">Al hospedar un servicio de flujo de trabajo en IIS o WAS, existen varias posibilidades:</span><span class="sxs-lookup"><span data-stu-id="abeef-115">When hosting a workflow service under IIS or WAS there are several possibilities:</span></span>

- <span data-ttu-id="abeef-116">Coloque un archivo .xamlx que defina el servicio de flujo de trabajo en un directorio virtual de IIS/WAS junto con un archivo Web.config que especifique los comportamientos del servicio, los puntos de conexión y otros elementos de configuración.</span><span class="sxs-lookup"><span data-stu-id="abeef-116">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory along with a Web.config file that specifies the service behaviors, endpoints, and other configuration elements.</span></span>

- <span data-ttu-id="abeef-117">Coloque en un directorio virtual de IIS/WAS un archivo .xamlx que defina el servicio del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="abeef-117">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="abeef-118">El archivo .xamlx especifica los extremos que se van a exponer.</span><span class="sxs-lookup"><span data-stu-id="abeef-118">The .xamlx file specifies the endpoints to expose.</span></span> <span data-ttu-id="abeef-119">Los extremos se especifican en un elemento `WorkflowService.Endpoints`, como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="abeef-119">Endpoints are specified in a `WorkflowService.Endpoints` element as shown in the following example.</span></span>

    ```xml
    <WorkflowService xmlns="http://schemas.microsoft.com/netfx/2009/xaml/servicemodel"  xmlns:p1="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
      <WorkflowService.Endpoints>
        <Endpoint ServiceContractName="IWorkFlowEchoService" AddressUri="">
          <Endpoint.Binding>
            <BasicHttpBinding />
          </Endpoint.Binding>
        </Endpoint>
      </WorkflowService.Endpoints>
    <!-- ... -->
    </WorkflowService>
    ```

    > [!NOTE]
    > <span data-ttu-id="abeef-120">Los comportamientos no se pueden especificar en un archivo .xamlx, de modo que debe usar un archivo Web.config si necesita especificar la configuración del comportamiento.</span><span class="sxs-lookup"><span data-stu-id="abeef-120">Behaviors cannot be specified in a .xamlx file, so you must use a Web.config if you need to specify behavior settings.</span></span>

- <span data-ttu-id="abeef-121">Coloque en un directorio virtual de IIS/WAS un archivo .xamlx que defina el servicio del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="abeef-121">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="abeef-122">Además, coloque un archivo .svc en el directorio virtual.</span><span class="sxs-lookup"><span data-stu-id="abeef-122">In addition, place a .svc file in the virtual directory.</span></span> <span data-ttu-id="abeef-123">El archivo .svc le permite especificar un generador de host de servicio Web personalizado, aplicar el comportamiento personalizado o cargar la configuración desde una ubicación personalizada.</span><span class="sxs-lookup"><span data-stu-id="abeef-123">The .svc file allows you to specify a custom Web service host factory, apply custom behavior, or load configuration from a custom location.</span></span>

- <span data-ttu-id="abeef-124">Coloque en el directorio virtual de IIS/WAS un ensamblado que contenga una actividad que use las actividades de mensajería de WF.</span><span class="sxs-lookup"><span data-stu-id="abeef-124">Place an assembly in the IIS/WAS virtual directory that contains an activity that uses the WCF messaging activities.</span></span>

 <span data-ttu-id="abeef-125">Un archivo. xamlx que define un servicio de flujo de trabajo debe contener un <`Service`> elemento raíz o un elemento raíz que contenga cualquier tipo derivado de <xref:System.Workflow.ComponentModel.Activity> .</span><span class="sxs-lookup"><span data-stu-id="abeef-125">A .xamlx file that defines a workflow service must contain a <`Service`> root element or a root element that contains any type derived from <xref:System.Workflow.ComponentModel.Activity>.</span></span> <span data-ttu-id="abeef-126">Al usar la plantilla de actividad de Visual Studio, se crea un archivo. xamlx.</span><span class="sxs-lookup"><span data-stu-id="abeef-126">When using the Visual Studio activity template, a .xamlx file is created.</span></span> <span data-ttu-id="abeef-127">Cuando se usa la plantilla de servicio de flujo de trabajo WCF, se crea un archivo. xamlx.</span><span class="sxs-lookup"><span data-stu-id="abeef-127">When using the WCF Workflow Service template, a .xamlx file is created.</span></span>

## <a name="hosting-workflow-services-under-windows-server-app-fabric"></a><span data-ttu-id="abeef-128">Hospedar servicios de flujo de trabajo en Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="abeef-128">Hosting Workflow Services under Windows Server App Fabric</span></span>

 <span data-ttu-id="abeef-129">El hospedaje de un servicio de flujo de trabajo en Windows Server App Fabric se realiza del mismo modo que el hospedaje en IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="abeef-129">Hosting a workflow service under Windows Server App Fabric is done in the same way as hosting under IIS/WAS.</span></span> <span data-ttu-id="abeef-130">La única diferencia es el hecho de que Windows Server App Fabric se instala.</span><span class="sxs-lookup"><span data-stu-id="abeef-130">The only difference is the fact that Windows Server App Fabric is installed.</span></span> <span data-ttu-id="abeef-131">Windows Server App fabric proporciona herramientas que se agregan al administrador de Internet Information Services, así como a commandlets de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="abeef-131">Windows Server App Fabric provides tools that are added to Internet Information Services Manager, as well as PowerShell commandlets.</span></span> <span data-ttu-id="abeef-132">Estas herramientas simplifican la implementación, la administración y el seguimiento de los servicios de flujo de trabajo y los servicios WCF.</span><span class="sxs-lookup"><span data-stu-id="abeef-132">These tools simplify deploying, managing, and tracking of workflow services and WCF services.</span></span>

## <a name="referencing-custom-activities"></a><span data-ttu-id="abeef-133">Hacer referencia a actividades personalizadas</span><span class="sxs-lookup"><span data-stu-id="abeef-133">Referencing Custom Activities</span></span>

 <span data-ttu-id="abeef-134">Las referencias a las actividades personalizadas se deben agregar a la `Assemblies` sección <> en <`System.Web.Compilation`> para que se carguen en el dominio de aplicación y el deserializador XAML pueda buscar los tipos.</span><span class="sxs-lookup"><span data-stu-id="abeef-134">References to custom activities must be added to the <`Assemblies`> section under <`System.Web.Compilation`> so that they are loaded into the Application Domain and the XAML deserializer is able to locate the types.</span></span> <span data-ttu-id="abeef-135">Esta configuración se puede realizar en el nivel de la aplicación o en el archivo Web.config de la raíz si la configuración se debe aplicar a todas las aplicaciones del equipo.</span><span class="sxs-lookup"><span data-stu-id="abeef-135">These settings can be made at the application level or in the root Web.config if the settings should be applied to all applications on the machine.</span></span>

## <a name="deployment"></a><span data-ttu-id="abeef-136">Implementación</span><span class="sxs-lookup"><span data-stu-id="abeef-136">Deployment</span></span>

 <span data-ttu-id="abeef-137">La herramienta de implementación web se ha creado para facilitar el trabajo de implementación.</span><span class="sxs-lookup"><span data-stu-id="abeef-137">The Web Deployment tool has been created to make the job of deployment easier.</span></span> <span data-ttu-id="abeef-138">La herramienta le permite migrar las aplicaciones entre IIS 6.0 e IIS 7.0, sincronizar las granjas de servidores y empaquetar, archivar e implementar las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="abeef-138">The tool allows you to migrate applications between IIS 6.0 and IIS 7.0, synchronize server farms, and package, archive and deploy Web applications.</span></span> <span data-ttu-id="abeef-139">Para obtener más información, consulte [herramienta de implementación de MS](https://go.microsoft.com/fwlink/?LinkId=178690).</span><span class="sxs-lookup"><span data-stu-id="abeef-139">For more information, see [MS Deployment Tool](https://go.microsoft.com/fwlink/?LinkId=178690).</span></span>

## <a name="see-also"></a><span data-ttu-id="abeef-140">Vea también</span><span class="sxs-lookup"><span data-stu-id="abeef-140">See also</span></span>

- [<span data-ttu-id="abeef-141">Información interna de extensiones del host de servicio de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="abeef-141">Workflow Service Host Internals</span></span>](workflow-service-host-internals.md)
- [<span data-ttu-id="abeef-142">Configurar WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="abeef-142">Configuring WorkflowServiceHost</span></span>](configuring-workflowservicehost.md)

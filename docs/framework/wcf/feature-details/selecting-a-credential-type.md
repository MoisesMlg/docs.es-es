---
title: Selección de tipos de credenciales
description: Obtenga información sobre las credenciales, cómo se usan en WCF y cómo seleccionar la credencial adecuada para que la aplicación establezca una identidad o funcionalidad reclamada.
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: c5a47bf95ab8e22cda1beb7eeca7cb77bfc2a169
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96253978"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="e30e1-103">Selección de tipos de credenciales</span><span class="sxs-lookup"><span data-stu-id="e30e1-103">Selecting a Credential Type</span></span>

<span data-ttu-id="e30e1-104">Las *credenciales* son el Windows Communication Foundation de datos (WCF) que usa para establecer una identidad reclamada o capacidades.</span><span class="sxs-lookup"><span data-stu-id="e30e1-104">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="e30e1-105">Por ejemplo, una contraseña es una credencial que un gobierno emite para demostrar la ciudadanía en un país o región.</span><span class="sxs-lookup"><span data-stu-id="e30e1-105">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="e30e1-106">En WCF, las credenciales pueden adoptar muchas formas, como los tokens de nombre de usuario y los certificados X. 509.</span><span class="sxs-lookup"><span data-stu-id="e30e1-106">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="e30e1-107">En este tema se describen las credenciales, cómo se usan en WCF y cómo seleccionar las credenciales adecuadas para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e30e1-107">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="e30e1-108">En muchos países y regiones, un permiso de conducir es un ejemplo de credencial.</span><span class="sxs-lookup"><span data-stu-id="e30e1-108">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="e30e1-109">Un permiso de conducir contiene datos que representan la identidad de una persona y su capacitación.</span><span class="sxs-lookup"><span data-stu-id="e30e1-109">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="e30e1-110">Contiene prueba de posesión en forma de la imagen del poseedor.</span><span class="sxs-lookup"><span data-stu-id="e30e1-110">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="e30e1-111">Una entidad emisora de confianza emite las licencias, normalmente, un departamento gubernamental de licencias.</span><span class="sxs-lookup"><span data-stu-id="e30e1-111">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="e30e1-112">Se sella la licencia, que puede contener un holograma, que muestra que no se ha manipulado o falsificado.</span><span class="sxs-lookup"><span data-stu-id="e30e1-112">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="e30e1-113">La presentación de una credencial implica la presentación de los datos y de la prueba de posesión de los datos.</span><span class="sxs-lookup"><span data-stu-id="e30e1-113">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="e30e1-114">WCF admite una variedad de tipos de credenciales en los niveles de seguridad de transporte y de mensaje.</span><span class="sxs-lookup"><span data-stu-id="e30e1-114">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="e30e1-115">Por ejemplo, considere dos tipos de credenciales que se admiten en WCF: el nombre de usuario y las credenciales de certificado (X. 509).</span><span class="sxs-lookup"><span data-stu-id="e30e1-115">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="e30e1-116">Para la credencial del nombre de usuario, el nombre de usuario representa la identidad exigida y la contraseña proporciona la prueba de posesión.</span><span class="sxs-lookup"><span data-stu-id="e30e1-116">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="e30e1-117">La autoridad de confianza en este caso es el sistema que valida el nombre de usuario y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="e30e1-117">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="e30e1-118">Con una credencial de certificado X. 509, el nombre del firmante, el nombre alternativo del firmante o los campos específicos dentro del certificado se pueden usar como notificaciones de identidad, mientras que otros campos, como los `Valid From` `Valid To` campos y, especifican la validez del certificado.</span><span class="sxs-lookup"><span data-stu-id="e30e1-118">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="e30e1-119">Tipos de credencial de transporte</span><span class="sxs-lookup"><span data-stu-id="e30e1-119">Transport Credential Types</span></span>  

 <span data-ttu-id="e30e1-120">La tabla siguiente muestra los posibles tipos de credenciales de cliente que pueden ser utilizadas por un enlace en modo de seguridad de transporte.</span><span class="sxs-lookup"><span data-stu-id="e30e1-120">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="e30e1-121">Cuando se crea un servicio, establezca la propiedad `ClientCredentialType` en uno de estos valores para especificar el tipo de credencial que el cliente debe proporcionar con el fin de comunicarse con su servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-121">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="e30e1-122">Puede establecer los tipos en código o archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="e30e1-122">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="e30e1-123">Configuración</span><span class="sxs-lookup"><span data-stu-id="e30e1-123">Setting</span></span>|<span data-ttu-id="e30e1-124">Descripción</span><span class="sxs-lookup"><span data-stu-id="e30e1-124">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="e30e1-125">None</span><span class="sxs-lookup"><span data-stu-id="e30e1-125">None</span></span>|<span data-ttu-id="e30e1-126">Especifica que el cliente no necesita presentar ningún credencial.</span><span class="sxs-lookup"><span data-stu-id="e30e1-126">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="e30e1-127">Realiza una conversión a un cliente anónimo.</span><span class="sxs-lookup"><span data-stu-id="e30e1-127">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="e30e1-128">Básico</span><span class="sxs-lookup"><span data-stu-id="e30e1-128">Basic</span></span>|<span data-ttu-id="e30e1-129">Especifica la autenticación básica para el cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-129">Specifies basic authentication for the client.</span></span> <span data-ttu-id="e30e1-130">Para obtener más información, vea RFC2617:[autenticación http: autenticación básica e implícita](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="e30e1-130">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="e30e1-131">Digest</span><span class="sxs-lookup"><span data-stu-id="e30e1-131">Digest</span></span>|<span data-ttu-id="e30e1-132">Especifica la autenticación implícita para el cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-132">Specifies digest authentication for the client.</span></span> <span data-ttu-id="e30e1-133">Para obtener más información, vea RFC2617:[autenticación http: autenticación básica e implícita](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="e30e1-133">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="e30e1-134">Ntlm</span><span class="sxs-lookup"><span data-stu-id="e30e1-134">Ntlm</span></span>|<span data-ttu-id="e30e1-135">Especifica protocolo de autenticación de Windows NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="e30e1-135">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="e30e1-136">Se utiliza esto cuando, por algún motivo, no puede utilizar la autenticación Kerberos.</span><span class="sxs-lookup"><span data-stu-id="e30e1-136">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="e30e1-137">También puede deshabilitar su uso como reserva si establece la <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> propiedad en `false` , lo que hace que WCF realice el mejor esfuerzo para producir una excepción si se usa NTLM.</span><span class="sxs-lookup"><span data-stu-id="e30e1-137">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="e30e1-138">Tenga en cuenta que, aunque se establezca esta propiedad en `false`, es posible que se envíen igualmente las credenciales NTLM a través de la conexión.</span><span class="sxs-lookup"><span data-stu-id="e30e1-138">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="e30e1-139">Windows</span><span class="sxs-lookup"><span data-stu-id="e30e1-139">Windows</span></span>|<span data-ttu-id="e30e1-140">Especifica la autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="e30e1-140">Specifies Windows authentication.</span></span> <span data-ttu-id="e30e1-141">Para especificar solo el protocolo Kerberos en un dominio de Windows, establezca la propiedad <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> en `false` (el valor predeterminado es `true`).</span><span class="sxs-lookup"><span data-stu-id="e30e1-141">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="e30e1-142">Certificado</span><span class="sxs-lookup"><span data-stu-id="e30e1-142">Certificate</span></span>|<span data-ttu-id="e30e1-143">Realiza la autenticación del cliente mediante un certificado X.509.</span><span class="sxs-lookup"><span data-stu-id="e30e1-143">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="e30e1-144">Contraseña</span><span class="sxs-lookup"><span data-stu-id="e30e1-144">Password</span></span>|<span data-ttu-id="e30e1-145">El usuario debe proporcionar un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="e30e1-145">User must supply a user name and password.</span></span> <span data-ttu-id="e30e1-146">Valide el par nombre de usuario/contraseña mediante autenticación de Windows u otra solución personalizada.</span><span class="sxs-lookup"><span data-stu-id="e30e1-146">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="e30e1-147">Tipos de credencial de cliente de mensaje</span><span class="sxs-lookup"><span data-stu-id="e30e1-147">Message Client Credential Types</span></span>  

 <span data-ttu-id="e30e1-148">La tabla siguiente muestra los posibles tipos de credencial que puede utilizar al crear una aplicación que utiliza el modo de seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="e30e1-148">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="e30e1-149">Puede utilizar estos valores en código o archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="e30e1-149">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="e30e1-150">Configuración</span><span class="sxs-lookup"><span data-stu-id="e30e1-150">Setting</span></span>|<span data-ttu-id="e30e1-151">Descripción</span><span class="sxs-lookup"><span data-stu-id="e30e1-151">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="e30e1-152">None</span><span class="sxs-lookup"><span data-stu-id="e30e1-152">None</span></span>|<span data-ttu-id="e30e1-153">Especifica que el cliente no necesita presentar una credencial.</span><span class="sxs-lookup"><span data-stu-id="e30e1-153">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="e30e1-154">Realiza una conversión a un cliente anónimo.</span><span class="sxs-lookup"><span data-stu-id="e30e1-154">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="e30e1-155">Windows</span><span class="sxs-lookup"><span data-stu-id="e30e1-155">Windows</span></span>|<span data-ttu-id="e30e1-156">Permite que se produzcan los intercambios del mensaje SOAP bajo el contexto de seguridad establecido con una credencial de Windows.</span><span class="sxs-lookup"><span data-stu-id="e30e1-156">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="e30e1-157">Nombre de usuario</span><span class="sxs-lookup"><span data-stu-id="e30e1-157">Username</span></span>|<span data-ttu-id="e30e1-158">Permite al servicio requerir que el cliente se autentique con una credencial de nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="e30e1-158">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="e30e1-159">Tenga en cuenta que WCF no permite ninguna operación criptográfica con nombres de usuario, como generar una firma o cifrar datos.</span><span class="sxs-lookup"><span data-stu-id="e30e1-159">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="e30e1-160">WCF garantiza que el transporte está protegido cuando se usan credenciales de nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="e30e1-160">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="e30e1-161">Certificado</span><span class="sxs-lookup"><span data-stu-id="e30e1-161">Certificate</span></span>|<span data-ttu-id="e30e1-162">Permite que el servicio exija la autenticación del cliente mediante un certificado X.509.</span><span class="sxs-lookup"><span data-stu-id="e30e1-162">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="e30e1-163">Token emitido</span><span class="sxs-lookup"><span data-stu-id="e30e1-163">Issued Token</span></span>|<span data-ttu-id="e30e1-164">Un tipo de token personalizado configurado según una directiva de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e30e1-164">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="e30e1-165">El tipo de token predeterminado es Lenguaje de marcado de aserción de seguridad (SAML).</span><span class="sxs-lookup"><span data-stu-id="e30e1-165">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="e30e1-166">Un servicio de token seguro emite el token.</span><span class="sxs-lookup"><span data-stu-id="e30e1-166">The token is issued by a secure token service.</span></span> <span data-ttu-id="e30e1-167">Para obtener más información, vea [Federación y tokens emitidos](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e30e1-167">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="e30e1-168">Modelo de negociación de credenciales de servicio</span><span class="sxs-lookup"><span data-stu-id="e30e1-168">Negotiation Model of Service Credentials</span></span>  

 <span data-ttu-id="e30e1-169">La *negociación* es el proceso por el que se establece la confianza entre un cliente y un servicio mediante el intercambio de credenciales.</span><span class="sxs-lookup"><span data-stu-id="e30e1-169">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="e30e1-170">El proceso se realiza de forma iterativa entre el cliente y el servicio, con el fin de divulgar solo la información necesaria para el paso siguiente en el proceso de la negociación.</span><span class="sxs-lookup"><span data-stu-id="e30e1-170">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="e30e1-171">En la práctica, el resultado final es la entrega de un credencial de servicio al cliente que se utilizará en operaciones posteriores.</span><span class="sxs-lookup"><span data-stu-id="e30e1-171">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="e30e1-172">Con una excepción, de forma predeterminada, los enlaces proporcionados por el sistema en WCF negocian la credencial de servicio automáticamente al usar la seguridad de nivel de mensaje.</span><span class="sxs-lookup"><span data-stu-id="e30e1-172">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="e30e1-173">(La excepción es <xref:System.ServiceModel.BasicHttpBinding> , que no habilita la seguridad de forma predeterminada). Para deshabilitar este comportamiento, vea <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> las <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> propiedades y.</span><span class="sxs-lookup"><span data-stu-id="e30e1-173">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e30e1-174">Cuando se usa la seguridad SSL con .NET Framework 3,5 y versiones posteriores, un cliente de WCF usa ambos certificados intermedios en su almacén de certificados y los certificados intermedios recibidos durante la negociación SSL para realizar la validación de la cadena de certificados en el certificado del servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-174">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="e30e1-175">.NET Framework 3.0 solo usa los certificados intermedios instalados en el almacén de certificados local.</span><span class="sxs-lookup"><span data-stu-id="e30e1-175">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="e30e1-176">Negociación fuera de banda</span><span class="sxs-lookup"><span data-stu-id="e30e1-176">Out-of-Band Negotiation</span></span>  

 <span data-ttu-id="e30e1-177">Si la negociación automática está deshabilitada, la credencial de servicio se debe aprovisionar al cliente antes de enviar mensaje al servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-177">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="e30e1-178">Esto también se conoce como aprovisionamiento *fuera de banda* .</span><span class="sxs-lookup"><span data-stu-id="e30e1-178">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="e30e1-179">Por ejemplo, si el tipo de credencial especificado es un certificado, y la negociación automática está deshabilitada, el cliente se debe ponerse en contacto con el propietario del servicio para recibir e instalar el certificado en el equipo que ejecuta la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-179">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="e30e1-180">Se puede hacer, por ejemplo, cuando se desea controlar de forma estricta qué clientes pueden tener acceso a un servicio en un escenario entre empresas.</span><span class="sxs-lookup"><span data-stu-id="e30e1-180">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="e30e1-181">Esta negociación fuera de banda se puede realizar en el correo electrónico y el certificado X. 509 se almacena en el almacén de certificados de Windows, utilizando una herramienta como el complemento certificados de Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="e30e1-181">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e30e1-182">La propiedad <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> se utiliza para proporcionar al servicio un certificado logrado a través de la negociación fuera de banda.</span><span class="sxs-lookup"><span data-stu-id="e30e1-182">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="e30e1-183">Esto es necesario cuando se utiliza la clase <xref:System.ServiceModel.BasicHttpBinding> porque el enlace no permite la negociación automatizada.</span><span class="sxs-lookup"><span data-stu-id="e30e1-183">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="e30e1-184">La propiedad también se utiliza en un escenario dúplex no correlacionado.</span><span class="sxs-lookup"><span data-stu-id="e30e1-184">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="e30e1-185">Éste es un escenario donde un servidor envía un mensaje al cliente sin exigir al cliente que envíe primero una solicitud al servidor.</span><span class="sxs-lookup"><span data-stu-id="e30e1-185">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="e30e1-186">Dado que el servidor no tiene una solicitud del cliente, debe utilizar el certificado del cliente para cifrar el mensaje al cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-186">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="e30e1-187">Configurar los valores de credenciales</span><span class="sxs-lookup"><span data-stu-id="e30e1-187">Setting Credential Values</span></span>  

 <span data-ttu-id="e30e1-188">Cuando selecciona un modo de seguridad, debe especificar las credenciales reales.</span><span class="sxs-lookup"><span data-stu-id="e30e1-188">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="e30e1-189">Por ejemplo, si el tipo de credencial se establece para "certificado", a continuación, debe asociar una credencial específica (como un certificado X.509 específico) al servicio o cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-189">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="e30e1-190">Según si está programando un servicio o un cliente, el método para establecer el valor de credencial difiere ligeramente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-190">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="e30e1-191">Establecer credenciales de servicio</span><span class="sxs-lookup"><span data-stu-id="e30e1-191">Setting Service Credentials</span></span>  

 <span data-ttu-id="e30e1-192">Si está usando el modo de transporte, y está usando HTTP como el transporte, debe usar Internet Information Services (IIS) o configurar el puerto con un certificado.</span><span class="sxs-lookup"><span data-stu-id="e30e1-192">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="e30e1-193">Para obtener más información, vea [información general sobre la seguridad de transporte](transport-security-overview.md) y seguridad de [transporte http](http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="e30e1-193">For more information, see [Transport Security Overview](transport-security-overview.md) and [HTTP Transport Security](http-transport-security.md).</span></span>  
  
 <span data-ttu-id="e30e1-194">Para proporcionar un servicio con credenciales en código, cree una instancia de la clase <xref:System.ServiceModel.ServiceHost> y especifique la credencial adecuada utilizando la clase <xref:System.ServiceModel.Description.ServiceCredentials>, a la cual se puede obtener acceso a través de la propiedad <xref:System.ServiceModel.ServiceHostBase.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="e30e1-194">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="e30e1-195">Establecer un certificado</span><span class="sxs-lookup"><span data-stu-id="e30e1-195">Setting a Certificate</span></span>  

 <span data-ttu-id="e30e1-196">Para proporcionar un servicio con un certificado X.509 que utilizará para autenticar el servicio a los clientes, utilice el método <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> de la clase <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="e30e1-196">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="e30e1-197">Para proporcionar un servicio con un certificado de cliente, utilice el método <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> de la clase <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="e30e1-197">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="e30e1-198">Configurar las credenciales de Windows.</span><span class="sxs-lookup"><span data-stu-id="e30e1-198">Setting Windows Credentials</span></span>  

 <span data-ttu-id="e30e1-199">Si el cliente especifica un nombre de usuario y contraseña válidos, esa credencial se utiliza para autenticar el cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-199">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="e30e1-200">De lo contrario, se utilizan las credenciales de usuario actualmente conectado.</span><span class="sxs-lookup"><span data-stu-id="e30e1-200">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="e30e1-201">Configurar las credenciales de cliente</span><span class="sxs-lookup"><span data-stu-id="e30e1-201">Setting Client Credentials</span></span>  

 <span data-ttu-id="e30e1-202">En WCF, las aplicaciones cliente usan un cliente WCF para conectarse a los servicios.</span><span class="sxs-lookup"><span data-stu-id="e30e1-202">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="e30e1-203">Cada cliente deriva a partir de la clase <xref:System.ServiceModel.ClientBase%601> y la propiedad <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> en el cliente permite la especificación de varios valores de credenciales de cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-203">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="e30e1-204">Establecer un certificado</span><span class="sxs-lookup"><span data-stu-id="e30e1-204">Setting a Certificate</span></span>  

 <span data-ttu-id="e30e1-205">Para proporcionar un servicio con un certificado X.509 utilizado para autenticar el cliente a un servicio, utilice el método <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> de la clase <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>.</span><span class="sxs-lookup"><span data-stu-id="e30e1-205">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="e30e1-206">Cómo se utilizan las credenciales de cliente para autenticar un cliente al servicio</span><span class="sxs-lookup"><span data-stu-id="e30e1-206">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  

 <span data-ttu-id="e30e1-207">Se proporciona la información de credenciales de cliente exigida para comunicarse con un servicio utilizando la propiedad <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> o la propiedad <xref:System.ServiceModel.ChannelFactory.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="e30e1-207">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="e30e1-208">El canal de seguridad utiliza esta información para autenticar el cliente al servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-208">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="e30e1-209">La autenticación se logra a través de uno de estos dos modos:</span><span class="sxs-lookup"><span data-stu-id="e30e1-209">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="e30e1-210">Las credenciales de cliente se utilizan una vez antes de que se envíe el primer mensaje, utilizando la instancia de cliente de WCF para establecer un contexto de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e30e1-210">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="e30e1-211">Todos los mensajes de la aplicación se protegen a continuación a través del contexto de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e30e1-211">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="e30e1-212">Las credenciales del cliente se utilizan para autenticar cada mensaje de la aplicación enviado al servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-212">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="e30e1-213">En este caso, no se establece ningún contexto entre el cliente y el servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-213">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="e30e1-214">No se pueden cambiar las identidades establecidas</span><span class="sxs-lookup"><span data-stu-id="e30e1-214">Established Identities Cannot Be Changed</span></span>  

 <span data-ttu-id="e30e1-215">Cuando se utiliza el primer método, el contexto establecido está asociado permanentemente a la identidad del cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-215">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="e30e1-216">Es decir, una vez se ha establecido el contexto de seguridad, no se puede cambiar la identidad asociada al cliente.</span><span class="sxs-lookup"><span data-stu-id="e30e1-216">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="e30e1-217">Hay una situación que conviene tener en cuenta, que es cuando no se puede intercambiar la identidad (es decir, cuando el establecimiento del contexto de seguridad está activado, que es el comportamiento predeterminado).</span><span class="sxs-lookup"><span data-stu-id="e30e1-217">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="e30e1-218">Si crea un servicio que se comunica con un segundo servicio, no se puede cambiar la identidad utilizada para abrir el cliente de WCF en el segundo servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-218">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="e30e1-219">Esto es un problema si varios clientes pueden utilizar el primer servicio y el servicio suplanta a los clientes cuando tiene acceso al segundo servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-219">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="e30e1-220">Si el servicio reutiliza el mismo cliente para todos los autores de llamadas, todas las llamadas al segundo servicio se hacen bajo la identidad del primer autor de llamada que se utilizó para abrir el cliente al segundo servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-220">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="e30e1-221">En otras palabras, el servicio utiliza la identidad del primer cliente para que todos sus clientes se comuniquen con el segundo servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-221">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="e30e1-222">Esto puede llevar a la elevación de privilegios.</span><span class="sxs-lookup"><span data-stu-id="e30e1-222">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="e30e1-223">Si éste no es el comportamiento deseado de su servicio, debe seguir a cada autor de llamada y crear un nuevo cliente al segundo servicio para cada autor de llamada distinto y asegurarse de que el servicio utiliza solo el cliente correcto para que el autor de llamada se comunique con el segundo servicio.</span><span class="sxs-lookup"><span data-stu-id="e30e1-223">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="e30e1-224">Para obtener más información sobre las credenciales y las sesiones seguras, vea [consideraciones de seguridad para las sesiones seguras](security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="e30e1-224">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e30e1-225">Vea también</span><span class="sxs-lookup"><span data-stu-id="e30e1-225">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="e30e1-226">Conceptos de seguridad</span><span class="sxs-lookup"><span data-stu-id="e30e1-226">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="e30e1-227">Protección de servicios y clientes</span><span class="sxs-lookup"><span data-stu-id="e30e1-227">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="e30e1-228">Programación de la seguridad de WCF</span><span class="sxs-lookup"><span data-stu-id="e30e1-228">Programming WCF Security</span></span>](programming-wcf-security.md)
- [<span data-ttu-id="e30e1-229">Seguridad de transporte HTTP</span><span class="sxs-lookup"><span data-stu-id="e30e1-229">HTTP Transport Security</span></span>](http-transport-security.md)

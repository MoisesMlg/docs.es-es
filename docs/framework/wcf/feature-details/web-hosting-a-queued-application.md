---
title: Alojamiento web de una aplicación en cola
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: c2b41ee1d0a82693760bc3e1b6144d2190153f24
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96249779"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="a8ad4-102">Alojamiento web de una aplicación en cola</span><span class="sxs-lookup"><span data-stu-id="a8ad4-102">Web Hosting a Queued Application</span></span>

<span data-ttu-id="a8ad4-103">El Servicio de activación de procesos de Windows (WAS) administra la activación y la duración de los procesos de trabajo que contienen aplicaciones que hospedan los servicios de Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="a8ad4-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="a8ad4-104">El modelo de proceso de WAS generaliza el proceso IIS 6.0 para el servidor HTTP mediante la eliminación de la dependencia en HTTP.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-104">The WAS process model generalizes the IIS 6.0 process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="a8ad4-105">Esto permite a los servicios WCF usar protocolos HTTP y que no sean HTTP, como net. MSMQ y MSMQ. FormatName, en un entorno de hospedaje que admita la activación basada en mensaje y ofrece la posibilidad de hospedar un gran número de aplicaciones en un equipo determinado.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="a8ad4-106">WAS incluye un servicio de activación de Message Queuing (MSMQ) que activa una aplicación en cola cuando hay uno o más mensajes en una de las colas que la aplicación usa.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="a8ad4-107">El servicio de activación MSMQ es un servicio NT que se inicia automáticamente de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="a8ad4-108">Para obtener más información acerca de WAS y sus ventajas, consulte [hospedaje en el servicio de activación de procesos de Windows](hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="a8ad4-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="a8ad4-109">Para obtener más información acerca de MSMQ, consulte [información general sobre colas](queues-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a8ad4-109">For more information about MSMQ, see [Queues Overview](queues-overview.md).</span></span>
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="a8ad4-110">Direccionamiento de la cola en WAS</span><span class="sxs-lookup"><span data-stu-id="a8ad4-110">Queue Addressing in WAS</span></span>  

 <span data-ttu-id="a8ad4-111">Las aplicaciones de WAS tienen direcciones de Identificador uniforme de recursos (URI).</span><span class="sxs-lookup"><span data-stu-id="a8ad4-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="a8ad4-112">Las direcciones de la aplicación tienen dos partes: un prefijo base de URI y un específico de la aplicación, dirección relativa (ruta de acceso).</span><span class="sxs-lookup"><span data-stu-id="a8ad4-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="a8ad4-113">Estas dos partes proporcionan la dirección externa de una aplicación cuando se combinan.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="a8ad4-114">El prefijo de URI base se construye a partir del enlace de sitio y se utiliza para todas las aplicaciones del sitio, por ejemplo, "net. MSMQ: psico", "MSMQ. FormatName: psico" o "net. TCP: combinación".</span><span class="sxs-lookup"><span data-stu-id="a8ad4-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="a8ad4-115">A continuación, las direcciones de la aplicación se construyen tomando fragmentos de la ruta de acceso específica de la aplicación (como "/applicationOne") y agregándolos al prefijo de URI base para llegar al URI completo de la aplicación, por ejemplo, "net. MSMQ://localhost/applicationOne".</span><span class="sxs-lookup"><span data-stu-id="a8ad4-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="a8ad4-116">El servicio de activación MSMQ utiliza el URI de la aplicación para coincidir con la cola que el servicio de activación MSMQ debe supervisar para los mensajes.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="a8ad4-117">Cuando el servicio de activación MSMQ se inicia, enumera todas las colas privadas y públicas del equipo que está configurado para recibir y las supervisa para los mensajes.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="a8ad4-118">Cada 10 minutos, el servicio de activación MSMQ actualiza la lista de colas que tiene que supervisar.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="a8ad4-119">Cuando se encuentra un mensaje en una cola, el servicio de activación coincide el nombre de la cola al URI de la aplicación correspondiente más largo para el enlace net.msmq y activa la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a8ad4-120">La aplicación que se está activando debe coincidir (coincidencia más larga) con el prefijo del nombre de la cola.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="a8ad4-121">Por ejemplo, un nombre de cola es: msmqWebHost/orderProcessing/service.svc.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="a8ad4-122">Si la Aplicación 1 tiene un directorio virtual /msmqWebHost/orderProcessing con un service.svc bajo el mismo y la Aplicación 2 tiene un directorio virtual /msmqWebHost con un orderProcessing.svc debajo de él, se activa la Aplicación 1.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="a8ad4-123">Si se elimina la Aplicación 1, se activa la Aplicación 2.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a8ad4-124">Cuando se crea una cola, los mensajes enviados a este no activan una aplicación hasta que el servicio de activación MSMQ actualice la lista de la cola, lo cual tarda, como máximo,10 minutos desde el momento en que se creó la cola.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="a8ad4-125">Al reiniciar el servicio de activación, también se actualiza la lista de colas.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="a8ad4-126">El efecto de las colas privadas y públicas en Direccionamiento</span><span class="sxs-lookup"><span data-stu-id="a8ad4-126">The Effect of Private and Public Queues on Addressing</span></span>  

 <span data-ttu-id="a8ad4-127">El servicio de activación MSMQ no distingue entre supervisión de colas privadas y públicas.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="a8ad4-128">Como tal, no puede tener colas públicas y privadas con el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="a8ad4-129">Si tiene, una aplicación hospedada en Web se puede activar al leer de cualquiera de las colas.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="a8ad4-130">Configuración de la cola para la activación</span><span class="sxs-lookup"><span data-stu-id="a8ad4-130">Queue Configuration for Activation</span></span>  

 <span data-ttu-id="a8ad4-131">El servicio de activación MSMQ se ejecuta como SERVICIO DE RED.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="a8ad4-132">Es el servicio que supervisa las colas para activar las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="a8ad4-133">Para que active las aplicaciones desde la cola, la cola debe proporcionar acceso al SERVICIO DE RED para ejecutar el método Peek para los mensajes en su lista de control de acceso (ACL).</span><span class="sxs-lookup"><span data-stu-id="a8ad4-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="a8ad4-134">Mensajería dudosa</span><span class="sxs-lookup"><span data-stu-id="a8ad4-134">Poison Messaging</span></span>  

 <span data-ttu-id="a8ad4-135">El control de mensajes dudosos en WCF se controla mediante el canal, que no solo detecta que un mensaje es dudoso, sino que selecciona una disposición basada en la configuración del usuario.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="a8ad4-136">Como resultado, solo hay un mensaje único en la cola.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="a8ad4-137">La aplicación hospedada en Web anula las ocasiones sucesivas y el mensaje se mueve a una cola de reintento.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="a8ad4-138">En un punto dictado por el retraso del ciclo de reintento, el mensaje se mueve desde la cola de reintento a la cola principal para intentarlo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="a8ad4-139">Pero esto exige que el al canal en cola esté activo.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="a8ad4-140">Si WAS recicla la aplicación, a continuación, el mensaje permanece en la cola de reintento hasta que otro mensaje llegue a la cola principal para activar la aplicación en cola.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="a8ad4-141">La solución alternativa en este caso es mover de nuevo manualmente el mensaje desde la cola de reintento a la cola principal para reactivar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="a8ad4-142">Subcola y advertencia de cola de sistema</span><span class="sxs-lookup"><span data-stu-id="a8ad4-142">Subqueue and System Queue Caveat</span></span>  

 <span data-ttu-id="a8ad4-143">Una aplicación hospedada en WAS no se puede activar basándose en mensajes en una cola de sistema, como la cola de mensajes no enviados para todo el sistema o subcolas, como subcolas dudosas.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="a8ad4-144">Esto supone una limitación para esta versión del producto.</span><span class="sxs-lookup"><span data-stu-id="a8ad4-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a8ad4-145">Vea también</span><span class="sxs-lookup"><span data-stu-id="a8ad4-145">See also</span></span>

- [<span data-ttu-id="a8ad4-146">Control de mensajes dudosos</span><span class="sxs-lookup"><span data-stu-id="a8ad4-146">Poison Message Handling</span></span>](poison-message-handling.md)
- [<span data-ttu-id="a8ad4-147">Extremos de servicio y direccionamiento de la cola</span><span class="sxs-lookup"><span data-stu-id="a8ad4-147">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)

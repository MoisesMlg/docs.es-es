---
title: Información general de correlación
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: 3cc0bc49ad464401ccff769fd5873d5b7e19dccc
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293720"
---
# <a name="correlation-overview"></a><span data-ttu-id="cdebe-102">Información general de correlación</span><span class="sxs-lookup"><span data-stu-id="cdebe-102">Correlation Overview</span></span>

<span data-ttu-id="cdebe-103">Correlación es el mecanismo para relacionar mensajes de servicio de flujo de trabajo entre sí o con el estado de instancia de aplicación, como una respuesta con una solicitud inicial o un identificador de orden determinado con el estado persistente de un flujo de trabajo de procesamiento del orden.</span><span class="sxs-lookup"><span data-stu-id="cdebe-103">Correlation is the mechanism for relating workflow service messages to each other or to the application instance state, such as a reply to an initial request, or a particular order ID to the persisted state of an order-processing workflow.</span></span> <span data-ttu-id="cdebe-104">En este tema, se proporciona información general sobre la correlación.</span><span class="sxs-lookup"><span data-stu-id="cdebe-104">This topic provides an overview of correlation.</span></span> <span data-ttu-id="cdebe-105">Los otros temas de esta sección proporcionan información adicional para cada tipo de correlación.</span><span class="sxs-lookup"><span data-stu-id="cdebe-105">The other topics in this section provide additional information for each type of correlation.</span></span>  
  
## <a name="types-of-correlation"></a><span data-ttu-id="cdebe-106">Tipos de correlación</span><span class="sxs-lookup"><span data-stu-id="cdebe-106">Types of Correlation</span></span>  

 <span data-ttu-id="cdebe-107">La correlación puede estar basada en protocolos o basada en contenidos.</span><span class="sxs-lookup"><span data-stu-id="cdebe-107">Correlation can be protocol-based or content-based.</span></span> <span data-ttu-id="cdebe-108">Las correlaciones basadas en protocolos usan datos proporcionados por la infraestructura de entrega de mensajes para proporcionar la asignación entre los mensajes.</span><span class="sxs-lookup"><span data-stu-id="cdebe-108">Protocol-based correlations use data provided by the message delivery infrastructure to provide the mapping between messages.</span></span> <span data-ttu-id="cdebe-109">Los mensajes que se correlacionan utilizando una correlación basada en protocolos se relacionan entre sí mediante un objeto en la memoria, como <xref:System.ServiceModel.Channels.RequestContext>, o a través de un token proporcionado por el protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="cdebe-109">Messages that are correlated using protocol-based correlation are related to each other using an object in memory, such as a <xref:System.ServiceModel.Channels.RequestContext>, or by a token provided by the transport protocol.</span></span> <span data-ttu-id="cdebe-110">Las correlaciones basadas en contenidos relacionan los mensajes entre sí mediante datos especificados por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cdebe-110">Content-based correlations relate messages to each other using application-specified data.</span></span> <span data-ttu-id="cdebe-111">Los mensajes que se correlacionan utilizando la correlación basada en contenidos se relacionan a entre sí mediante ciertos datos definidos por la aplicación en el mensaje, como un número de cliente.</span><span class="sxs-lookup"><span data-stu-id="cdebe-111">Messages that are correlated using content-based correlation are related to each other by some application-defined data in the message, such as a customer number.</span></span>  
  
 <span data-ttu-id="cdebe-112">Las actividades que participan en la correlación usan una clase <xref:System.ServiceModel.Activities.CorrelationHandle> para unir las actividades de mensajería.</span><span class="sxs-lookup"><span data-stu-id="cdebe-112">Activities that participate in correlation use a <xref:System.ServiceModel.Activities.CorrelationHandle> to tie the messaging activities together.</span></span> <span data-ttu-id="cdebe-113">Por ejemplo, una clase <xref:System.ServiceModel.Activities.Send> que se utiliza para llamar a un servicio, y una clase <xref:System.ServiceModel.Activities.Receive> subsiguiente que se utiliza para recibir una devolución de llamada del servicio, comparten la misma clase <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-113">For example, a <xref:System.ServiceModel.Activities.Send> that is used to call a service and a subsequent <xref:System.ServiceModel.Activities.Receive> that is used to receive a callback from the service, share the same <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="cdebe-114">Se utiliza este patrón básico si la correlación se basa en contenidos o en protocolos.</span><span class="sxs-lookup"><span data-stu-id="cdebe-114">This basic pattern is used whether the correlation is content based or protocol based.</span></span> <span data-ttu-id="cdebe-115">El identificador de correlación se puede establecer explícitamente en cada actividad o las actividades se pueden contener en una actividad <xref:System.ServiceModel.Activities.CorrelationScope>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-115">The correlation handle can be explicitly set on each activity or the activities can be contained in a <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="cdebe-116">Las actividades contenidas en <xref:System.ServiceModel.Activities.CorrelationScope> tienen sus identificadores de correlación administrados por <xref:System.ServiceModel.Activities.CorrelationScope> y no necesitan que <xref:System.ServiceModel.Activities.CorrelationHandle> se establezca explícitamente.</span><span class="sxs-lookup"><span data-stu-id="cdebe-116">Activities contained in a <xref:System.ServiceModel.Activities.CorrelationScope> have their correlation handles managed by the <xref:System.ServiceModel.Activities.CorrelationScope> and do not require the <xref:System.ServiceModel.Activities.CorrelationHandle> to be explicitly set.</span></span> <span data-ttu-id="cdebe-117">Un ámbito <xref:System.ServiceModel.Activities.CorrelationScope> proporciona una administración <xref:System.ServiceModel.Activities.CorrelationHandle> para una correlación de solicitud-respuesta y un tipo de correlación adicional.</span><span class="sxs-lookup"><span data-stu-id="cdebe-117">A <xref:System.ServiceModel.Activities.CorrelationScope> scope provides <xref:System.ServiceModel.Activities.CorrelationHandle> management for a request-reply correlation and one additional correlation type.</span></span> <span data-ttu-id="cdebe-118">Los servicios de flujo de trabajo hospedados utilizando <xref:System.ServiceModel.Activities.WorkflowServiceHost> tienen la misma administración de correlación predeterminada como actividad <xref:System.ServiceModel.Activities.CorrelationScope>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-118">Workflow services hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost> have the same default correlation management as the <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="cdebe-119">Esta administración de correlación predeterminada suele indicar que, en muchos escenarios, las actividades de mensajería en <xref:System.ServiceModel.Activities.CorrelationScope> o un servicio de flujo de trabajo no requieren el establecimiento de <xref:System.ServiceModel.Activities.CorrelationHandle>, a menos que varias actividades de mensajería se produzcan en paralelo o se superpongan, como dos actividades <xref:System.ServiceModel.Activities.Receive> en paralelo o dos actividades <xref:System.ServiceModel.Activities.Send> seguidas por dos actividades <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-119">This default correlation management generally means that in many scenarios, messaging activities in a <xref:System.ServiceModel.Activities.CorrelationScope> or a workflow service do not require their <xref:System.ServiceModel.Activities.CorrelationHandle> set unless multiple messaging activities are in parallel or overlap, such as two <xref:System.ServiceModel.Activities.Receive> activities in parallel, or two <xref:System.ServiceModel.Activities.Send> activities followed by two <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="cdebe-120">Puede obtener más información sobre la correlación predeterminada en los temas de esta sección que cubren cada tipo específico de correlación.</span><span class="sxs-lookup"><span data-stu-id="cdebe-120">More information about default correlation is provided in the topics in this section that cover each specific type of correlation.</span></span> <span data-ttu-id="cdebe-121">Para obtener más información sobre las actividades de mensajería, vea [actividades de mensajería](messaging-activities.md) y [Cómo: crear un servicio de flujo de trabajo con actividades de mensajería](how-to-create-a-workflow-service-with-messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="cdebe-121">For more information about messaging activities see [Messaging Activities](messaging-activities.md) and [How to: Create a Workflow Service with Messaging Activities](how-to-create-a-workflow-service-with-messaging-activities.md).</span></span>  
  
## <a name="protocol-based-correlation"></a><span data-ttu-id="cdebe-122">Correlación basada en protocolos</span><span class="sxs-lookup"><span data-stu-id="cdebe-122">Protocol-Based Correlation</span></span>

<span data-ttu-id="cdebe-123">La correlación basada en protocolos usa los mecanismos de transporte para relacionar mensajes entre sí y la instancia adecuada.</span><span class="sxs-lookup"><span data-stu-id="cdebe-123">Protocol-based correlation uses the transport mechanism to relate messages to each other and the appropriate instance.</span></span> <span data-ttu-id="cdebe-124">Algunas correlaciones protocolares proporcionadas por el sistema incluyen una correlación de solicitud-respuesta y una correlación basada en contextos.</span><span class="sxs-lookup"><span data-stu-id="cdebe-124">Some system-provided protocol correlations include request-reply correlation and context-based correlation.</span></span> <span data-ttu-id="cdebe-125">Una correlación de solicitud-respuesta se utiliza para correlacionar un par único de actividades de mensajería para formar una operación bidireccional, como una clase <xref:System.ServiceModel.Activities.Send> emparejada con un miembro <xref:System.ServiceModel.Activities.ReceiveReply> o una clase <xref:System.ServiceModel.Activities.Receive> emparejada con una clase <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-125">A request-reply correlation is used to correlate a single pair of messaging activities to form a two-way operation, such as a <xref:System.ServiceModel.Activities.Send> paired with a <xref:System.ServiceModel.Activities.ReceiveReply>, or a <xref:System.ServiceModel.Activities.Receive> paired with a <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="cdebe-126">Visual Studio Diseñador de flujo de trabajo también proporciona un conjunto de plantillas de actividad para implementar rápidamente este patrón.</span><span class="sxs-lookup"><span data-stu-id="cdebe-126">The Visual Studio Workflow Designer also provides a set of activity templates to quickly implement this pattern.</span></span> <span data-ttu-id="cdebe-127">Una correlación basada en contexto se basa en el mecanismo de intercambio de contexto descrito en la [especificación del Protocolo de intercambio de contexto de .net](/openspecs/windows_protocols/mc-netcex/a7f26280-491f-465b-9914-c5eb5322dbb4).</span><span class="sxs-lookup"><span data-stu-id="cdebe-127">A context-based correlation is based on the context exchange mechanism described in the [.NET Context Exchange Protocol Specification](/openspecs/windows_protocols/mc-netcex/a7f26280-491f-465b-9914-c5eb5322dbb4).</span></span> <span data-ttu-id="cdebe-128">Para utilizar la correlación basada en contextos, debe usarse un enlace basado en contextos como <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> o <xref:System.ServiceModel.NetTcpContextBinding> en el extremo.</span><span class="sxs-lookup"><span data-stu-id="cdebe-128">To use context-based correlation, a context-based binding such as <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> or <xref:System.ServiceModel.NetTcpContextBinding> must be used on the endpoint.</span></span>  
  
<span data-ttu-id="cdebe-129">Para obtener más información acerca de la correlación de protocolos, consulte [dúplex duradero](durable-duplex-correlation.md) y [solicitud-respuesta](request-reply-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="cdebe-129">For more information about protocol correlation, see [Durable Duplex](durable-duplex-correlation.md) and [Request-Reply](request-reply-correlation.md).</span></span> <span data-ttu-id="cdebe-130">Para obtener más información sobre el uso de las plantillas de actividad de Diseñador de flujo de trabajo de Visual Studio, vea [actividades de mensajería](messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="cdebe-130">For more information about using the Visual Studio Workflow Designer activity templates, see [Messaging Activities](messaging-activities.md).</span></span> <span data-ttu-id="cdebe-131">Para ver el código de ejemplo, vea el ejemplo [NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100)) .</span><span class="sxs-lookup"><span data-stu-id="cdebe-131">For sample code, see the [NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100)) sample.</span></span>  
  
## <a name="content-based-correlation"></a><span data-ttu-id="cdebe-132">Correlación basada en contenidos</span><span class="sxs-lookup"><span data-stu-id="cdebe-132">Content-Based Correlation</span></span>

<span data-ttu-id="cdebe-133">La correlación basada en contenidos usa cierta información en el mensaje para asociarlo a una instancia determinada.</span><span class="sxs-lookup"><span data-stu-id="cdebe-133">Content-based correlation uses some piece of information in the message to associate it to a particular instance.</span></span> <span data-ttu-id="cdebe-134">Al contrario que la correlación basada en protocolos, la correlación basada en contenidos requiere que el autor de la aplicación establezca explícitamente dónde se pueden encontrar estos datos en cada mensaje relacionado.</span><span class="sxs-lookup"><span data-stu-id="cdebe-134">Unlike protocol-based correlation, content-based correlation requires the application author to explicitly state where this data can be found in each related message.</span></span> <span data-ttu-id="cdebe-135">Las actividades que usan correlación basada en contenidos especifican estos datos de mensaje utilizando <xref:System.ServiceModel.MessageQuerySet>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-135">Activities that use content-based correlation specify this message data by using a <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="cdebe-136">La correlación basada en contenidos es útil al comunicarse con servicios que no usan uno de los enlaces de contexto, como <xref:System.ServiceModel.BasicHttpContextBinding>.</span><span class="sxs-lookup"><span data-stu-id="cdebe-136">Content-based correlation is useful when communicating with services that do not use one of the context bindings such as <xref:System.ServiceModel.BasicHttpContextBinding>.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="cdebe-137">Vea también</span><span class="sxs-lookup"><span data-stu-id="cdebe-137">See also</span></span>

- <span data-ttu-id="cdebe-138">[NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="cdebe-138">[NetContextExchangeCorrelation](/previous-versions/dotnet/netframework-4.0/ee662963(v=vs.100))</span></span>

---
title: Creación de enlaces definidos por el usuario
ms.date: 03/30/2017
helpviewer_keywords:
- user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
ms.openlocfilehash: ba40bcfd8a9e9fea1a422ed124b9a966819bf184
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96257859"
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="08a20-102">Creación de enlaces definidos por el usuario</span><span class="sxs-lookup"><span data-stu-id="08a20-102">Creating User-Defined Bindings</span></span>

<span data-ttu-id="08a20-103">Hay varias maneras de crear enlaces no proporcionadas por el sistema:</span><span class="sxs-lookup"><span data-stu-id="08a20-103">There are several ways to create bindings not provided by the system:</span></span>  
  
- <span data-ttu-id="08a20-104">Cree un enlace personalizado, basado en la clase <xref:System.ServiceModel.Channels.CustomBinding>, que es un contenedor que rellena de elementos de enlace.</span><span class="sxs-lookup"><span data-stu-id="08a20-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="08a20-105">El enlace personalizado se agrega a continuación a un punto de conexión de servicio.</span><span class="sxs-lookup"><span data-stu-id="08a20-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="08a20-106">Puede crear el enlace personalizado mediante programación o mediante un archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="08a20-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="08a20-107">Para usar un elemento de enlace desde un archivo de configuración de la aplicación, el elemento de enlace debe extenderse <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="08a20-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> <span data-ttu-id="08a20-108">Para obtener más información sobre los enlaces personalizados, vea [enlaces personalizados](custom-bindings.md) y <xref:System.ServiceModel.Channels.CustomBinding> .</span><span class="sxs-lookup"><span data-stu-id="08a20-108">For more information about custom bindings, see [Custom Bindings](custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
- <span data-ttu-id="08a20-109">Puede crear una clase que derive de un enlace estándar.</span><span class="sxs-lookup"><span data-stu-id="08a20-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="08a20-110">Por ejemplo, puede derivar una clase de <xref:System.ServiceModel.WSHttpBinding> e invalidar el método <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> para obtener los elementos de enlace e insertar un elemento de enlace personalizado o establecer un valor determinado de seguridad.</span><span class="sxs-lookup"><span data-stu-id="08a20-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
- <span data-ttu-id="08a20-111">Puede crear un nuevo tipo <xref:System.ServiceModel.Channels.Binding> para controlar completamente toda la implementación del enlace.</span><span class="sxs-lookup"><span data-stu-id="08a20-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="08a20-112">El orden de elementos de enlace</span><span class="sxs-lookup"><span data-stu-id="08a20-112">The Order of Binding Elements</span></span>  

 <span data-ttu-id="08a20-113">Cada elemento de enlace representa un paso del procesamiento al enviar y recibir mensajes.</span><span class="sxs-lookup"><span data-stu-id="08a20-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="08a20-114">En tiempo de ejecución, los elementos de enlace crean los canales y agentes de escucha necesarios para crear pilas de canales entrantes y salientes.</span><span class="sxs-lookup"><span data-stu-id="08a20-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="08a20-115">Hay tres tipos principales de elementos de enlace: elementos de enlaces de protocolo, elementos de enlaces de codificación y elementos de enlaces de transporte.</span><span class="sxs-lookup"><span data-stu-id="08a20-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="08a20-116">Elementos de enlaces protocolares: estos elementos representan pasos de procesamiento de nivel superior que actúan sobre mensajes.</span><span class="sxs-lookup"><span data-stu-id="08a20-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="08a20-117">Los canales y los agentes de escucha creados por estos elementos de enlace pueden agregar, quitar o modificar el contenido del mensaje.</span><span class="sxs-lookup"><span data-stu-id="08a20-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="08a20-118">Un enlace determinado puede tener un número arbitrario de elementos de enlace de protocolo, cada uno de los cuales hereda de <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="08a20-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> <span data-ttu-id="08a20-119">Windows Communication Foundation (WCF) incluye varios elementos de enlace de protocolo, incluidos <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> y <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> .</span><span class="sxs-lookup"><span data-stu-id="08a20-119">Windows Communication Foundation (WCF) includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="08a20-120">Elemento de enlace de codificación: estos elementos representan las transformaciones entre un mensaje y una codificación lista para la transmisión en la conexión.</span><span class="sxs-lookup"><span data-stu-id="08a20-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="08a20-121">Los enlaces de WCF típicos incluyen exactamente un elemento de enlace de codificación.</span><span class="sxs-lookup"><span data-stu-id="08a20-121">Typical WCF bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="08a20-122">Entre los ejemplos de elementos de enlace de codificación se incluyen los elementos <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement> y <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="08a20-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="08a20-123">Si no se especifica un elemento de enlace de codificación para un enlace, se utiliza una codificación predeterminada.</span><span class="sxs-lookup"><span data-stu-id="08a20-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="08a20-124">Cuando el transporte es HTTP, el valor predeterminado es texto, y, si no fuese HTTP, es binario.</span><span class="sxs-lookup"><span data-stu-id="08a20-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="08a20-125">Elemento de enlace de transporte: estos elementos representan la transmisión de un mensaje de codificación sobre un protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="08a20-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="08a20-126">Los enlaces de WCF típicos incluyen exactamente un elemento de enlace de transporte, que hereda de <xref:System.ServiceModel.Channels.TransportBindingElement> .</span><span class="sxs-lookup"><span data-stu-id="08a20-126">Typical WCF bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="08a20-127">Entre los ejemplos de elementos de enlace del transporte se incluyen los elementos <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, <xref:System.ServiceModel.Channels.HttpTransportBindingElement> y <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="08a20-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="08a20-128">Al crear nuevos enlaces, el orden de los elementos de enlace agregados es importante.</span><span class="sxs-lookup"><span data-stu-id="08a20-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="08a20-129">Siempre agregue los elementos de enlace en el siguiente orden:</span><span class="sxs-lookup"><span data-stu-id="08a20-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="08a20-130">Nivel</span><span class="sxs-lookup"><span data-stu-id="08a20-130">Layer</span></span>|<span data-ttu-id="08a20-131">Opciones</span><span class="sxs-lookup"><span data-stu-id="08a20-131">Options</span></span>|<span data-ttu-id="08a20-132">Obligatorio</span><span class="sxs-lookup"><span data-stu-id="08a20-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="08a20-133">Flujo de transacciones</span><span class="sxs-lookup"><span data-stu-id="08a20-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="08a20-134">No</span><span class="sxs-lookup"><span data-stu-id="08a20-134">No</span></span>|  
|<span data-ttu-id="08a20-135">Confiabilidad</span><span class="sxs-lookup"><span data-stu-id="08a20-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="08a20-136">No</span><span class="sxs-lookup"><span data-stu-id="08a20-136">No</span></span>|  
|<span data-ttu-id="08a20-137">Seguridad</span><span class="sxs-lookup"><span data-stu-id="08a20-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="08a20-138">No</span><span class="sxs-lookup"><span data-stu-id="08a20-138">No</span></span>|  
|<span data-ttu-id="08a20-139">Dúplex compuesto</span><span class="sxs-lookup"><span data-stu-id="08a20-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="08a20-140">No</span><span class="sxs-lookup"><span data-stu-id="08a20-140">No</span></span>|  
|<span data-ttu-id="08a20-141">Encoding</span><span class="sxs-lookup"><span data-stu-id="08a20-141">Encoding</span></span>|<span data-ttu-id="08a20-142">Texto, binario, MTOM, personalizado</span><span class="sxs-lookup"><span data-stu-id="08a20-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="08a20-143">Sí\*</span><span class="sxs-lookup"><span data-stu-id="08a20-143">Yes\*</span></span>|  
|<span data-ttu-id="08a20-144">Transporte</span><span class="sxs-lookup"><span data-stu-id="08a20-144">Transport</span></span>|<span data-ttu-id="08a20-145">TCP, canalizaciones con nombre, HTTP, HTTPS, MSMQ, personalizado</span><span class="sxs-lookup"><span data-stu-id="08a20-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="08a20-146">Sí</span><span class="sxs-lookup"><span data-stu-id="08a20-146">Yes</span></span>|  
  
<span data-ttu-id="08a20-147">\*Dado que se requiere una codificación para cada enlace, si no se especifica una codificación, WCF agrega una codificación predeterminada.</span><span class="sxs-lookup"><span data-stu-id="08a20-147">\*Because an encoding is required for each binding, if an encoding is not specified, WCF adds a default encoding for you.</span></span> <span data-ttu-id="08a20-148">El valor predeterminado es texto/XML para los transportes HTTP y HTTPS, y binario para otros transportes.</span><span class="sxs-lookup"><span data-stu-id="08a20-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="08a20-149">Creación de un nuevo elemento de enlace</span><span class="sxs-lookup"><span data-stu-id="08a20-149">Creating a new Binding Element</span></span>  

 <span data-ttu-id="08a20-150">Además de los tipos derivados de <xref:System.ServiceModel.Channels.BindingElement> que proporciona WCF, puede crear sus propios elementos de enlace.</span><span class="sxs-lookup"><span data-stu-id="08a20-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by WCF, you can create your own binding elements.</span></span> <span data-ttu-id="08a20-151">Esto le permite personalizar la manera en la que se crea la pila de enlaces y los componentes que van en ella creando su propio <xref:System.ServiceModel.Channels.BindingElement> que puede componerse con el resto de tipos proporcionados por el sistema en la pila.</span><span class="sxs-lookup"><span data-stu-id="08a20-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="08a20-152">Por ejemplo, si implementa un `LoggingBindingElement` que proporciona la capacidad de registrar el mensaje en una base de datos, debe colocarlo sobre un canal de transporte en la pila de canales.</span><span class="sxs-lookup"><span data-stu-id="08a20-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="08a20-153">En este caso, la aplicación crea un enlace personalizado que compuso el `LoggingBindingElement` con `TcpTransportBindingElement`, como en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="08a20-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="08a20-154">La forma en la que escribe su nuevo elemento de enlace depende de su funcionalidad exacta.</span><span class="sxs-lookup"><span data-stu-id="08a20-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="08a20-155">Uno de los ejemplos, [Transport: UDP](../samples/transport-udp.md), proporciona una descripción detallada de cómo implementar un tipo de elemento de enlace.</span><span class="sxs-lookup"><span data-stu-id="08a20-155">One of the samples, [Transport: UDP](../samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="08a20-156">Crear un nuevo enlace</span><span class="sxs-lookup"><span data-stu-id="08a20-156">Creating a New Binding</span></span>  

 <span data-ttu-id="08a20-157">Un elemento de enlace creado por el usuario se puede utilizar de dos maneras.</span><span class="sxs-lookup"><span data-stu-id="08a20-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="08a20-158">La sección anterior muestra la primera manera: a través de un enlace personalizado.</span><span class="sxs-lookup"><span data-stu-id="08a20-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="08a20-159">Un enlace personalizado le permite al usuario crear su propio enlace en función de un conjunto arbitrario de elementos de enlace, incluso los creados por usuario.</span><span class="sxs-lookup"><span data-stu-id="08a20-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="08a20-160">Si utiliza el enlace en más de una aplicación, cree su propio enlace y extienda el <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="08a20-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="08a20-161">Esto evita crear manualmente un enlace personalizado cada vez que desee utilizarlo.</span><span class="sxs-lookup"><span data-stu-id="08a20-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="08a20-162">Un enlace definido por el usuario le permite definir el comportamiento del enlace e incluir elementos de enlace definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="08a20-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="08a20-163">Y está *empaquetado previamente*: no es necesario volver a generar el enlace cada vez que se usa.</span><span class="sxs-lookup"><span data-stu-id="08a20-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="08a20-164">Como mínimo, un enlace definido por el usuario deberá implementar el método <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> y la propiedad <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="08a20-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="08a20-165">El método <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> devuelve un nuevo <xref:System.ServiceModel.Channels.BindingElementCollection> que contiene los elementos de enlace del enlace.</span><span class="sxs-lookup"><span data-stu-id="08a20-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="08a20-166">Se ordena la colección y debería contener primero los elementos de enlace protocolares, seguidos por el elemento de enlace de la codificación, seguido por el elemento de enlace de transporte.</span><span class="sxs-lookup"><span data-stu-id="08a20-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="08a20-167">Al usar los elementos de enlace proporcionados por el sistema WCF, debe seguir las reglas de ordenación de elementos de enlace especificadas en los [enlaces personalizados](custom-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="08a20-167">When using the WCF system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](custom-bindings.md).</span></span> <span data-ttu-id="08a20-168">Esta colección nunca debería hacer referencia a objetos a los que se ha hecho referencia dentro de la clase de enlace definida por el usuario; por consiguiente, los autores de enlaces deben devolver un `Clone()` de la <xref:System.ServiceModel.Channels.BindingElementCollection> en cada llamada a <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="08a20-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="08a20-169">La propiedad <xref:System.ServiceModel.Channels.Binding.Scheme%2A> representa el esquema del URI para el protocolo de transporte que se está utilizando en el enlace.</span><span class="sxs-lookup"><span data-stu-id="08a20-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="08a20-170">Por ejemplo, *wsHttpBinding* y *NetTcpBinding* devuelven "http" y "net. TCP" desde sus propiedades respectivas <xref:System.ServiceModel.Channels.Binding.Scheme%2A> .</span><span class="sxs-lookup"><span data-stu-id="08a20-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="08a20-171">Para obtener una lista completa de métodos y propiedades opcionales para los enlaces definidos por el usuario, vea <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="08a20-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="08a20-172">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="08a20-172">Example</span></span>  

 <span data-ttu-id="08a20-173">Este ejemplo implementa el enlace del perfil en `SampleProfileUdpBinding`, que deriva de <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="08a20-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="08a20-174">El `SampleProfileUdpBinding` contiene hasta cuatro elementos de enlace dentro de él: un creado por el usuario `UdpTransportBindingElement` ; y tres proporcionados por el sistema: `TextMessageEncodingBindingElement` , `CompositeDuplexBindingElement` y `ReliableSessionBindingElement` .</span><span class="sxs-lookup"><span data-stu-id="08a20-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```csharp
public override BindingElementCollection CreateBindingElements()  
{
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="08a20-175">Restricciones de Seguridad con contratos dúplex</span><span class="sxs-lookup"><span data-stu-id="08a20-175">Security Restrictions with Duplex Contracts</span></span>  

 <span data-ttu-id="08a20-176">No todos los elementos de enlace son compatibles entre sí.</span><span class="sxs-lookup"><span data-stu-id="08a20-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="08a20-177">En concreto, hay algunas restricciones con respecto a elementos de enlaces de seguridad cuando se utilizan con contratos dúplex.</span><span class="sxs-lookup"><span data-stu-id="08a20-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="08a20-178">Seguridad monoestable</span><span class="sxs-lookup"><span data-stu-id="08a20-178">One-Shot Security</span></span>  

 <span data-ttu-id="08a20-179">Puede implementar la seguridad "One-Shot", donde todas las credenciales de seguridad necesarias se envían en un único mensaje, estableciendo el `negotiateServiceCredential` atributo del \<message> elemento de configuración en `false` .</span><span class="sxs-lookup"><span data-stu-id="08a20-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="08a20-180">La autenticación monoestable no trabaja con contratos dúplex.</span><span class="sxs-lookup"><span data-stu-id="08a20-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="08a20-181">Para contratos de solicitud-respuesta, la autenticación monoestable solo funciona si la pila de enlaces bajo el elemento de enlace de seguridad admite la creación de instancias de <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="08a20-182">Para contratos unidireccionales, la autenticación monoestable funciona si la pila de enlaces bajo el elemento de enlace de seguridad admite la creación de instancias de <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> o <xref:System.ServiceModel.Channels.IOutputSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="08a20-183">Tokens de contexto de seguridad de modo de cookie</span><span class="sxs-lookup"><span data-stu-id="08a20-183">Cookie-mode Security Context Tokens</span></span>  

 <span data-ttu-id="08a20-184">Los tokens de contexto de seguridad de modo de cookie no se pueden utilizar con contratos dúplex.</span><span class="sxs-lookup"><span data-stu-id="08a20-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="08a20-185">Para contratos de solicitud-respuesta, los tokens de contexto de seguridad del modo de cookie solo funcionan si la pila de enlaces bajo el elemento de enlace de seguridad admite la creación de instancias de <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="08a20-186">Para contratos unidireccionales, los tokens de contexto de seguridad del modo de cookie funcionan si la pila de enlaces bajo el elemento de enlace de seguridad admite la creación de instancias de <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="08a20-187">Tokens de contexto de seguridad de modo de sesión</span><span class="sxs-lookup"><span data-stu-id="08a20-187">Session-mode Security Context Tokens</span></span>  

 <span data-ttu-id="08a20-188">El SCT de modo de sesión funciona con contratos dúplex si la pila de enlaces bajo el elemento de enlace de seguridad permite crear instancias de <xref:System.ServiceModel.Channels.IDuplexChannel> o <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="08a20-189">El SCT de modo de sesión funciona con contratos de solicitud-respuesta si la pila de enlaces bajo el elemento de enlace de seguridad permite crear instancias de <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="08a20-190">El SCT de modo de sesión funciona con contratos unidireccionales si la pila de enlaces bajo el elemento de enlace de seguridad permite crear instancias de <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> o <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="08a20-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="08a20-191">Derivación a partir de un enlace estándar</span><span class="sxs-lookup"><span data-stu-id="08a20-191">Deriving from a Standard Binding</span></span>  

 <span data-ttu-id="08a20-192">En lugar de crear una clase de enlace completamente nueva, puede que sea posible extender uno de los enlaces existentes proporcionados por el sistema.</span><span class="sxs-lookup"><span data-stu-id="08a20-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="08a20-193">De manera muy similar al caso anterior, debe invalidar el método <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> y la propiedad <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="08a20-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="08a20-194">Vea también</span><span class="sxs-lookup"><span data-stu-id="08a20-194">See also</span></span>

- <xref:System.ServiceModel.Channels.Binding>
- [<span data-ttu-id="08a20-195">Enlaces personalizados</span><span class="sxs-lookup"><span data-stu-id="08a20-195">Custom Bindings</span></span>](custom-bindings.md)

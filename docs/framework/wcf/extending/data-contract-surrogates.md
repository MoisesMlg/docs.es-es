---
title: Suplentes de contratos de datos
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts [WCF], surrogates
ms.assetid: 8c31134c-46c5-4ed7-94af-bab0ac0dfce5
ms.openlocfilehash: e33a487c03bbf87666d517040e00131f5482be6f
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96251521"
---
# <a name="data-contract-surrogates"></a><span data-ttu-id="14a36-102">Suplentes de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="14a36-102">Data Contract Surrogates</span></span>

<span data-ttu-id="14a36-103">El *suplente* del contrato de datos es una característica avanzada que se basa en el modelo del contrato de datos.</span><span class="sxs-lookup"><span data-stu-id="14a36-103">The data contract *surrogate* is an advanced feature built upon the Data Contract model.</span></span> <span data-ttu-id="14a36-104">Esta característica está diseñada para ser utilizada para la personalización de tipo y substitución en situaciones donde los usuarios desean cambiar cómo un tipo se serializa, deserializa o se proyecta en metadatos.</span><span class="sxs-lookup"><span data-stu-id="14a36-104">This feature is designed to be used for type customization and substitution in situations where users want to change how a type is serialized, deserialized or projected into metadata.</span></span> <span data-ttu-id="14a36-105">Algunos escenarios donde se puede utilizar un suplente es cuando un contrato de datos no se ha especificado para el tipo, los campos y las propiedades no están marcados con el atributo <xref:System.Runtime.Serialization.DataMemberAttribute> o los usuarios desean crear dinámicamente las variaciones del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-105">Some scenarios where a surrogate may be used is when a data contract has not been specified for the type, fields and properties are not marked with the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute or users wish to dynamically create schema variations.</span></span>  
  
 <span data-ttu-id="14a36-106">La serialización y deserialización se logran con el suplente del contrato de datos al utilizar <xref:System.Runtime.Serialization.DataContractSerializer> para convertir de .NET Framework en un formato conveniente, como XML.</span><span class="sxs-lookup"><span data-stu-id="14a36-106">Serialization and deserialization are accomplished with the data contract surrogate when using <xref:System.Runtime.Serialization.DataContractSerializer> to convert from .NET Framework to a suitable format, such as XML.</span></span> <span data-ttu-id="14a36-107">El suplente del contrato de datos también se puede utilizar para modificar los metadatos exportados para los tipos, al generar representaciones de metadatos como documentos de esquema XML (XSD).</span><span class="sxs-lookup"><span data-stu-id="14a36-107">Data contract surrogate can also be used to modify the metadata exported for types, when producing metadata representations such as XML Schema Documents (XSD).</span></span> <span data-ttu-id="14a36-108">En la importación, el código se crea a partir de los metadatos y el suplente se puede utilizar en este caso también para personalizar el código generado.</span><span class="sxs-lookup"><span data-stu-id="14a36-108">Upon import, code is created from metadata and the surrogate can be used in this case to customize the generated code as well.</span></span>  
  
## <a name="how-the-surrogate-works"></a><span data-ttu-id="14a36-109">Cómo funciona el suplente</span><span class="sxs-lookup"><span data-stu-id="14a36-109">How the Surrogate Works</span></span>  

 <span data-ttu-id="14a36-110">Un suplente funciona asignando un tipo (el tipo "original") a otro tipo (el tipo “suplente”).</span><span class="sxs-lookup"><span data-stu-id="14a36-110">A surrogate works by mapping one type (the "original" type) to another type (the "surrogated" type).</span></span> <span data-ttu-id="14a36-111">El ejemplo siguiente muestra el tipo original `Inventory` y un nuevo tipo suplente `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="14a36-111">The following example shows the original type `Inventory` and a new surrogate `InventorySurrogated` type.</span></span> <span data-ttu-id="14a36-112">El tipo `Inventory` no se puede serializar pero el tipo `InventorySurrogated` es:</span><span class="sxs-lookup"><span data-stu-id="14a36-112">The `Inventory` type is not serializable but the `InventorySurrogated` type is:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#1)]  
  
 <span data-ttu-id="14a36-113">Dado que un contrato de datos no se ha definido para esta clase, convierta la clase en una clase de suplente con un contrato de datos.</span><span class="sxs-lookup"><span data-stu-id="14a36-113">Because a data contract has not been defined for this class, convert the class to a surrogate class with a data contract.</span></span> <span data-ttu-id="14a36-114">La clase de suplente se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="14a36-114">The surrogated class is shown in the following example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#2)]  
  
## <a name="implementing-the-idatacontractsurrogate"></a><span data-ttu-id="14a36-115">Implementar IDataContractSurrogate</span><span class="sxs-lookup"><span data-stu-id="14a36-115">Implementing the IDataContractSurrogate</span></span>  

 <span data-ttu-id="14a36-116">Para utilizar el suplente del contrato de datos, implemente la interfaz <xref:System.Runtime.Serialization.IDataContractSurrogate>.</span><span class="sxs-lookup"><span data-stu-id="14a36-116">To use the data contract surrogate, implement the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.</span></span>  
  
 <span data-ttu-id="14a36-117">A continuación, se muestra una información general de cada método de <xref:System.Runtime.Serialization.IDataContractSurrogate> con una posible implementación.</span><span class="sxs-lookup"><span data-stu-id="14a36-117">The following is an overview of each method of <xref:System.Runtime.Serialization.IDataContractSurrogate> with a possible implementation.</span></span>  
  
### <a name="getdatacontracttype"></a><span data-ttu-id="14a36-118">GetDataContractType</span><span class="sxs-lookup"><span data-stu-id="14a36-118">GetDataContractType</span></span>  

 <span data-ttu-id="14a36-119">El método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> asigna un tipo a otro.</span><span class="sxs-lookup"><span data-stu-id="14a36-119">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method maps one type to another.</span></span> <span data-ttu-id="14a36-120">Este método se requiere para la serialización, deserialización, importación y exportación.</span><span class="sxs-lookup"><span data-stu-id="14a36-120">This method is required for serialization, deserialization, import, and export.</span></span>  
  
 <span data-ttu-id="14a36-121">La primera tarea está definiendo qué tipos se asignarán a otros tipos.</span><span class="sxs-lookup"><span data-stu-id="14a36-121">The first task is defining what types will be mapped to other types.</span></span> <span data-ttu-id="14a36-122">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="14a36-122">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#3)]  
  
- <span data-ttu-id="14a36-123">Durante la serialización, la asignación devuelta por este método se utiliza subsiguientemente para transformar la instancia original en una instancia suplente llamando al método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-123">On serialization, the mapping returned by this method is subsequently used to transform the original instance to a surrogated instance by calling the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span>  
  
- <span data-ttu-id="14a36-124">Durante la deserialización la asignación devuelta por este método es utilizada por el serializador para deserializar en una instancia del tipo suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-124">On deserialization, the mapping returned by this method is used by the serializer to deserialize into an instance of the surrogate type.</span></span> <span data-ttu-id="14a36-125">Llama subsiguientemente a <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> para transformar la instancia suplente en una instancia del tipo original.</span><span class="sxs-lookup"><span data-stu-id="14a36-125">It subsequently calls <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> to transform the surrogated instance into an instance of the original type.</span></span>  
  
- <span data-ttu-id="14a36-126">Durante la exportación, el tipo de suplente devuelto por este método se refleja para obtener el contrato de datos para utilizar para generar los metadatos.</span><span class="sxs-lookup"><span data-stu-id="14a36-126">On export, the surrogate type returned by this method is reflected to get the data contract to use for generating metadata.</span></span>  
  
- <span data-ttu-id="14a36-127">Durante la importación, el tipo inicial se cambia a un tipo suplente que se refleja para obtener el contrato de datos para utilizarlos para propósitos como referenciar el soporte.</span><span class="sxs-lookup"><span data-stu-id="14a36-127">On import, the initial type is changed to a surrogate type that is reflected to get the data contract to use for purposes like referencing support.</span></span>  
  
 <span data-ttu-id="14a36-128">El parámetro <xref:System.Type> es el tipo del objeto que se serializa, deserializa, importa o exporta.</span><span class="sxs-lookup"><span data-stu-id="14a36-128">The <xref:System.Type> parameter is the type of the object that is being serialized, deserialized, imported, or exported.</span></span> <span data-ttu-id="14a36-129">El método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> debe devolver el tipo de entrada si el suplente no controla el tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-129">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method must return the input type if the surrogate does not handle the type.</span></span> <span data-ttu-id="14a36-130">De lo contrario, devuelva el tipo suplente adecuado.</span><span class="sxs-lookup"><span data-stu-id="14a36-130">Otherwise, return the appropriate surrogated type.</span></span> <span data-ttu-id="14a36-131">Si existen varios tipos suplentes, las numerosas asignaciones se pueden definir en este método.</span><span class="sxs-lookup"><span data-stu-id="14a36-131">If several surrogate types exist, numerous mappings can be defined in this method.</span></span>  
  
 <span data-ttu-id="14a36-132">No se llama al método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> para los tipos primitivos integrados del contrato de datos, como <xref:System.Int32> o <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="14a36-132">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method is not called for built-in data contract primitives, such as <xref:System.Int32> or <xref:System.String>.</span></span> <span data-ttu-id="14a36-133">Para otros tipos, como matrices, tipos definidos por el usuario y otras estructuras de datos, se llamará a este método para cada tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-133">For other types, such as arrays, user-defined types, and other data structures, this method will be called for each type.</span></span>  
  
 <span data-ttu-id="14a36-134">En el ejemplo anterior, el método comprueba si el parámetro `type` y `Inventory` son comparables.</span><span class="sxs-lookup"><span data-stu-id="14a36-134">In the previous example, the method checks if the `type` parameter and `Inventory` are comparable.</span></span> <span data-ttu-id="14a36-135">En tal caso, el método lo asigna a `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="14a36-135">If so, the method maps it to `InventorySurrogated`.</span></span> <span data-ttu-id="14a36-136">Cuando se llama una serialización, deserialización, esquema de importación o esquema de exportación, se llama primero a esta función para determinar la asignación entre los tipos.</span><span class="sxs-lookup"><span data-stu-id="14a36-136">Whenever a serialization, deserialization, import schema, or export schema is called, this function is called first to determine the mapping between types.</span></span>  
  
### <a name="getobjecttoserialize-method"></a><span data-ttu-id="14a36-137">Método GetObjectToSerialize</span><span class="sxs-lookup"><span data-stu-id="14a36-137">GetObjectToSerialize Method</span></span>  

 <span data-ttu-id="14a36-138">El método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> convierte la instancia de tipo original en la instancia de tipo suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-138">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method converts the original type instance to the surrogated type instance.</span></span> <span data-ttu-id="14a36-139">El método se requiere para la serialización.</span><span class="sxs-lookup"><span data-stu-id="14a36-139">The method is required for serialization.</span></span>  
  
 <span data-ttu-id="14a36-140">El paso siguiente es definir la manera en que los datos físicos se asignarán de la instancia original a la instancia suplente implementando el método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-140">The next step is to define the way the physical data will be mapped from the original instance to the surrogate by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span> <span data-ttu-id="14a36-141">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="14a36-141">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#4)]  
  
 <span data-ttu-id="14a36-142">Se llama al método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> cuando se serializa un objeto.</span><span class="sxs-lookup"><span data-stu-id="14a36-142">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method is called when an object is serialized.</span></span> <span data-ttu-id="14a36-143">Este método transfiere los datos del tipo original a los campos del tipo suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-143">This method transfers data from the original type to the fields of the surrogated type.</span></span> <span data-ttu-id="14a36-144">Los campos pueden estar asignados directamente a campos suplentes o las manipulaciones de los datos originales pueden estar almacenadas en el suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-144">Fields can be directly mapped to surrogate fields, or manipulations of the original data may be stored in the surrogate.</span></span> <span data-ttu-id="14a36-145">Algunos posibles usos incluyen: asignar directamente los campos, realizar operaciones en los datos que se van a almacenar en los campos suplentes o almacenar el XML del tipo original en el campo suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-145">Some possible uses include: directly mapping the fields, performing operations on the data to be stored in the surrogated fields, or storing the XML of the original type in the surrogated field.</span></span>  
  
 <span data-ttu-id="14a36-146">El parámetro `targetType` hace referencia al tipo declarado del miembro.</span><span class="sxs-lookup"><span data-stu-id="14a36-146">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="14a36-147">Este parámetro es el tipo suplente devuelto por el método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-147">This parameter is the surrogated type returned by the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method.</span></span> <span data-ttu-id="14a36-148">El serializador no exige que el objeto devuelto se pueda asignar a este tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-148">The serializer does not enforce that the object returned is assignable to this type.</span></span> <span data-ttu-id="14a36-149">El `obj` parámetro es el objeto que se va a serializar y se convertirá en su suplente si es necesario.</span><span class="sxs-lookup"><span data-stu-id="14a36-149">The `obj` parameter is the object to serialize, and will be converted to its surrogate if necessary.</span></span> <span data-ttu-id="14a36-150">Este método debe devolver el objeto de entrada si el suplente no controla el objeto.</span><span class="sxs-lookup"><span data-stu-id="14a36-150">This method must return the input object if the surrogated does not handle the object.</span></span> <span data-ttu-id="14a36-151">De lo contrario, se devolverá el nuevo objeto suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-151">Otherwise, the new surrogate object will be returned.</span></span> <span data-ttu-id="14a36-152">No se llama al suplente si el objeto es NULL.</span><span class="sxs-lookup"><span data-stu-id="14a36-152">The surrogate is not called if the object is null.</span></span> <span data-ttu-id="14a36-153">Las numerosas asignaciones del suplente para las diferentes instancias se pueden definir dentro de este método.</span><span class="sxs-lookup"><span data-stu-id="14a36-153">Numerous surrogate mappings for different instances may be defined within this method.</span></span>  
  
 <span data-ttu-id="14a36-154">Al crear <xref:System.Runtime.Serialization.DataContractSerializer>, puede indicarle que conserve las referencias a objeto.</span><span class="sxs-lookup"><span data-stu-id="14a36-154">When creating a <xref:System.Runtime.Serialization.DataContractSerializer>, you can instruct it to preserve object references.</span></span> <span data-ttu-id="14a36-155">(Para obtener más información, vea [serialización y deserialización](../feature-details/serialization-and-deserialization.md)). Esto se hace estableciendo el `preserveObjectReferences` parámetro en su constructor en `true` .</span><span class="sxs-lookup"><span data-stu-id="14a36-155">(For more information, see [Serialization and Deserialization](../feature-details/serialization-and-deserialization.md).) This is done by setting the `preserveObjectReferences` parameter in its constructor to `true`.</span></span> <span data-ttu-id="14a36-156">En tal caso, se llama al suplente solo una vez para un objeto puesto que todas las serializaciones subsiguientes simplemente escriben la referencia en la secuencia.</span><span class="sxs-lookup"><span data-stu-id="14a36-156">In that case, the surrogate is called only once for an object since all subsequent serializations just write the reference into the stream.</span></span> <span data-ttu-id="14a36-157">Si `preserveObjectReferences` está establecido en `false`, se llama al suplente cada vez que se encuentra una instancia.</span><span class="sxs-lookup"><span data-stu-id="14a36-157">If `preserveObjectReferences` is set to `false`, then the surrogate is called every time an instance is encountered.</span></span>  
  
 <span data-ttu-id="14a36-158">Si el tipo de la instancia serializada difiere del tipo declarado, la información de tipo se escribe en la secuencia, por ejemplo, `xsi:type` para permitir deserializar la instancia en el otro extremo.</span><span class="sxs-lookup"><span data-stu-id="14a36-158">If the type of the instance serialized differs from the declared type, type information is written into the stream, for example, `xsi:type` to allow the instance to be deserialized at the other end.</span></span> <span data-ttu-id="14a36-159">Este proceso se produce tanto si el objeto es suplente como si no.</span><span class="sxs-lookup"><span data-stu-id="14a36-159">This process occurs whether the object is surrogated or not.</span></span>  
  
 <span data-ttu-id="14a36-160">El ejemplo anterior convierte los datos de la instancia `Inventory` en `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="14a36-160">The example above converts the data of the `Inventory` instance to that of `InventorySurrogated`.</span></span> <span data-ttu-id="14a36-161">Comprueba el tipo del objeto y realiza las manipulaciones necesarias para convertirlo al tipo suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-161">It checks the type of the object and performs the necessary manipulations to convert to the surrogated type.</span></span> <span data-ttu-id="14a36-162">En este caso, los campos de la clase `Inventory` se copian directamente encima de los campos de la clase `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="14a36-162">In this case, the fields of the `Inventory` class are directly copied over to the `InventorySurrogated` class fields.</span></span>  
  
### <a name="getdeserializedobject-method"></a><span data-ttu-id="14a36-163">Método GetDeserializedObject</span><span class="sxs-lookup"><span data-stu-id="14a36-163">GetDeserializedObject Method</span></span>  

 <span data-ttu-id="14a36-164">El método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> convierte la instancia de tipo suplente en la instancia de tipo original.</span><span class="sxs-lookup"><span data-stu-id="14a36-164">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> method converts the surrogated type instance to the original type instance.</span></span> <span data-ttu-id="14a36-165">Se requiere para la deserialización.</span><span class="sxs-lookup"><span data-stu-id="14a36-165">It is required for deserialization.</span></span>  
  
 <span data-ttu-id="14a36-166">La tarea siguiente es definir la manera en que los datos físicos se asignarán de la instancia suplente a la instancia original.</span><span class="sxs-lookup"><span data-stu-id="14a36-166">The next task is to define the way the physical data will be mapped from the surrogate instance to the original.</span></span> <span data-ttu-id="14a36-167">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="14a36-167">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#5)]  
  
 <span data-ttu-id="14a36-168">Se llama a este método solo durante la deserialización de un objeto.</span><span class="sxs-lookup"><span data-stu-id="14a36-168">This method is called only during the deserialization of an object.</span></span> <span data-ttu-id="14a36-169">Proporciona asignación inversa de datos para la deserialización del tipo suplente a su tipo original.</span><span class="sxs-lookup"><span data-stu-id="14a36-169">It provides reverse data mapping for the deserialization from the surrogate type back to its original type.</span></span> <span data-ttu-id="14a36-170">Similar al método `GetObjectToSerialize`, algunos posibles usos pueden ser intercambiar directamente los datos de campo, realizar las operaciones en los datos y almacenar los datos XML.</span><span class="sxs-lookup"><span data-stu-id="14a36-170">Similar to the `GetObjectToSerialize` method, some possible uses may be to directly exchange field data, perform operations on the data, and store XML data.</span></span> <span data-ttu-id="14a36-171">Al deserializar, no siempre obtendrá los valores de datos exactos del original debido a las manipulaciones en la conversión de datos.</span><span class="sxs-lookup"><span data-stu-id="14a36-171">When  deserializing, you may not always obtain the exact data values from original due to manipulations in the data conversion.</span></span>  
  
 <span data-ttu-id="14a36-172">El parámetro `targetType` hace referencia al tipo declarado del miembro.</span><span class="sxs-lookup"><span data-stu-id="14a36-172">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="14a36-173">Este parámetro es el tipo suplente devuelto por el método `GetDataContractType`.</span><span class="sxs-lookup"><span data-stu-id="14a36-173">This parameter is the surrogated type returned by the `GetDataContractType` method.</span></span> <span data-ttu-id="14a36-174">El `obj` parámetro hace referencia al objeto que se ha deserializado.</span><span class="sxs-lookup"><span data-stu-id="14a36-174">The `obj` parameter refers to the object that has been deserialized.</span></span> <span data-ttu-id="14a36-175">El objeto se puede convertir de nuevo en su tipo original si es suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-175">The object can be converted back to its original type if it is surrogated.</span></span> <span data-ttu-id="14a36-176">Este método devuelve el objeto de entrada si el suplente no controla el objeto.</span><span class="sxs-lookup"><span data-stu-id="14a36-176">This method returns the input object if the surrogate does not handle the object.</span></span> <span data-ttu-id="14a36-177">De lo contrario, se devolverá el objeto deserializado una vez se haya completado su conversión.</span><span class="sxs-lookup"><span data-stu-id="14a36-177">Otherwise, the deserialized object will be returned once its conversion has been completed.</span></span> <span data-ttu-id="14a36-178">Si existen varios tipos de suplente, puede proporcionar la conversión de datos del suplente al tipo primario para cada uno indicando cada tipo y su conversión.</span><span class="sxs-lookup"><span data-stu-id="14a36-178">If several surrogate types exist, you may provide data conversion from surrogate to primary type for each by indicating each type and its conversion.</span></span>  
  
 <span data-ttu-id="14a36-179">Al devolver un objeto, las tablas de objeto internas se actualizan con el objeto devuelto por este suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-179">When returning an object, the internal object tables are updated with the object returned by this surrogate.</span></span> <span data-ttu-id="14a36-180">Cualquier referencia subsiguiente a una instancia obtendrá la instancia suplente de las tablas de objeto.</span><span class="sxs-lookup"><span data-stu-id="14a36-180">Any subsequent references to an instance will obtain the surrogated instance from the object tables.</span></span>  
  
 <span data-ttu-id="14a36-181">El ejemplo anterior vuelve a convertir objetos de tipo `InventorySurrogated` en el tipo `Inventory`inicial.</span><span class="sxs-lookup"><span data-stu-id="14a36-181">The previous example converts objects of type `InventorySurrogated` back to the initial type `Inventory`.</span></span> <span data-ttu-id="14a36-182">En este caso, los datos se transfieren directamente desde `InventorySurrogated` a sus campos correspondiendo en `Inventory`.</span><span class="sxs-lookup"><span data-stu-id="14a36-182">In this case, data is directly transferred back from `InventorySurrogated` to its corresponding fields in `Inventory`.</span></span> <span data-ttu-id="14a36-183">Puesto que no hay manipulaciones de datos, el cada uno de los campos de miembro contendrá los mismos valores como antes de la serialización.</span><span class="sxs-lookup"><span data-stu-id="14a36-183">Because there are no data manipulations, the each of the member fields will contain the same values as before the serialization.</span></span>  
  
### <a name="getcustomdatatoexport-method"></a><span data-ttu-id="14a36-184">Método GetCustomDataToExport</span><span class="sxs-lookup"><span data-stu-id="14a36-184">GetCustomDataToExport Method</span></span>  

 <span data-ttu-id="14a36-185">Al exportar un esquema, el método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> es opcional.</span><span class="sxs-lookup"><span data-stu-id="14a36-185">When exporting a schema, the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> method is optional.</span></span> <span data-ttu-id="14a36-186">Se utiliza para insertar datos adicionales o sugerencias en el esquema exportado.</span><span class="sxs-lookup"><span data-stu-id="14a36-186">It is used to insert additional data or hints into the exported schema.</span></span> <span data-ttu-id="14a36-187">Los datos adicionales se pueden insertar en el nivel de miembro o el nivel de tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-187">Additional data can be inserted at the member level or type level.</span></span> <span data-ttu-id="14a36-188">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="14a36-188">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#6)]  
  
 <span data-ttu-id="14a36-189">Este método (con dos sobrecargas) habilita la inclusión de información adicional en los metadatos en el nivel de miembro o en el nivel de tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-189">This method (with two overloads) enables the inclusion of extra information into the metadata either at the member or type level.</span></span> <span data-ttu-id="14a36-190">Es posible incluir sugerencias sobre si un miembro es público o privado, y comentarios que se conservarían a lo largo de la exportación e importación del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-190">It is possible to include hints about whether a member is public or private, and comments which would be preserved throughout the export and import of the schema.</span></span> <span data-ttu-id="14a36-191">Tal información se perdería sin este método.</span><span class="sxs-lookup"><span data-stu-id="14a36-191">Such information would be lost without this method.</span></span> <span data-ttu-id="14a36-192">Este método no provoca la inserción o eliminación de miembros o tipos, sino que agrega datos adicionales a los esquemas en cualquiera de estos niveles.</span><span class="sxs-lookup"><span data-stu-id="14a36-192">This method does not cause the insertion or deletion of members or types, but rather adds additional data to the schemas at either of these levels.</span></span>  
  
 <span data-ttu-id="14a36-193">El método está sobrecargado y puede tomar `Type` (parámetro `clrtype`) o <xref:System.Reflection.MemberInfo> (parámetro `memberInfo`).</span><span class="sxs-lookup"><span data-stu-id="14a36-193">The method is overloaded and can take either a `Type` (`clrtype` parameter) or <xref:System.Reflection.MemberInfo> (`memberInfo` parameter).</span></span> <span data-ttu-id="14a36-194">El segundo parámetro es siempre `Type` (parámetro `dataContractType`).</span><span class="sxs-lookup"><span data-stu-id="14a36-194">The second parameter is always a `Type` (`dataContractType` parameter).</span></span> <span data-ttu-id="14a36-195">Se llama a este método para cada miembro y tipo del tipo suplente `dataContractType`.</span><span class="sxs-lookup"><span data-stu-id="14a36-195">This method is called for every member and type of the surrogated `dataContractType` type.</span></span>  
  
 <span data-ttu-id="14a36-196">Cualquiera de estas sobrecargas debe devolver `null` o un objeto serializable.</span><span class="sxs-lookup"><span data-stu-id="14a36-196">Either of these overloads must return either `null` or a serializable object.</span></span> <span data-ttu-id="14a36-197">Un objeto no NULL se serializará como anotación en el esquema exportado.</span><span class="sxs-lookup"><span data-stu-id="14a36-197">A non-null object will be serialized as annotation into the exported schema.</span></span> <span data-ttu-id="14a36-198">Para la sobrecarga `Type`, cada tipo que se exporta al esquema se envía a este método en el primer parámetro junto con el tipo suplente como el parámetro `dataContractType`.</span><span class="sxs-lookup"><span data-stu-id="14a36-198">For the `Type` overload, each type that is exported to schema is sent to this method in the first parameter along with the surrogated type as the `dataContractType` parameter.</span></span> <span data-ttu-id="14a36-199">Para la sobrecarga `MemberInfo`, cada miembro que se exporta al esquema envía su información como el parámetro `memberInfo` con el tipo suplente en el segundo parámetro.</span><span class="sxs-lookup"><span data-stu-id="14a36-199">For the `MemberInfo` overload, each member that is exported to schema sends its information as the `memberInfo` parameter with the surrogated type in the second parameter.</span></span>  
  
#### <a name="getcustomdatatoexport-method-type-type"></a><span data-ttu-id="14a36-200">Método GetCustomDataToExport (Tipo, Tipo)</span><span class="sxs-lookup"><span data-stu-id="14a36-200">GetCustomDataToExport Method (Type, Type)</span></span>  

 <span data-ttu-id="14a36-201">Se llama al método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> durante la exportación de esquema para cada definición de tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-201">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> method is called during schema export for every type definition.</span></span> <span data-ttu-id="14a36-202">El método agrega información a los tipos dentro del esquema al exportar.</span><span class="sxs-lookup"><span data-stu-id="14a36-202">The method adds information to the types within the schema when exporting.</span></span> <span data-ttu-id="14a36-203">Cada tipo definido se envía a este método para determinar si hay datos adicionales que deban incluirse en el esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-203">Each type defined is sent to this method to determine whether there is any additional data that needs to be included in the schema.</span></span>  
  
#### <a name="getcustomdatatoexport-method-memberinfo-type"></a><span data-ttu-id="14a36-204">Método GetCustomDataToExport (MemberInfo, Tipo)</span><span class="sxs-lookup"><span data-stu-id="14a36-204">GetCustomDataToExport Method (MemberInfo, Type)</span></span>  

 <span data-ttu-id="14a36-205">Se llama a <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> durante la exportación para cada miembro en los tipos que se exportan.</span><span class="sxs-lookup"><span data-stu-id="14a36-205">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> is called during export for every member in the types that are exported.</span></span> <span data-ttu-id="14a36-206">Esta función le permite personalizar cualquier comentario para los miembros que se incluirán en el esquema durante la exportación.</span><span class="sxs-lookup"><span data-stu-id="14a36-206">This function enables you to customize any comments for the members that will be included in the schema upon export.</span></span> <span data-ttu-id="14a36-207">La información para cada miembro dentro de la clase se envía a este método para comprobar si deben agregarse datos adicionales en el esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-207">The information for every member within the class is sent to this method to check whether any additional data need to be added in the schema.</span></span>  
  
 <span data-ttu-id="14a36-208">El ejemplo anterior realiza búsquedas a través de `dataContractType` para cada miembro del suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-208">The example above searches through the `dataContractType` for each member of the surrogate.</span></span> <span data-ttu-id="14a36-209">Después devuelve el modificador de acceso adecuado para cada campo.</span><span class="sxs-lookup"><span data-stu-id="14a36-209">It then returns the appropriate access modifier for each field.</span></span> <span data-ttu-id="14a36-210">Sin esta personalización, el valor predeterminado para los modificadores de acceso es público.</span><span class="sxs-lookup"><span data-stu-id="14a36-210">Without this customization, the default value for access modifiers is public.</span></span> <span data-ttu-id="14a36-211">Por consiguiente, todos los miembros se definirían como públicos en el código generado utilizando el esquema exportado sin importar cuáles sean sus restricciones de acceso.</span><span class="sxs-lookup"><span data-stu-id="14a36-211">Therefore, all members would be defined as public in the code generated using the exported schema no matter what their actual access restrictions are.</span></span> <span data-ttu-id="14a36-212">Si no se utilizara esta implementación, el miembro `numpens` sería público en el esquema exportado aunque se hubiera definido en el suplente como privado.</span><span class="sxs-lookup"><span data-stu-id="14a36-212">When not using this implementation, the member `numpens` would be public in the exported schema even though it was defined in the surrogate as private.</span></span> <span data-ttu-id="14a36-213">A través del uso de este método, en el esquema exportado, el modificador de acceso se puede generar como privado.</span><span class="sxs-lookup"><span data-stu-id="14a36-213">Through the use of this method, in the exported schema, the access modifier can be generated as private.</span></span>  
  
### <a name="getreferencedtypeonimport-method"></a><span data-ttu-id="14a36-214">Método GetReferencedTypeOnImport</span><span class="sxs-lookup"><span data-stu-id="14a36-214">GetReferencedTypeOnImport Method</span></span>  

 <span data-ttu-id="14a36-215">Este método asigna <xref:System.Type> del suplente al tipo original.</span><span class="sxs-lookup"><span data-stu-id="14a36-215">This method maps the <xref:System.Type> of the surrogate to the original type.</span></span> <span data-ttu-id="14a36-216">Este método es opcional para la importación del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-216">This method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="14a36-217">Al crear un suplente que importa un esquema y genera el código para él, la tarea siguiente es definir el tipo de una instancia suplente en relación a su tipo original.</span><span class="sxs-lookup"><span data-stu-id="14a36-217">When creating a surrogate that imports a schema and generates code for it, the next task is to define the type of a surrogate instance to its original type.</span></span>  
  
 <span data-ttu-id="14a36-218">Si el código generado necesita hacer referencia a un tipo de usuario existente, esto se hace implementando el método <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-218">If the generated code needs to reference an existing user type, this is done by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> method.</span></span>  
  
 <span data-ttu-id="14a36-219">Al importar un esquema, se llama a este método para cada declaración de tipos para asignar el contrato de datos suplente a un tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-219">When importing a schema, this method is called for every type declaration to map the surrogated data contract to a type.</span></span> <span data-ttu-id="14a36-220">Los parámetros de cadena `typeName` y `typeNamespace` definen el nombre y espacio de nombres del tipo suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-220">The string parameters `typeName` and `typeNamespace` define the name and namespace of the surrogated type.</span></span> <span data-ttu-id="14a36-221">El valor devuelto para <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> se utiliza para determinar si debe generarse un nuevo tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-221">The return value for <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> is used to determine whether a new type needs to be generated.</span></span> <span data-ttu-id="14a36-222">Este método debe devolver un tipo válido o NULL.</span><span class="sxs-lookup"><span data-stu-id="14a36-222">This method must return either a valid type or null.</span></span> <span data-ttu-id="14a36-223">Para los tipos válidos, el tipo devuelto se utilizará como un tipo referenciado en el código generado.</span><span class="sxs-lookup"><span data-stu-id="14a36-223">For valid types, the type returned will be used as a referenced type in the generated code.</span></span> <span data-ttu-id="14a36-224">Si se devuelve NULL, no se referenciará ningún tipo y deberá crearse un nuevo tipo.</span><span class="sxs-lookup"><span data-stu-id="14a36-224">If null is returned, no type will be referenced and a new type must be created.</span></span> <span data-ttu-id="14a36-225">Si existen varios suplentes, es posible volver a realizar la asignación para cada tipo suplente a su tipo inicial.</span><span class="sxs-lookup"><span data-stu-id="14a36-225">If several surrogates exist, it is possible to perform the mapping for each surrogate type back to its initial type.</span></span>  
  
 <span data-ttu-id="14a36-226">El parámetro `customData` es originalmente el objeto devuelto de <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-226">The `customData` parameter is the object originally returned from <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>.</span></span> <span data-ttu-id="14a36-227">Se utiliza `customData` cuando los autores suplentes desean insertar datos adicionales/sugerencias en los metadatos para utilizar durante importación para generar código.</span><span class="sxs-lookup"><span data-stu-id="14a36-227">This `customData` is used when surrogate authors want to insert extra data/hints into the metadata to use during import to generate code.</span></span>  
  
### <a name="processimportedtype-method"></a><span data-ttu-id="14a36-228">Método ProcessImportedType</span><span class="sxs-lookup"><span data-stu-id="14a36-228">ProcessImportedType Method</span></span>  

 <span data-ttu-id="14a36-229">El método <xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> personaliza cualquier tipo creado a partir de la importación del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-229">The <xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> method customizes any type created from schema importation.</span></span> <span data-ttu-id="14a36-230">Este método es opcional.</span><span class="sxs-lookup"><span data-stu-id="14a36-230">This method is optional.</span></span>  
  
 <span data-ttu-id="14a36-231">Al importar un esquema, este método permite la personalización de cualquiera tipo importado e información de compilación.</span><span class="sxs-lookup"><span data-stu-id="14a36-231">When importing a schema, this method allows for any imported type and compilation information to be customized.</span></span> <span data-ttu-id="14a36-232">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="14a36-232">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#7)]  
  
 <span data-ttu-id="14a36-233">Durante la importación, se llama a este método para cada tipo generado.</span><span class="sxs-lookup"><span data-stu-id="14a36-233">During import, this method is called for every type generated.</span></span> <span data-ttu-id="14a36-234">Cambie el <xref:System.CodeDom.CodeTypeDeclaration> especificado o modifique <xref:System.CodeDom.CodeCompileUnit>.</span><span class="sxs-lookup"><span data-stu-id="14a36-234">Change the specified <xref:System.CodeDom.CodeTypeDeclaration> or modify the <xref:System.CodeDom.CodeCompileUnit>.</span></span> <span data-ttu-id="14a36-235">Esto incluye cambiar el nombre, miembros, atributos y muchas otras propiedades de `CodeTypeDeclaration`.</span><span class="sxs-lookup"><span data-stu-id="14a36-235">This includes changing the name, members, attributes, and many other properties of the `CodeTypeDeclaration`.</span></span> <span data-ttu-id="14a36-236">Al procesar `CodeCompileUnit`, es posible modificar las directivas, espacios de nombres, ensamblados referenciados y varios otros aspectos.</span><span class="sxs-lookup"><span data-stu-id="14a36-236">By processing the `CodeCompileUnit`, it is possible to modify the directives, namespaces, referenced assemblies, and several other aspects.</span></span>  
  
 <span data-ttu-id="14a36-237">El parámetro `CodeTypeDeclaration` contiene la declaración de tipos de código DOM.</span><span class="sxs-lookup"><span data-stu-id="14a36-237">The `CodeTypeDeclaration` parameter contains the code DOM type declaration.</span></span> <span data-ttu-id="14a36-238">El parámetro `CodeCompileUnit` permite la modificación para procesar el código.</span><span class="sxs-lookup"><span data-stu-id="14a36-238">The `CodeCompileUnit` parameter allows for modification for processing the code.</span></span>  <span data-ttu-id="14a36-239">Devolver los resultados `null` descartados en la declaración de tipos.</span><span class="sxs-lookup"><span data-stu-id="14a36-239">Returning `null` results in the type declaration being discarded.</span></span> <span data-ttu-id="14a36-240">A la inversa, al devolver `CodeTypeDeclaration`, se conservan las modificaciones.</span><span class="sxs-lookup"><span data-stu-id="14a36-240">Conversely, when returning a `CodeTypeDeclaration`, the modifications are preserved.</span></span>  
  
 <span data-ttu-id="14a36-241">Si se insertan datos personalizados durante la exportación de metadatos, debe ser proporcionado al usuario durante la importación para que lo pueda utilizar.</span><span class="sxs-lookup"><span data-stu-id="14a36-241">If custom data is inserted during metadata export, it needs to be provided to the user during import so that it can be used.</span></span> <span data-ttu-id="14a36-242">Estos datos personalizados se pueden utilizar para las sugerencias del modelo de programación u otros comentarios.</span><span class="sxs-lookup"><span data-stu-id="14a36-242">This custom data can be used for programming model hints, or other comments.</span></span> <span data-ttu-id="14a36-243">Cada instancia `CodeTypeDeclaration` y <xref:System.CodeDom.CodeTypeMember> incluye datos personalizados como la propiedad <xref:System.CodeDom.CodeObject.UserData%2A>, convertida al tipo `IDataContractSurrogate`.</span><span class="sxs-lookup"><span data-stu-id="14a36-243">Each `CodeTypeDeclaration` and <xref:System.CodeDom.CodeTypeMember> instance includes custom data as the <xref:System.CodeDom.CodeObject.UserData%2A> property, cast to the `IDataContractSurrogate` type.</span></span>  
  
 <span data-ttu-id="14a36-244">El ejemplo anterior realiza algunos cambios en el esquema importado.</span><span class="sxs-lookup"><span data-stu-id="14a36-244">The example above performs some changes on the schema imported.</span></span> <span data-ttu-id="14a36-245">El código conserva los miembros privados del tipo original utilizando un suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-245">The code preserves private members of the original type by using a surrogate.</span></span> <span data-ttu-id="14a36-246">El modificador de acceso predeterminado al importar un esquema es `public`.</span><span class="sxs-lookup"><span data-stu-id="14a36-246">The default access modifier when importing a schema is `public`.</span></span> <span data-ttu-id="14a36-247">Por consiguiente, todos los miembros del esquema suplente serán públicos a menos que se hayan modificado, como en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="14a36-247">Therefore, all members of the surrogate schema will be public unless modified, as in this example.</span></span> <span data-ttu-id="14a36-248">Durante la exportación, los datos personalizados se insertan en los metadatos sobre qué miembros son privados.</span><span class="sxs-lookup"><span data-stu-id="14a36-248">During export, custom data is inserted into the metadata about which members are private.</span></span> <span data-ttu-id="14a36-249">El ejemplo consulta los datos personalizados, comprueba si el modificador de acceso es privado y, a continuación, modifica el miembro adecuado para que sea privado estableciendo sus atributos.</span><span class="sxs-lookup"><span data-stu-id="14a36-249">The example looks up the custom data, checks whether the access modifier is private, and then modifies the appropriate member to be private by setting its attributes.</span></span> <span data-ttu-id="14a36-250">Sin esta personalización, el miembro `numpens` se definiría como público en lugar de privado.</span><span class="sxs-lookup"><span data-stu-id="14a36-250">Without this customization, the `numpens` member would be defined as public instead of private.</span></span>  
  
### <a name="getknowncustomdatatypes-method"></a><span data-ttu-id="14a36-251">Método GetKnownCustomDataTypes</span><span class="sxs-lookup"><span data-stu-id="14a36-251">GetKnownCustomDataTypes Method</span></span>  

 <span data-ttu-id="14a36-252">Este método obtiene tipos de datos personalizados definidos a partir del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-252">This method obtains custom data types defined from the schema.</span></span> <span data-ttu-id="14a36-253">Este método es opcional para la importación del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-253">The method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="14a36-254">Se llama al método al principio de la exportación e importación del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-254">The method is called at the beginning of schema export and import.</span></span> <span data-ttu-id="14a36-255">El método devuelve los tipos de datos personalizados utilizados en el esquema exportado o importado.</span><span class="sxs-lookup"><span data-stu-id="14a36-255">The method returns the custom data types used in the schema exported or imported.</span></span> <span data-ttu-id="14a36-256">El método se pasa a <xref:System.Collections.ObjectModel.Collection%601> (el parámetro `customDataTypes`), que es una colección de tipos.</span><span class="sxs-lookup"><span data-stu-id="14a36-256">The method is passed a <xref:System.Collections.ObjectModel.Collection%601> (the `customDataTypes` parameter), which is a collection of types.</span></span> <span data-ttu-id="14a36-257">El método debería agregar los tipos conocidos adicionales a esta colección.</span><span class="sxs-lookup"><span data-stu-id="14a36-257">The method should add additional known types to this collection.</span></span> <span data-ttu-id="14a36-258">Los tipos de datos personalizados conocidos son necesarios para habilitar la serialización y deserialización de datos personalizados utilizando <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="14a36-258">The known custom data types are needed to enable serialization and deserialization of custom data using the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="14a36-259">Para obtener más información, vea [tipos conocidos de contratos de datos](../feature-details/data-contract-known-types.md).</span><span class="sxs-lookup"><span data-stu-id="14a36-259">For more information, see [Data Contract Known Types](../feature-details/data-contract-known-types.md).</span></span>  
  
## <a name="implementing-a-surrogate"></a><span data-ttu-id="14a36-260">Implementar un suplente</span><span class="sxs-lookup"><span data-stu-id="14a36-260">Implementing a Surrogate</span></span>  

 <span data-ttu-id="14a36-261">Para utilizar el suplente del contrato de datos en WCF, debe seguir algunos procedimientos especiales.</span><span class="sxs-lookup"><span data-stu-id="14a36-261">To use the data contract surrogate within WCF, you must follow a few special procedures.</span></span>  
  
### <a name="to-use-a-surrogate-for-serialization-and-deserialization"></a><span data-ttu-id="14a36-262">Para utilizar un suplente para la serialización y deserialización</span><span class="sxs-lookup"><span data-stu-id="14a36-262">To Use a Surrogate for Serialization and Deserialization</span></span>  

 <span data-ttu-id="14a36-263">Utilice <xref:System.Runtime.Serialization.DataContractSerializer> para realizar la serialización y deserialización de datos con el suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-263">Use the <xref:System.Runtime.Serialization.DataContractSerializer> to perform serialization and deserialization of data with the surrogate.</span></span> <span data-ttu-id="14a36-264"><xref:System.Runtime.Serialization.DataContractSerializer> es creado por <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span><span class="sxs-lookup"><span data-stu-id="14a36-264">The <xref:System.Runtime.Serialization.DataContractSerializer> is created by the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span></span> <span data-ttu-id="14a36-265">También se debe especificar el suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-265">The surrogate must also be specified.</span></span>  
  
##### <a name="to-implement-serialization-and-deserialization"></a><span data-ttu-id="14a36-266">Para implementar serialización y deserialización</span><span class="sxs-lookup"><span data-stu-id="14a36-266">To implement serialization and deserialization</span></span>  
  
1. <span data-ttu-id="14a36-267">Cree una instancia de <xref:System.ServiceModel.ServiceHost> para su servicio.</span><span class="sxs-lookup"><span data-stu-id="14a36-267">Create an instance of the <xref:System.ServiceModel.ServiceHost> for your service.</span></span> <span data-ttu-id="14a36-268">Para obtener instrucciones completas, vea [programación básica de WCF](../basic-wcf-programming.md).</span><span class="sxs-lookup"><span data-stu-id="14a36-268">For complete instructions, see [Basic WCF Programming](../basic-wcf-programming.md).</span></span>  
  
2. <span data-ttu-id="14a36-269">Para cada <xref:System.ServiceModel.Description.ServiceEndpoint> del host del servicio especificado, busque <xref:System.ServiceModel.Description.OperationDescription>.</span><span class="sxs-lookup"><span data-stu-id="14a36-269">For every <xref:System.ServiceModel.Description.ServiceEndpoint> of the specified service host, find its <xref:System.ServiceModel.Description.OperationDescription>.</span></span>  
  
3. <span data-ttu-id="14a36-270">Busque a través de los comportamientos de la operación para determinar si se encuentra una instancia de <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span><span class="sxs-lookup"><span data-stu-id="14a36-270">Search through the operation behaviors to determine if an instance of the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found.</span></span>  
  
4. <span data-ttu-id="14a36-271">Si se encuentra <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>, establezca su propiedad <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> en una nueva instancia del suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-271">If a <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, set its <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> property to a new instance of the surrogate.</span></span> <span data-ttu-id="14a36-272">Si no se encuentra <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>, cree una nueva instancia y establezca el miembro <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> del nuevo comportamiento en una nueva instancia del suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-272">If no <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, then create a new instance and set the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> member of the new behavior to a new instance of the surrogate.</span></span>  
  
5. <span data-ttu-id="14a36-273">Finalmente, agregue este nuevo comportamiento a los comportamientos actuales de la operación, como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="14a36-273">Finally, add this new behavior to the current operation behaviors, as shown in the following example:</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#8)]  
  
### <a name="to-use-a-surrogate-for-metadata-import"></a><span data-ttu-id="14a36-274">Para utilizar un suplente para importar metadatos</span><span class="sxs-lookup"><span data-stu-id="14a36-274">To Use a Surrogate for Metadata Import</span></span>  

 <span data-ttu-id="14a36-275">Al importar los metadatos como WSDL y XSD para generar el código del lado del cliente, el suplente debe ser agregado al componente responsable para generar código del esquema XSD, <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span><span class="sxs-lookup"><span data-stu-id="14a36-275">When importing metadata like WSDL and XSD to generate client-side code, the surrogate needs to be added to the component responsible for generating code from XSD schema, <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span> <span data-ttu-id="14a36-276">Para ello, directamente modifique <xref:System.ServiceModel.Description.WsdlImporter> utilizado para importar los metadatos.</span><span class="sxs-lookup"><span data-stu-id="14a36-276">To do this, directly modify the <xref:System.ServiceModel.Description.WsdlImporter> used to import metadata.</span></span>  
  
##### <a name="to-implement-a-surrogate-for-metadata-importation"></a><span data-ttu-id="14a36-277">Para implementar un suplente para la importación de metadatos</span><span class="sxs-lookup"><span data-stu-id="14a36-277">To implement a surrogate for metadata importation</span></span>  
  
1. <span data-ttu-id="14a36-278">Importe los metadatos mediante la clase <xref:System.ServiceModel.Description.WsdlImporter>.</span><span class="sxs-lookup"><span data-stu-id="14a36-278">Import the metadata using the <xref:System.ServiceModel.Description.WsdlImporter> class.</span></span>  
  
2. <span data-ttu-id="14a36-279">Utilice el método <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> para comprobar si se ha definido <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span><span class="sxs-lookup"><span data-stu-id="14a36-279">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method to check whether an <xref:System.Runtime.Serialization.XsdDataContractImporter> has been defined.</span></span>  
  
3. <span data-ttu-id="14a36-280">Si el método <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> devuelve `false`, cree un nuevo <xref:System.Runtime.Serialization.XsdDataContractImporter> y establece su propiedad <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> a una nueva instancia de la clase <xref:System.Runtime.Serialization.ImportOptions>.</span><span class="sxs-lookup"><span data-stu-id="14a36-280">If the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractImporter> and set its <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="14a36-281">De lo contrario, utilice el importador devuelto por el parámetro `out` del método <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-281">Otherwise, use the importer returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4. <span data-ttu-id="14a36-282">Si <xref:System.Runtime.Serialization.XsdDataContractImporter> no tiene <xref:System.Runtime.Serialization.ImportOptions> definido, establezca la propiedad para que sea una nueva instancia de la clase <xref:System.Runtime.Serialization.ImportOptions>.</span><span class="sxs-lookup"><span data-stu-id="14a36-282">If the <xref:System.Runtime.Serialization.XsdDataContractImporter> has no <xref:System.Runtime.Serialization.ImportOptions> defined, then set the property to be a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span>  
  
5. <span data-ttu-id="14a36-283">Establezca la propiedad <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> de <xref:System.Runtime.Serialization.ImportOptions> de <xref:System.Runtime.Serialization.XsdDataContractImporter> en una nueva instancia del suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-283">Set the <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to a new instance of the surrogate.</span></span>  
  
6. <span data-ttu-id="14a36-284">Agregue <xref:System.Runtime.Serialization.XsdDataContractImporter> a la colección devuelta por la propiedad <xref:System.ServiceModel.Description.MetadataExporter.State%2A> de <xref:System.ServiceModel.Description.WsdlImporter> (heredada de la clase <xref:System.ServiceModel.Description.MetadataExporter>).</span><span class="sxs-lookup"><span data-stu-id="14a36-284">Add the <xref:System.Runtime.Serialization.XsdDataContractImporter> to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlImporter> (inherited from the <xref:System.ServiceModel.Description.MetadataExporter> class.)</span></span>  
  
7. <span data-ttu-id="14a36-285">Utilice el método <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> de <xref:System.ServiceModel.Description.WsdlImporter> para importar todos los contratos de datos dentro del esquema.</span><span class="sxs-lookup"><span data-stu-id="14a36-285">Use the <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> method of the <xref:System.ServiceModel.Description.WsdlImporter> to import all of the data contracts within the schema.</span></span> <span data-ttu-id="14a36-286">Durante el último paso, el código se genera a partir de los esquemas cargados llamando en el suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-286">During the last step, code is generated from the schemas loaded by calling into the surrogate.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#9)]  
  
### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="14a36-287">Para utilizar un suplente para exportar metadatos</span><span class="sxs-lookup"><span data-stu-id="14a36-287">To Use a surrogate for Metadata Export</span></span>  

 <span data-ttu-id="14a36-288">De forma predeterminada, cuando se exportan metadatos de WCF para un servicio, es necesario generar el esquema de WSDL y XSD.</span><span class="sxs-lookup"><span data-stu-id="14a36-288">By default, when exporting metadata from WCF for a service, both WSDL and XSD schema needs to be generated.</span></span> <span data-ttu-id="14a36-289">El suplente necesita ser agregado al componente responsable para generar el esquema XSD para los tipos de contrato de datos, <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span><span class="sxs-lookup"><span data-stu-id="14a36-289">The surrogate needs to be added to the component responsible for generating XSD schema for data contract types, <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span></span> <span data-ttu-id="14a36-290">Para ello, utilice un comportamiento que implemente <xref:System.ServiceModel.Description.IWsdlExportExtension> para modificar <xref:System.ServiceModel.Description.WsdlExporter>o directamente modifique <xref:System.ServiceModel.Description.WsdlExporter> utilizado para exportar los metadatos.</span><span class="sxs-lookup"><span data-stu-id="14a36-290">To do this, either use a behavior that implements <xref:System.ServiceModel.Description.IWsdlExportExtension> to modify the <xref:System.ServiceModel.Description.WsdlExporter>, or directly modify the <xref:System.ServiceModel.Description.WsdlExporter> used to export metadata.</span></span>  
  
##### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="14a36-291">Para utilizar un suplente para exportar metadatos</span><span class="sxs-lookup"><span data-stu-id="14a36-291">To use a surrogate for metadata export</span></span>  
  
1. <span data-ttu-id="14a36-292">Cree un nuevo <xref:System.ServiceModel.Description.WsdlExporter> o utilice el parámetro `wsdlExporter` pasado al método <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-292">Create a new <xref:System.ServiceModel.Description.WsdlExporter> or use the `wsdlExporter` parameter passed to the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
2. <span data-ttu-id="14a36-293">Utilice la función <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> para comprobar si se ha definido <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span><span class="sxs-lookup"><span data-stu-id="14a36-293">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> function to check whether an <xref:System.Runtime.Serialization.XsdDataContractExporter> has been defined.</span></span>  
  
3. <span data-ttu-id="14a36-294">Si <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> devuelve `false`, cree un nuevo <xref:System.Runtime.Serialization.XsdDataContractExporter> con los esquemas XML generados de <xref:System.ServiceModel.Description.WsdlExporter>y agréguelo a la colección devuelta por la propiedad <xref:System.ServiceModel.Description.MetadataExporter.State%2A> de <xref:System.ServiceModel.Description.WsdlExporter>.</span><span class="sxs-lookup"><span data-stu-id="14a36-294">If <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractExporter> with the generated XML schemas from the <xref:System.ServiceModel.Description.WsdlExporter>, and add it to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter>.</span></span> <span data-ttu-id="14a36-295">De lo contrario, utilice el exportador devuelto por el parámetro `out` del método <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="14a36-295">Otherwise, use the exporter returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4. <span data-ttu-id="14a36-296">Si <xref:System.Runtime.Serialization.XsdDataContractExporter> no tiene <xref:System.Runtime.Serialization.ExportOptions> definido, establezca la propiedad <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> en una nueva instancia de la clase <xref:System.Runtime.Serialization.ExportOptions>.</span><span class="sxs-lookup"><span data-stu-id="14a36-296">If the <xref:System.Runtime.Serialization.XsdDataContractExporter> has no <xref:System.Runtime.Serialization.ExportOptions> defined, then set the <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ExportOptions> class.</span></span>  
  
5. <span data-ttu-id="14a36-297">Establezca la propiedad <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> de <xref:System.Runtime.Serialization.ExportOptions> de <xref:System.Runtime.Serialization.XsdDataContractExporter> en una nueva instancia del suplente.</span><span class="sxs-lookup"><span data-stu-id="14a36-297">Set the <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ExportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractExporter> to a new instance of the surrogate.</span></span> <span data-ttu-id="14a36-298">Los pasos subsiguientes para exportar los metadatos no requieren ningún cambio.</span><span class="sxs-lookup"><span data-stu-id="14a36-298">Subsequent steps for exporting metadata do not require any changes.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#10)]  
  
## <a name="see-also"></a><span data-ttu-id="14a36-299">Vea también</span><span class="sxs-lookup"><span data-stu-id="14a36-299">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.IDataContractSurrogate>
- <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>
- <xref:System.Runtime.Serialization.ImportOptions>
- <xref:System.Runtime.Serialization.ExportOptions>
- [<span data-ttu-id="14a36-300">Utilización de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="14a36-300">Using Data Contracts</span></span>](../feature-details/using-data-contracts.md)

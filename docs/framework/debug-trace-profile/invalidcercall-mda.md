---
title: MDA de invalidCERCall
description: Revise el Asistente para la depuración administrada (MDA) invalidCERCall, que se activa si hay una llamada no válida en el gráfico de la región de ejecución restringida (CER).
ms.date: 03/30/2017
helpviewer_keywords:
- invalid CER calls
- InvalidCERCall MDA
- MDAs (managed debugging assistants), CER calls
- constrained execution regions
- CER calls
- managed debugging assistants (MDAs), CER calls
ms.assetid: c4577410-602e-44e5-9dab-fea7c55bcdfe
ms.openlocfilehash: 6f0d9d8e3059729098975080224999d0c0fac46e
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96272662"
---
# <a name="invalidcercall-mda"></a><span data-ttu-id="2a370-103">MDA de invalidCERCall</span><span class="sxs-lookup"><span data-stu-id="2a370-103">invalidCERCall MDA</span></span>

<span data-ttu-id="2a370-104">El Asistente para la depuración administrada (MDA) `invalidCERCall` se activa cuando hay una llamada desde el gráfico de región de ejecución restringida (CER) a un método que no tiene ningún contrato de confiabilidad o un contrato excesivamente débil.</span><span class="sxs-lookup"><span data-stu-id="2a370-104">The `invalidCERCall` managed debugging assistant (MDA) is activated when there is a call within the constrained execution region (CER) graph to a method that has no reliability contract or an excessively weak contract.</span></span> <span data-ttu-id="2a370-105">Un contrato débil es el que declara que el peor caso de daño de estado tiene un ámbito mayor que la instancia que se pasa a la llamada, es decir, el estado de <xref:System.AppDomain> o del proceso puede resultar dañado o su resultado no siempre se puede calcular de forma determinista cuando se llama desde dentro de una CER.</span><span class="sxs-lookup"><span data-stu-id="2a370-105">A weak contract is a contract that declares that the worst case state corruption is of greater scope than the instance passed to the call, that is, the <xref:System.AppDomain> or process state may become corrupted or that its result is not always deterministically computable when called within a CER.</span></span>  
  
## <a name="symptoms"></a><span data-ttu-id="2a370-106">Síntomas</span><span class="sxs-lookup"><span data-stu-id="2a370-106">Symptoms</span></span>  

 <span data-ttu-id="2a370-107">Resultados inesperados cuando se ejecuta código en una CER.</span><span class="sxs-lookup"><span data-stu-id="2a370-107">Unexpected results when executing code in a CER.</span></span> <span data-ttu-id="2a370-108">Los síntomas no son específicos.</span><span class="sxs-lookup"><span data-stu-id="2a370-108">The symptoms are not specific.</span></span> <span data-ttu-id="2a370-109">Podría ser una excepción <xref:System.OutOfMemoryException>, <xref:System.Threading.ThreadAbortException> inesperada o de otro tipo en la llamada al método no confiable porque el tiempo de ejecución no lo preparó por adelantado ni lo protegió de excepciones <xref:System.Threading.ThreadAbortException> en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="2a370-109">They could be an unexpected <xref:System.OutOfMemoryException>, a <xref:System.Threading.ThreadAbortException>, or other exceptions at the call into the unreliable method because the runtime did not prepare it ahead of time or protect it from <xref:System.Threading.ThreadAbortException> exceptions at run time.</span></span> <span data-ttu-id="2a370-110">Una amenaza mayor es que cualquier excepción resultante del método en tiempo de ejecución podría dejar al <xref:System.AppDomain> o al proceso en un estado inestable, lo que contradice el objetivo de una CER.</span><span class="sxs-lookup"><span data-stu-id="2a370-110">A greater threat is that any exception resulting from the method at run time could leave the <xref:System.AppDomain> or process in an unstable state, which is contrary to the objective of a CER.</span></span> <span data-ttu-id="2a370-111">El motivo por el que se crea una CER es para evitar este tipo de daños de estado.</span><span class="sxs-lookup"><span data-stu-id="2a370-111">The reason a CER is created is to avoid state corruptions such as this.</span></span> <span data-ttu-id="2a370-112">Los síntomas de estado dañado son específicos de la aplicación porque la definición de estado coherente es diferente entre aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="2a370-112">The symptoms of corrupt state are application specific because the definition of consistent state is different between applications.</span></span>  
  
## <a name="cause"></a><span data-ttu-id="2a370-113">Causa</span><span class="sxs-lookup"><span data-stu-id="2a370-113">Cause</span></span>  

 <span data-ttu-id="2a370-114">El código dentro de una CER llama a una función sin <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> o con un <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> débil que no es compatible con la ejecución en una CER.</span><span class="sxs-lookup"><span data-stu-id="2a370-114">Code within a CER is calling a function with no <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> or with a weak <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> that is not compatible with running in a CER.</span></span>  
  
 <span data-ttu-id="2a370-115">En cuanto a la sintaxis de contratos de confiabilidad, un contrato débil es el que no especifica un valor de enumeración <xref:System.Runtime.ConstrainedExecution.Consistency> o especifica un valor <xref:System.Runtime.ConstrainedExecution.Consistency> de <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>, o <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span><span class="sxs-lookup"><span data-stu-id="2a370-115">In terms of reliability contract syntax, a weak contract is a contract that does not specify a <xref:System.Runtime.ConstrainedExecution.Consistency> enumeration value or specifies a <xref:System.Runtime.ConstrainedExecution.Consistency> value of <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>, or <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span> <span data-ttu-id="2a370-116">Cualquiera de estas condiciones indica que el código que se llama puede impedir los esfuerzos del otro código de la CER para mantener un estado coherente.</span><span class="sxs-lookup"><span data-stu-id="2a370-116">Any of these conditions indicates that the code called may impede the efforts of the other code in the CER to maintain consistent state.</span></span>  <span data-ttu-id="2a370-117">Las CER permiten al código tratar los errores de una manera muy determinista, manteniendo invariables internas que son importantes para la aplicación y permitiendo que se siga ejecutando en presencia de errores transitorios como excepciones de memoria insuficiente.</span><span class="sxs-lookup"><span data-stu-id="2a370-117">CERs allow code to treat errors in a very deterministic manner, maintaining internal invariants that are important to the application and allowing it to continue running in the face of transient errors such as out-of-memory exceptions.</span></span>  
  
 <span data-ttu-id="2a370-118">La activación de este MDA indica una posibilidad de que el método que se llama en la CER pueda producir un error que el autor de la llamada no esperaba o que deje el estado de <xref:System.AppDomain> o del proceso dañado o irrecuperable.</span><span class="sxs-lookup"><span data-stu-id="2a370-118">The activation of this MDA indicates a possibility the method being called in the CER can fail in a way that the caller did not expect or that leaves the <xref:System.AppDomain> or process state corrupted or unrecoverable.</span></span> <span data-ttu-id="2a370-119">Por supuesto, es posible que el código llamado se ejecute correctamente y el problema sea simplemente un contrato que falta.</span><span class="sxs-lookup"><span data-stu-id="2a370-119">Of course, the called code might execute correctly and the problem is simply a missing contract.</span></span> <span data-ttu-id="2a370-120">Pero los problemas implicados en la escritura de código confiable son sutiles y la ausencia de un contrato es un buen indicador de que es posible que el código no se ejecute correctamente.</span><span class="sxs-lookup"><span data-stu-id="2a370-120">However, the issues involved in writing reliable code are subtle and the absence of a contract is a good indicator the code might not execute correctly.</span></span> <span data-ttu-id="2a370-121">Los contratos son indicadores de que el programador ha codificado de forma confiable y además promete que estas garantías no cambiarán en revisiones futuras del código.</span><span class="sxs-lookup"><span data-stu-id="2a370-121">The contracts are indicators that the programmer has coded reliably and also promises that these guarantees will not change in future revisions of the code.</span></span>  <span data-ttu-id="2a370-122">Es decir, los contratos son declaraciones de intención y no solo detalles de implementación.</span><span class="sxs-lookup"><span data-stu-id="2a370-122">That is, the contracts are declarations of intent and not just implementation details.</span></span>  
  
 <span data-ttu-id="2a370-123">Dado que cualquier método con un contrato débil o inexistente puede producir errores de muchas maneras impredecibles, el tiempo de ejecución no intenta eliminar del método ninguno de sus propios errores impredecibles que se introducen mediante la compilación JIT lenta, la especificación de diccionarios genéricos o la anulación de subprocesos, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="2a370-123">Because any method with a weak or nonexistent contract can potentially fail in many unpredictable ways, the runtime does not attempt to remove any of its own unpredictable failures from the method  that are introduced by lazy JIT-compiling, generics dictionary population, or thread aborts, for example.</span></span> <span data-ttu-id="2a370-124">Es decir, cuando se activa este MDA, indica que el tiempo de ejecución no incluyó el método llamado en la CER que se está definiendo; el gráfico de llamadas se terminó en este nodo porque continuar la preparación de este subárbol ayudaría a ocultar el posible error.</span><span class="sxs-lookup"><span data-stu-id="2a370-124">That is, when this MDA is activated, it indicates that the runtime did not include the called method in the CER being defined; the call graph was terminated at this node because continuing to prepare this subtree would help mask the potential error.</span></span>  
  
## <a name="resolution"></a><span data-ttu-id="2a370-125">Solución</span><span class="sxs-lookup"><span data-stu-id="2a370-125">Resolution</span></span>  

 <span data-ttu-id="2a370-126">Agregar un contrato de confiabilidad válido a la función o evitar usar esa llamada de función.</span><span class="sxs-lookup"><span data-stu-id="2a370-126">Add a valid reliability contract to the function or avoid using that function call.</span></span>  
  
## <a name="effect-on-the-runtime"></a><span data-ttu-id="2a370-127">Efecto en el Runtime</span><span class="sxs-lookup"><span data-stu-id="2a370-127">Effect on the Runtime</span></span>  

 <span data-ttu-id="2a370-128">El efecto de llamar a un contrato débil desde una CER podría ser que la CER no pueda completar sus operaciones.</span><span class="sxs-lookup"><span data-stu-id="2a370-128">The effect of calling a weak contract from a CER could be the CER failure to complete its operations.</span></span> <span data-ttu-id="2a370-129">Esto podría provocar daños en el estado de proceso del <xref:System.AppDomain>.</span><span class="sxs-lookup"><span data-stu-id="2a370-129">This could lead to corruption of the <xref:System.AppDomain> process state.</span></span>  
  
## <a name="output"></a><span data-ttu-id="2a370-130">Resultados</span><span class="sxs-lookup"><span data-stu-id="2a370-130">Output</span></span>  

 <span data-ttu-id="2a370-131">A continuación puede ver un resultado de ejemplo de este MDA.</span><span class="sxs-lookup"><span data-stu-id="2a370-131">The following is sample output from this MDA.</span></span>  
  
 `Method 'MethodWithCer', while executing within a constrained execution region, makes a call at IL offset 0x000C to 'MethodWithWeakContract', which does not have a sufficiently strong reliability contract and might cause non-deterministic results.`  
  
## <a name="configuration"></a><span data-ttu-id="2a370-132">Configuración</span><span class="sxs-lookup"><span data-stu-id="2a370-132">Configuration</span></span>  
  
```xml  
<mdaConfig>  
  <assistants>  
    <invalidCERCall />  
  </assistants>  
</mdaConfig>  
```  
  
## <a name="see-also"></a><span data-ttu-id="2a370-133">Vea también</span><span class="sxs-lookup"><span data-stu-id="2a370-133">See also</span></span>

- <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A>
- <xref:System.Runtime.ConstrainedExecution>
- [<span data-ttu-id="2a370-134">Diagnóstico de errores con asistentes de depuraciones administradas</span><span class="sxs-lookup"><span data-stu-id="2a370-134">Diagnosing Errors with Managed Debugging Assistants</span></span>](diagnosing-errors-with-managed-debugging-assistants.md)

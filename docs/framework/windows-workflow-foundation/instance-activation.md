---
title: Activación de instancias
ms.date: 03/30/2017
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
ms.openlocfilehash: 1fd30d9d440c06c03e726ed1f1ddbebb0d5f7e8c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96279940"
---
# <a name="instance-activation"></a><span data-ttu-id="13f8a-102">Activación de instancias</span><span class="sxs-lookup"><span data-stu-id="13f8a-102">Instance Activation</span></span>

<span data-ttu-id="13f8a-103">El almacén de instancias de flujo de trabajo de SQL ejecuta una tarea interna que se inicia periódicamente y que detecta instancias de flujo de trabajo ejecutables o activables en la base de datos de persistencia.</span><span class="sxs-lookup"><span data-stu-id="13f8a-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="13f8a-104">Si encuentra una instancia de flujo de trabajo ejecutable, notifica al host de flujo de trabajo que es capaz de activar la instancia.</span><span class="sxs-lookup"><span data-stu-id="13f8a-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="13f8a-105">Si el almacén de instancias encuentra una instancia de flujo de trabajo activable, notifica a un host genérico que activa un host del flujo de trabajo, que a su vez ejecuta la instancia de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="13f8a-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="13f8a-106">Las siguientes secciones en este tema explican el proceso de activación de la instancia en detalle.</span><span class="sxs-lookup"><span data-stu-id="13f8a-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
## <a name="detecting-and-activating-runnable-workflow-instances"></a><a name="RunnableSection"></a> <span data-ttu-id="13f8a-107">Detectar y activar instancias de flujo de trabajo ejecutables</span><span class="sxs-lookup"><span data-stu-id="13f8a-107">Detecting and Activating Runnable Workflow Instances</span></span>  

 <span data-ttu-id="13f8a-108">El almacén de instancias de flujo de trabajo de SQL considera una instancia de flujo de trabajo *ejecutable* si la instancia no está en el estado suspendido o el estado completado y satisface las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="13f8a-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
- <span data-ttu-id="13f8a-109">La instancia se desbloquea y tiene un temporizador pendiente que ha expirado.</span><span class="sxs-lookup"><span data-stu-id="13f8a-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
- <span data-ttu-id="13f8a-110">La instancia tiene un bloqueo expirado en ella.</span><span class="sxs-lookup"><span data-stu-id="13f8a-110">The instance has an expired lock on it.</span></span>  
  
- <span data-ttu-id="13f8a-111">La instancia se desbloquea y su estado es en **ejecución**.</span><span class="sxs-lookup"><span data-stu-id="13f8a-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="13f8a-112">El almacén de instancias de flujo de trabajo de SQL genera <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> cuando encuentra una instancia ejecutable.</span><span class="sxs-lookup"><span data-stu-id="13f8a-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="13f8a-113">Después de esto, SqlWorkflowInstanceStore detiene la supervisión hasta que se llame a <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> cuando se encuentre en el almacén.</span><span class="sxs-lookup"><span data-stu-id="13f8a-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="13f8a-114">Un host del flujo de trabajo que se ha suscrito para <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> y que es capaz de cargar la instancia ejecuta <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> en el almacén de instancias para cargar la instancia en la memoria.</span><span class="sxs-lookup"><span data-stu-id="13f8a-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="13f8a-115">Un host de flujo de trabajo se considera capaz de cargar una instancia de flujo de trabajo si el host y la instancia tienen la propiedad de metadatos **WorkflowServiceType** establecida en el mismo valor.</span><span class="sxs-lookup"><span data-stu-id="13f8a-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="13f8a-116">Detectar y activar instancias de flujo de trabajo activables</span><span class="sxs-lookup"><span data-stu-id="13f8a-116">Detecting and Activating Activatable Workflow Instances</span></span>  

 <span data-ttu-id="13f8a-117">Una instancia de flujo de trabajo *se considera* activable si la instancia es ejecutable y no hay ningún host de flujo de trabajo capaz de cargar la instancia que se está ejecutando en el equipo.</span><span class="sxs-lookup"><span data-stu-id="13f8a-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="13f8a-118">Vea en la sección Detectar y activar instancias de flujo de trabajo ejecutables anterior la definición de una instancia de flujo de trabajo ejecutable.</span><span class="sxs-lookup"><span data-stu-id="13f8a-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="13f8a-119">El almacén de instancias de flujo de trabajo de SQL genera <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> cuando encuentra una instancia de flujo de trabajo activable en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="13f8a-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="13f8a-120">Después de esto, SqlWorkflowInstanceStore detiene la supervisión hasta que se llame a <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> cuando se encuentre en el almacén.</span><span class="sxs-lookup"><span data-stu-id="13f8a-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="13f8a-121">Cuando un host genérico que ha suscrito para <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> recibe el evento, ejecuta <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> en el almacén de instancias para obtener parámetros de activación necesarios para crear un host del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="13f8a-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="13f8a-122">El host genérico usa estos parámetros de activación para crear un host del flujo de trabajo, que a su vez carga y ejecuta la instancia de servicio ejecutable.</span><span class="sxs-lookup"><span data-stu-id="13f8a-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="13f8a-123">Hosts genéricos</span><span class="sxs-lookup"><span data-stu-id="13f8a-123">Generic Hosts</span></span>  

 <span data-ttu-id="13f8a-124">Un host genérico es un host con el valor de la propiedad de metadatos **WorkflowServiceType** para hosts genéricos se establece en **WorkflowServiceType. any** para indicar que puede controlar cualquier tipo de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="13f8a-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="13f8a-125">Un host genérico tiene un parámetro XName denominado **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="13f8a-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="13f8a-126">Actualmente, el almacén de instancias de flujo de trabajo de SQL admite hosts genéricos con el valor del parámetro ActivationType establecido en **was**.</span><span class="sxs-lookup"><span data-stu-id="13f8a-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="13f8a-127">Si el tipo de activación no está definido en WAS, el almacén de instancias de flujo de trabajo SQL inicia <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span><span class="sxs-lookup"><span data-stu-id="13f8a-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="13f8a-128">El servicio de administración de flujos de trabajo que se incluye con las características de hospedaje de Windows Server AppFabric es un host genérico que tiene el tipo de activación establecido en **was**.</span><span class="sxs-lookup"><span data-stu-id="13f8a-128">The Workflow Management Service that ships with the hosting features of Windows Server AppFabric is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="13f8a-129">Para la activación WAS, un host genérico exige que un conjunto de parámetros de activación derive la dirección del extremo en la que se pueden activar los nuevos hosts.</span><span class="sxs-lookup"><span data-stu-id="13f8a-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="13f8a-130">Los parámetros de activación para la activación WAS son los nombre del sitio, la ruta de acceso a la aplicación relativa al sitio y la ruta de acceso al servicio relativa a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="13f8a-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="13f8a-131">El almacén de instancias de flujo de trabajo de SQL almacena estos parámetros de activación durante la ejecución de <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span><span class="sxs-lookup"><span data-stu-id="13f8a-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="13f8a-132">Período de detección de instancias ejecutables</span><span class="sxs-lookup"><span data-stu-id="13f8a-132">Runnable Instances Detection Period</span></span>  

 <span data-ttu-id="13f8a-133">La propiedad **período de detección de instancias ejecutables** del almacén de instancias de flujo de trabajo de SQL especifica el período de tiempo después del cual el almacén de instancias de flujo de trabajo de SQL ejecuta una tarea de detección para detectar las instancias de flujo de trabajo ejecutables o activables en la base de datos de persistencia después del ciclo</span><span class="sxs-lookup"><span data-stu-id="13f8a-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="13f8a-134">Vea [período de detección de instancias ejecutables](runnable-instances-detection-period.md) para obtener más detalles sobre esta propiedad.</span><span class="sxs-lookup"><span data-stu-id="13f8a-134">See [Runnable Instances Detection Period](runnable-instances-detection-period.md) for more details on this property.</span></span>

---
title: Ámbito y visibilidad de la definición de actividad
ms.date: 03/30/2017
ms.assetid: ccdffa07-9503-4eea-a61b-17f1564368b7
ms.openlocfilehash: c7f656fee4960a8c43ac58abafba400ed9b35bc1
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96289170"
---
# <a name="activity-definition-scoping-and-visibility"></a><span data-ttu-id="1f734-102">Ámbito y visibilidad de la definición de actividad</span><span class="sxs-lookup"><span data-stu-id="1f734-102">Activity Definition Scoping and Visibility</span></span>

<span data-ttu-id="1f734-103">El ámbito y visibilidad de la definición de actividad,  como el ámbito y la visibilidad de un objeto, es la capacidad de otros objetos o actividades de obtener acceso a los miembros de la actividad.</span><span class="sxs-lookup"><span data-stu-id="1f734-103">Activity definition scoping and visibility, just like scoping and visibility of an object, is the ability of other objects or activities to access members of the activity.</span></span> <span data-ttu-id="1f734-104">Las siguientes implementaciones realizan la definición de actividad:</span><span class="sxs-lookup"><span data-stu-id="1f734-104">Activity definition is performed by the following implementations:</span></span>  
  
1. <span data-ttu-id="1f734-105">Al determinar los miembros (<xref:System.Activities.Argument>, objetos <xref:System.Activities.Variable> y <xref:System.Activities.ActivityDelegate>, y actividades secundarias) una actividad se expone a sus usuarios.</span><span class="sxs-lookup"><span data-stu-id="1f734-105">Determining the members (<xref:System.Activities.Argument>, <xref:System.Activities.Variable>, and <xref:System.Activities.ActivityDelegate> objects, and child activities) an activity exposes to its users.</span></span>  
  
2. <span data-ttu-id="1f734-106">Implementar la lógica de ejecución de la actividad.</span><span class="sxs-lookup"><span data-stu-id="1f734-106">Implementing the execution logic of the activity</span></span>  
  
 <span data-ttu-id="1f734-107">La implementación puede implicar a miembros que no se exponen a los usuarios de la actividad, pero se trata más bien de detalles de la implementación.</span><span class="sxs-lookup"><span data-stu-id="1f734-107">The implementation may involve members that are not exposed to consumers of the activity, but are rather details of the implementation.</span></span>  <span data-ttu-id="1f734-108">Similar a la definición de tipo, el modelo de actividad permite a un autor calificar la visibilidad de un miembro de la actividad con respecto a la definición de la actividad que es definida.</span><span class="sxs-lookup"><span data-stu-id="1f734-108">Similar to type definition, the activity model allows an author to qualify the visibility of an activity member regarding the definition of the activity being defined.</span></span>  <span data-ttu-id="1f734-109">Esta visibilidad rige aspectos de uso de los miembros, como el ámbito de los datos.</span><span class="sxs-lookup"><span data-stu-id="1f734-109">This visibility governs aspects of member usage, such as data scoping.</span></span>  
  
## <a name="scope"></a><span data-ttu-id="1f734-110">Ámbito</span><span class="sxs-lookup"><span data-stu-id="1f734-110">Scope</span></span>  

 <span data-ttu-id="1f734-111">Además del ámbito de datos, la visibilidad del modelo de actividad puede restringir el acceso a otros aspectos de la actividad, como validación, depuración, seguimiento o traza.</span><span class="sxs-lookup"><span data-stu-id="1f734-111">In addition to data scoping, activity model visibility can restrict access to other aspects of the activity, such as validation, debugging, tracking, or tracing.</span></span> <span data-ttu-id="1f734-112">Las propiedades de ejecución utilizan la visibilidad y el ámbito para restringir las características de ejecución a un ámbito determinado de la definición.</span><span class="sxs-lookup"><span data-stu-id="1f734-112">Execution properties use visibility and scoping for constraining execution characteristics to a particular scope of definition.</span></span> <span data-ttu-id="1f734-113">Las raíces secundarias utilizan la visibilidad y el ámbito para restringir el estado capturado por <xref:System.Activities.Statements.CompensableActivity> al ámbito de definición en la que se utilizan las actividades compensables.</span><span class="sxs-lookup"><span data-stu-id="1f734-113">Secondary roots use visibility and scoping to constrain the state captured by a <xref:System.Activities.Statements.CompensableActivity> to the scope of definition in which the compensable activities are used.</span></span>  
  
## <a name="definition-and-usage"></a><span data-ttu-id="1f734-114">Definición y uso</span><span class="sxs-lookup"><span data-stu-id="1f734-114">Definition and usage</span></span>  

 <span data-ttu-id="1f734-115">Un flujo de trabajo se escribe creando nuevas actividades heredando de las clases de actividad base y usando las actividades de la [biblioteca de actividades integrada](net-framework-4-5-built-in-activity-library.md).</span><span class="sxs-lookup"><span data-stu-id="1f734-115">A workflow is written by authoring new activities by inheriting from base activity classes, and by using activities from the [Built-In Activity Library](net-framework-4-5-built-in-activity-library.md).</span></span> <span data-ttu-id="1f734-116">Para utilizar una actividad, el autor de actividad debe configurar la visibilidad de cada componente de su definición.</span><span class="sxs-lookup"><span data-stu-id="1f734-116">In order to use an activity, the activity author must configure the visibility of each component of its definition.</span></span>  
  
### <a name="activity-members"></a><span data-ttu-id="1f734-117">Miembros de actividad</span><span class="sxs-lookup"><span data-stu-id="1f734-117">Activity Members</span></span>  

 <span data-ttu-id="1f734-118">El modelo de actividad define los argumentos, variables, delegados y actividades secundarias que la actividad pone a disposición de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="1f734-118">The activity model defines the arguments, variables, delegates, and child activities that the activity makes available to consumers.</span></span> <span data-ttu-id="1f734-119">Cada uno de estos miembros se puede declarar como `public` o `private`.</span><span class="sxs-lookup"><span data-stu-id="1f734-119">Each of these members can be declared as `public` or `private`.</span></span> <span data-ttu-id="1f734-120">El usuario de la actividad configura los miembros públicos, mientras que los miembros `private` utilizan una implementación corregida por el autor de actividad.</span><span class="sxs-lookup"><span data-stu-id="1f734-120">Public members are configured by the consumer of the activity, whereas `private` members use an implementation fixed by the author of the activity.</span></span> <span data-ttu-id="1f734-121">Las reglas de visibilidad del ámbito de datos son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="1f734-121">The visibility rules for data scoping are as follows:</span></span>  
  
1. <span data-ttu-id="1f734-122">Los miembros públicos y los miembros públicos de actividades secundarias públicas pueden hacer referencia a las variables públicas.</span><span class="sxs-lookup"><span data-stu-id="1f734-122">Public members and the public members of public child activities can reference public variables.</span></span>  
  
2. <span data-ttu-id="1f734-123">Los miembros privados y los miembros públicos de actividades de  secundarias públicas pueden hacer referencia a argumentos y variables privadas.</span><span class="sxs-lookup"><span data-stu-id="1f734-123">Private members and the public members of public child activities can reference arguments and private variables.</span></span>  
  
 <span data-ttu-id="1f734-124">Un miembro que puede ser establecido por el usuario de una actividad nunca se debería hacer privado.</span><span class="sxs-lookup"><span data-stu-id="1f734-124">A member that can be set by the consumer of an activity should never be made private.</span></span>  
  
### <a name="authoring-models"></a><span data-ttu-id="1f734-125">Modelos de creación</span><span class="sxs-lookup"><span data-stu-id="1f734-125">Authoring Models</span></span>  

 <span data-ttu-id="1f734-126">Las actividades personalizadas se definen utilizando <xref:System.Activities.NativeActivity>, <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>o <xref:System.Activities.AsyncCodeActivity>.</span><span class="sxs-lookup"><span data-stu-id="1f734-126">Custom activities are defined by using <xref:System.Activities.NativeActivity>, <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>, or <xref:System.Activities.AsyncCodeActivity>.</span></span> <span data-ttu-id="1f734-127">Las actividades que derivan de estas clases pueden exponer diferentes tipos de miembro con visibilidades diferentes.</span><span class="sxs-lookup"><span data-stu-id="1f734-127">Activities that derive from these classes can expose different member types with different visibilities.</span></span>  
  
#### <a name="nativeactivity"></a><span data-ttu-id="1f734-128">NativeActivity</span><span class="sxs-lookup"><span data-stu-id="1f734-128">NativeActivity</span></span>  

 <span data-ttu-id="1f734-129">Las actividades que derivan de <xref:System.Activities.NativeActivity> tienen un comportamiento escrito en el código imperativo y se pueden definir opcionalmente utilizando las actividades existentes.</span><span class="sxs-lookup"><span data-stu-id="1f734-129">Activities that derive from <xref:System.Activities.NativeActivity> have behavior that is written in imperative code, and can optionally be defined by using existing activities.</span></span> <span data-ttu-id="1f734-130">Al derivar actividades desde <xref:System.Activities.NativeActivity>, se permite acceso a todas las características expuestas por el runtime.</span><span class="sxs-lookup"><span data-stu-id="1f734-130">Deriving activities from <xref:System.Activities.NativeActivity> grants access to all of the features exposed by the runtime.</span></span> <span data-ttu-id="1f734-131">Cualquier miembro de este tipo de actividad se puede definir utilizando visibilidad pública o  privada, excepto los argumentos, que solo se pueden declarar como `public`.</span><span class="sxs-lookup"><span data-stu-id="1f734-131">Any member of such an activity can be defined by using either public or private visibility, except arguments, which can only be declared as `public`.</span></span>  
  
 <span data-ttu-id="1f734-132">Los miembros de clases derivados de <xref:System.Activities.NativeActivity> se declaran al runtime utilizando el struct <xref:System.Activities.NativeActivityMetadata> pasado al método <xref:System.Activities.NativeActivity.CacheMetadata%2A>.</span><span class="sxs-lookup"><span data-stu-id="1f734-132">Members of classes derived from <xref:System.Activities.NativeActivity> are declared to the runtime using the <xref:System.Activities.NativeActivityMetadata> struct passed to the <xref:System.Activities.NativeActivity.CacheMetadata%2A> method.</span></span>  
  
#### <a name="activity"></a><span data-ttu-id="1f734-133">Actividad</span><span class="sxs-lookup"><span data-stu-id="1f734-133">Activity</span></span>  

 <span data-ttu-id="1f734-134">Las actividades creadas utilizando <xref:System.Activities.Activity> tienen un comportamiento que es diseñado estrictamente al componer otras actividades.</span><span class="sxs-lookup"><span data-stu-id="1f734-134">Activities created by using <xref:System.Activities.Activity> have behavior that is designed strictly through composing other activities.</span></span> <span data-ttu-id="1f734-135">La clase <xref:System.Activities.Activity> tiene una implementación de actividad secundaria, obtenida por el runtime al usar <xref:System.Activities.Activity.Implementation%2A>.</span><span class="sxs-lookup"><span data-stu-id="1f734-135">The <xref:System.Activities.Activity> class has one implementation child activity, obtained by the runtime using <xref:System.Activities.Activity.Implementation%2A>.</span></span> <span data-ttu-id="1f734-136">Una actividad que deriva de <xref:System.Activities.Activity> puede definir los argumentos públicos, variables públicas, ActivityDelegates importados y Activities importadas.</span><span class="sxs-lookup"><span data-stu-id="1f734-136">An activity deriving from <xref:System.Activities.Activity> can define public arguments, public variables, imported ActivityDelegates, and imported Activities.</span></span>  
  
 <span data-ttu-id="1f734-137">LAs ActivityDelegates y Activities importadas se declaran como elementos secundarios públicos de la actividad, pero no pueden ser programadas directamente por la actividad.</span><span class="sxs-lookup"><span data-stu-id="1f734-137">Imported ActivityDelegates and Activities are declared as public children of the activity, but cannot be directly scheduled by the activity.</span></span> <span data-ttu-id="1f734-138">Esta información se utiliza durante la validación para evitar ejecutar las validaciones orientadas al elemento primario en las ubicaciones donde la actividad nunca se ejecutará.</span><span class="sxs-lookup"><span data-stu-id="1f734-138">This information is used during validation to avoid running parent-facing validations at locations where the activity will never execute.</span></span> <span data-ttu-id="1f734-139">Además, los elementos secundarios importados, como los elementos secundarios públicos, pueden ser referenciados y programados por la implementación de la actividad.</span><span class="sxs-lookup"><span data-stu-id="1f734-139">Also, imported children, just like public children, can be referenced and scheduled by the activity’s implementation.</span></span> <span data-ttu-id="1f734-140">Esto significa que una actividad que importa una actividad llamada Activity1 puede contener una <xref:System.Activities.Statements.Sequence> en su implementación que programa la Activity1.</span><span class="sxs-lookup"><span data-stu-id="1f734-140">This means that an activity which imports an activity called Activity1 can contain a <xref:System.Activities.Statements.Sequence> in its implementation which schedules Activity1.</span></span>  
  
#### <a name="codeactivity-asynccodeactivity"></a><span data-ttu-id="1f734-141">CodeActivity/ AsyncCodeActivity</span><span class="sxs-lookup"><span data-stu-id="1f734-141">CodeActivity/ AsyncCodeActivity</span></span>  

 <span data-ttu-id="1f734-142">Esta clase base se utiliza para crear el comportamiento en código imperativo.</span><span class="sxs-lookup"><span data-stu-id="1f734-142">This base class is used for authoring behavior in imperative code.</span></span> <span data-ttu-id="1f734-143">Las actividades que derivan de esta clase solo tienen acceso a los argumentos que exponen.</span><span class="sxs-lookup"><span data-stu-id="1f734-143">Activities that derive from this class only have access to the arguments they expose.</span></span> <span data-ttu-id="1f734-144">Esto significa que los únicos miembros que estas actividades pueden exponer son los argumentos públicos.</span><span class="sxs-lookup"><span data-stu-id="1f734-144">This means that the only members that these activities can expose are public arguments.</span></span> <span data-ttu-id="1f734-145">Ningún otro miembro o visibilidad se aplican a estas actividades.</span><span class="sxs-lookup"><span data-stu-id="1f734-145">No other members or visibilities apply to these activities.</span></span>  
  
#### <a name="summary-of-visibilities"></a><span data-ttu-id="1f734-146">Resumen de visibilidades</span><span class="sxs-lookup"><span data-stu-id="1f734-146">Summary of visibilities</span></span>  

 <span data-ttu-id="1f734-147">En la siguiente tabla se resume la información anterior de esta sección.</span><span class="sxs-lookup"><span data-stu-id="1f734-147">The following table summarizes the information earlier in this section.</span></span>  
  
|<span data-ttu-id="1f734-148">Tipo de miembro</span><span class="sxs-lookup"><span data-stu-id="1f734-148">Member Type</span></span>|<span data-ttu-id="1f734-149">NativeActivity</span><span class="sxs-lookup"><span data-stu-id="1f734-149">NativeActivity</span></span>|<span data-ttu-id="1f734-150">Actividad</span><span class="sxs-lookup"><span data-stu-id="1f734-150">Activity</span></span>|<span data-ttu-id="1f734-151">CodeActivity/ AsyncCodeActivity</span><span class="sxs-lookup"><span data-stu-id="1f734-151">CodeActivity/ AsyncCodeActivity</span></span>|  
|-----------------|--------------------|--------------|--------------------------------------|  
|<span data-ttu-id="1f734-152">Argumentos</span><span class="sxs-lookup"><span data-stu-id="1f734-152">Arguments</span></span>|<span data-ttu-id="1f734-153">Público/ privado</span><span class="sxs-lookup"><span data-stu-id="1f734-153">Public/ Private</span></span>|<span data-ttu-id="1f734-154">Público</span><span class="sxs-lookup"><span data-stu-id="1f734-154">Public</span></span>|<span data-ttu-id="1f734-155">no aplicable</span><span class="sxs-lookup"><span data-stu-id="1f734-155">not applicable</span></span>|  
|<span data-ttu-id="1f734-156">Variables</span><span class="sxs-lookup"><span data-stu-id="1f734-156">Variables</span></span>|<span data-ttu-id="1f734-157">Público/ privado</span><span class="sxs-lookup"><span data-stu-id="1f734-157">Public/ Private</span></span>|<span data-ttu-id="1f734-158">Público</span><span class="sxs-lookup"><span data-stu-id="1f734-158">Public</span></span>|<span data-ttu-id="1f734-159">no aplicable</span><span class="sxs-lookup"><span data-stu-id="1f734-159">not applicable</span></span>|  
|<span data-ttu-id="1f734-160">Actividades secundarias</span><span class="sxs-lookup"><span data-stu-id="1f734-160">Child Activities</span></span>|<span data-ttu-id="1f734-161">Público/ privado</span><span class="sxs-lookup"><span data-stu-id="1f734-161">Public/ Private</span></span>|<span data-ttu-id="1f734-162">Público, uno elemento secundario privado definido en Implementación.</span><span class="sxs-lookup"><span data-stu-id="1f734-162">Public, one fixed private child defined in Implementation.</span></span>|<span data-ttu-id="1f734-163">no aplicable</span><span class="sxs-lookup"><span data-stu-id="1f734-163">not applicable</span></span>|  
|<span data-ttu-id="1f734-164">ActivityDelegates</span><span class="sxs-lookup"><span data-stu-id="1f734-164">ActivityDelegates</span></span>|<span data-ttu-id="1f734-165">Público/ privado</span><span class="sxs-lookup"><span data-stu-id="1f734-165">Public/ Private</span></span>|<span data-ttu-id="1f734-166">Público</span><span class="sxs-lookup"><span data-stu-id="1f734-166">Public</span></span>|<span data-ttu-id="1f734-167">no aplicable</span><span class="sxs-lookup"><span data-stu-id="1f734-167">not applicable</span></span>|  
  
 <span data-ttu-id="1f734-168">En general, un miembro que no puede ser establecido por el usuario de una actividad no se debería hacer público.</span><span class="sxs-lookup"><span data-stu-id="1f734-168">In general, a member that cannot be set by the consumer of an activity should not be made public.</span></span>  
  
### <a name="execution-properties"></a><span data-ttu-id="1f734-169">Propiedades de ejecución</span><span class="sxs-lookup"><span data-stu-id="1f734-169">Execution Properties</span></span>  

 <span data-ttu-id="1f734-170">En algunos escenarios, es útil establecer el ámbito de una propiedad de ejecución determinada en los elementos secundarios públicos de una actividad.</span><span class="sxs-lookup"><span data-stu-id="1f734-170">In some scenarios, it is useful to scope a particular execution property to the public children of an activity.</span></span> <span data-ttu-id="1f734-171">La colección <xref:System.Activities.ExecutionProperties> proporciona esta capacidad con el método <xref:System.Activities.ExecutionProperties.Add%2A>.</span><span class="sxs-lookup"><span data-stu-id="1f734-171">The <xref:System.Activities.ExecutionProperties> collection provides this capability with the <xref:System.Activities.ExecutionProperties.Add%2A> method.</span></span> <span data-ttu-id="1f734-172">Este método tiene un parámetro Boolean que indica si una propiedad determinada está en el ámbito de todos los elementos secundarios o simplemente de aquellos que son públicos.</span><span class="sxs-lookup"><span data-stu-id="1f734-172">This method has a Boolean parameter indicating whether a particular property is scoped to all children, or just those that are public.</span></span> <span data-ttu-id="1f734-173">Si este parámetro está establecido en `true`, la propiedad solo será visible para los miembros públicos y los miembros públicos de sus elementos secundarios públicos.</span><span class="sxs-lookup"><span data-stu-id="1f734-173">If this parameter is set to `true`, the property will only be visible to public members and the public members of their public children.</span></span>  
  
### <a name="secondary-roots"></a><span data-ttu-id="1f734-174">Raíces secundarias</span><span class="sxs-lookup"><span data-stu-id="1f734-174">Secondary Roots</span></span>  

 <span data-ttu-id="1f734-175">Una raíz secundaria es el mecanismo interno del runtime para administrar el estado de las actividades de compensación.</span><span class="sxs-lookup"><span data-stu-id="1f734-175">A secondary root is the runtime’s internal mechanism for managing state for compensation activities.</span></span> <span data-ttu-id="1f734-176">Cuando <xref:System.Activities.Statements.CompensableActivity> ha terminado de ejecutarse, no se limpia su estado inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="1f734-176">When a <xref:System.Activities.Statements.CompensableActivity> has finished running, its state is not cleaned up immediately.</span></span> <span data-ttu-id="1f734-177">En su lugar, el estado es mantenido por el runtime en una raíz secundaria hasta que el episodio de compensación se haya completado.</span><span class="sxs-lookup"><span data-stu-id="1f734-177">Instead, the state is maintained by the runtime in a secondary root until the compensation episode has completed.</span></span> <span data-ttu-id="1f734-178">Los entornos de ubicación capturados con la raíz secundaria corresponden al ámbito de definición en la que se utiliza la actividad Compensable.</span><span class="sxs-lookup"><span data-stu-id="1f734-178">The location environments captured with the secondary root correspond to the scope of definition in which the Compensable activity is used.</span></span>

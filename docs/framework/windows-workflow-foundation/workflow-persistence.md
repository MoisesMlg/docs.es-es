---
title: Persistencia del flujo de trabajo
description: .NET Framework 4.6.1 incluye la clase SqlWorkflowInstanceStore, que permite la persistencia de datos de flujo de trabajo y metadatos en una base de datos de SQL Server.
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], persistence
ms.assetid: 39e69d1f-b771-4c16-9e18-696fa43b65b2
ms.openlocfilehash: 2184a159423a611a8936e900591a480ce7ef6ec8
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293811"
---
# <a name="workflow-persistence"></a><span data-ttu-id="8c238-103">Persistencia del flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="8c238-103">Workflow Persistence</span></span>

<span data-ttu-id="8c238-104">La persistencia del flujo de trabajo es la captura duradera de un estado de la instancia de flujo de trabajo, independientemente de la información del proceso o del equipo.</span><span class="sxs-lookup"><span data-stu-id="8c238-104">Workflow persistence is the durable capture of a workflow instance's state, independent of process or computer information.</span></span> <span data-ttu-id="8c238-105">Esto sirve para proporcionar un punto de recuperación conocido para la instancia de flujo de trabajo en caso de error del sistema, para conservar la memoria descargando instancias de flujo de trabajo que no están funcionando de forma activa o para mover el estado de la instancia de flujo de trabajo de un nodo a otro en una granja de servidores.</span><span class="sxs-lookup"><span data-stu-id="8c238-105">This is done to provide a well-known point of recovery for the workflow instance in the event of system failure, or to preserve memory by unloading workflow instances that are not actively doing work, or to move the state of the workflow instance from one node to another node in a server farm.</span></span>  
  
 <span data-ttu-id="8c238-106">La persistencia permite procesar la agilidad, escalabilidad, recuperación en caso de error y la capacidad de administrar la memoria más eficazmente.</span><span class="sxs-lookup"><span data-stu-id="8c238-106">Persistence enables process agility, scalability, recovery in the face of failure, and the ability to manage memory more efficiently.</span></span> <span data-ttu-id="8c238-107">El proceso de persistencia incluye la identificación de un punto de persistencia, la recopilación de los datos que se van a guardar y finalmente la delegación del almacenamiento real de los datos a un proveedor de persistencia.</span><span class="sxs-lookup"><span data-stu-id="8c238-107">The persistence process includes the identification of a persistence point, the gathering of the data to be saved, and finally the delegation of the actual storage of the data to a persistence provider.</span></span>  
  
 <span data-ttu-id="8c238-108">Para habilitar la persistencia de un flujo de trabajo, debe asociar un almacén de instancias con **WorkflowApplication** o **WorkflowServiceHost** tal y como se mencionó en [Cómo: habilitar la persistencia para flujos de trabajo y servicios de flujo de trabajo](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c238-108">To enable persistence for a workflow, you need to associate an instance store with the **WorkflowApplication** or **WorkflowServiceHost** as mentioned in [How to: Enable Persistence for Workflows and Workflow Services](how-to-enable-persistence-for-workflows-and-workflow-services.md).</span></span> <span data-ttu-id="8c238-109">**WorkflowApplication** y **WorkflowServiceHost** usan el almacén de instancias asociado a ellos para habilitar la persistencia de las instancias de flujo de trabajo en un almacén de persistencia y cargar instancias de flujo de trabajo en memoria basándose en los datos de instancia de flujo de trabajo almacenados en el almacén de persistencia.</span><span class="sxs-lookup"><span data-stu-id="8c238-109">The **WorkflowApplication** and **WorkflowServiceHost** use the instance store associated with them to enable persisting workflow instances into a persistence store and loading workflow instances into memory based on the workflow instance data stored in the persistence store.</span></span>  
  
 <span data-ttu-id="8c238-110">Se [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] incluye con la clase **SqlWorkflowInstanceStore** , que permite la persistencia de datos y metadatos sobre las instancias de flujo de trabajo en una base de datos SQL Server 2005 o SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="8c238-110">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the **SqlWorkflowInstanceStore** class, which allows persistence of data and metadata about workflow instances into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="8c238-111">Vea [almacén de instancias de flujo de trabajo de SQL](sql-workflow-instance-store.md) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="8c238-111">See [SQL Workflow Instance Store](sql-workflow-instance-store.md) for more details.</span></span>  
  
 <span data-ttu-id="8c238-112">Para almacenar y cargar los datos específicos de la aplicación junto con la información relacionada con la instancia de flujo de trabajo, puede crear participantes de persistencia que extienden la clase <xref:System.Activities.Persistence.PersistenceParticipant>.</span><span class="sxs-lookup"><span data-stu-id="8c238-112">To store and load your application-specific data along with the workflow instance-related information, you can create persistence participants that extend the <xref:System.Activities.Persistence.PersistenceParticipant> class.</span></span> <span data-ttu-id="8c238-113">Los participantes de persistencia participan en el proceso de persistencia para guardar los datos serializables personalizados en el almacén de persistencia, para cargar los datos del almacén de instancias en la memoria y para realizar cualquier lógica adicional en una transacción de persistencia.</span><span class="sxs-lookup"><span data-stu-id="8c238-113">A persistence participant participates in the persistence process to save custom serializable data into the persistence store, to load the data from the instance store into memory, and to perform any additional logic under a persistence transaction.</span></span> <span data-ttu-id="8c238-114">Para obtener más información, consulte [participantes de persistencia](persistence-participants.md).</span><span class="sxs-lookup"><span data-stu-id="8c238-114">For more information, see [Persistence Participants](persistence-participants.md).</span></span>  
  
 <span data-ttu-id="8c238-115">Windows Server APp Fabric simplifica el proceso de configuración de persistencia.</span><span class="sxs-lookup"><span data-stu-id="8c238-115">Windows Server App Fabric simplifies the process of configuring persistence.</span></span> <span data-ttu-id="8c238-116">Para obtener más información, vea [conceptos de persistencia con Windows Server App fabric](/previous-versions/appfabric/ee677272(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="8c238-116">For more information, see [Persistence Concepts with Windows Server App Fabric](/previous-versions/appfabric/ee677272(v=azure.10))</span></span>  
  
## <a name="implicit-persistence-points"></a><span data-ttu-id="8c238-117">Puntos de persistencia implícitos</span><span class="sxs-lookup"><span data-stu-id="8c238-117">Implicit Persistence Points</span></span>  

 <span data-ttu-id="8c238-118">La siguiente lista contiene ejemplos de las condiciones en las que se conserva un flujo de trabajo cuando se asocia un almacén de instancias a este.</span><span class="sxs-lookup"><span data-stu-id="8c238-118">The following list contains examples of the conditions upon which a workflow is persisted when an instance store is associated with a workflow.</span></span>  
  
- <span data-ttu-id="8c238-119">Cuando se completa una actividad **TransactionScope** o se completa una actividad **TransactedReceiveScope** .</span><span class="sxs-lookup"><span data-stu-id="8c238-119">When a **TransactionScope** activity completes or a **TransactedReceiveScope** activity completes.</span></span>  
  
- <span data-ttu-id="8c238-120">Cuando una instancia de flujo de trabajo se vuelve inactiva y **WorkflowIdleBehavior** se establece en el host del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8c238-120">When a workflow instance becomes idle and the **WorkflowIdleBehavior** is set on workflow host.</span></span> <span data-ttu-id="8c238-121">Esto ocurre, por ejemplo, cuando se usan actividades de mensajería o una actividad de **retraso** .</span><span class="sxs-lookup"><span data-stu-id="8c238-121">This occurs, for example, when you use messaging activities or a **Delay** activity.</span></span>  
  
- <span data-ttu-id="8c238-122">Cuando una WorkflowApplication se vuelve inactiva y la propiedad **PersistableIdle** de la aplicación se establece en **PersistableIdleAction. Persist**.</span><span class="sxs-lookup"><span data-stu-id="8c238-122">When a WorkflowApplication becomes idle and the **PersistableIdle** property of the application is set to **PersistableIdleAction.Persist**.</span></span>  
  
- <span data-ttu-id="8c238-123">Cuando se indica a una aplicación host que conserve o descargue una instancia de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8c238-123">When a host application is instructed to persist or unload a workflow instance.</span></span>  
  
- <span data-ttu-id="8c238-124">Cuándo se finaliza o termina una instancia de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8c238-124">When a workflow instance is terminated or finishes.</span></span>  
  
- <span data-ttu-id="8c238-125">Cuando se ejecuta una actividad de **persistencia** .</span><span class="sxs-lookup"><span data-stu-id="8c238-125">When a **Persist** activity executes.</span></span>  
  
- <span data-ttu-id="8c238-126">Cuando una instancia de un flujo de trabajo desarrollada con una versión anterior de Windows Workflow Foundation encuentra un punto de persistencia durante la ejecución interoperable.</span><span class="sxs-lookup"><span data-stu-id="8c238-126">When an instance of a workflow developed using a previous version of Windows Workflow Foundation encounters a persistence point during interoperable execution.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="8c238-127">En esta sección</span><span class="sxs-lookup"><span data-stu-id="8c238-127">In This Section</span></span>  
  
- [<span data-ttu-id="8c238-128">Almacén de instancias de flujo de trabajo de SQL</span><span class="sxs-lookup"><span data-stu-id="8c238-128">SQL Workflow Instance Store</span></span>](sql-workflow-instance-store.md)  
  
- [<span data-ttu-id="8c238-129">Almacenes de instancias</span><span class="sxs-lookup"><span data-stu-id="8c238-129">Instance Stores</span></span>](instance-stores.md)  
  
- [<span data-ttu-id="8c238-130">Participantes de persistencia</span><span class="sxs-lookup"><span data-stu-id="8c238-130">Persistence Participants</span></span>](persistence-participants.md)  
  
- [<span data-ttu-id="8c238-131">Procedimientos recomendados de persistencia</span><span class="sxs-lookup"><span data-stu-id="8c238-131">Persistence Best Practices</span></span>](persistence-best-practices.md)  
  
- [<span data-ttu-id="8c238-132">Instancias de flujo de trabajo no persistentes</span><span class="sxs-lookup"><span data-stu-id="8c238-132">Non-Persisted Workflow Instances</span></span>](non-persisted-workflow-instances.md)  
  
- [<span data-ttu-id="8c238-133">Pausar y reanudar un flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="8c238-133">Pausing and Resuming a Workflow</span></span>](pausing-and-resuming-a-workflow.md)

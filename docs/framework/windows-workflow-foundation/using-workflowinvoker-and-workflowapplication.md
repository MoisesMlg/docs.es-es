---
title: Usar WorkflowInvoker y WorkflowApplication
description: En este artículo se describe el hospedaje de flujos de trabajo mediante WorkflowInvoker y WorkflowApplication en Windows Workflow Foundation.
ms.date: 03/30/2017
ms.assetid: cd0e583c-a3f9-4fa2-b247-c7b3368c48a7
ms.openlocfilehash: 1cc84afe002615c317309054179abd1af5800e9c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96254615"
---
# <a name="using-workflowinvoker-and-workflowapplication"></a><span data-ttu-id="6a128-103">Usar WorkflowInvoker y WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="6a128-103">Using WorkflowInvoker and WorkflowApplication</span></span>

<span data-ttu-id="6a128-104">Windows Workflow Foundation (WF) proporciona varios métodos para hospedar flujos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="6a128-104">Windows Workflow Foundation (WF) provides several methods of hosting workflows.</span></span> <span data-ttu-id="6a128-105"><xref:System.Activities.WorkflowInvoker> proporciona una manera sencilla de invocar un flujo de trabajo como si fuera una llamada al método y se puede usar solo para los flujos de trabajo que no usan la persistencia.</span><span class="sxs-lookup"><span data-stu-id="6a128-105"><xref:System.Activities.WorkflowInvoker> provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence.</span></span> <span data-ttu-id="6a128-106"><xref:System.Activities.WorkflowApplication> proporciona un modelo más enriquecido para ejecutar flujos de trabajo que incluye notificación de eventos de ciclo de vida, control de ejecución, reanudación de marcadores y persistencia.</span><span class="sxs-lookup"><span data-stu-id="6a128-106"><xref:System.Activities.WorkflowApplication> provides a richer model for executing workflows that includes notification of lifecycle events, execution control, bookmark resumption, and persistence.</span></span> <span data-ttu-id="6a128-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> proporciona compatibilidad para las actividades de mensajería y se usa principalmente con servicios de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="6a128-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides support for messaging activities and is primarily used with workflow services.</span></span> <span data-ttu-id="6a128-108">Este tema presenta el hospedaje del flujo de trabajo con <xref:System.Activities.WorkflowInvoker> y <xref:System.Activities.WorkflowApplication>.</span><span class="sxs-lookup"><span data-stu-id="6a128-108">This topic introduces you to workflow hosting with <xref:System.Activities.WorkflowInvoker> and <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="6a128-109">Para obtener más información sobre el hospedaje de flujos de trabajo con <xref:System.ServiceModel.Activities.WorkflowServiceHost> , vea Introducción a los servicios de [flujo](../wcf/feature-details/workflow-services.md) de trabajo y [host Workflow Services](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6a128-109">For more information about hosting workflows with <xref:System.ServiceModel.Activities.WorkflowServiceHost>, see [Workflow Services](../wcf/feature-details/workflow-services.md) and [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span>  
  
## <a name="using-workflowinvoker"></a><span data-ttu-id="6a128-110">Usar WorkflowInvoker</span><span class="sxs-lookup"><span data-stu-id="6a128-110">Using WorkflowInvoker</span></span>  

 <span data-ttu-id="6a128-111"><xref:System.Activities.WorkflowInvoker> proporciona un modelo para ejecutar un flujo de trabajo como si fuera una llamada al método.</span><span class="sxs-lookup"><span data-stu-id="6a128-111"><xref:System.Activities.WorkflowInvoker> provides a model for executing a workflow as if it were a method call.</span></span> <span data-ttu-id="6a128-112">Para invocar un flujo de trabajo mediante <xref:System.Activities.WorkflowInvoker>, llame al método <xref:System.Activities.WorkflowInvoker.Invoke%2A> y pase la definición del flujo de trabajo que se vaya a invocar.</span><span class="sxs-lookup"><span data-stu-id="6a128-112">To invoke a workflow using <xref:System.Activities.WorkflowInvoker>, call the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method and pass in the workflow definition of the workflow to invoke.</span></span> <span data-ttu-id="6a128-113">En este ejemplo, se invoca una actividad <xref:System.Activities.Statements.WriteLine> mediante <xref:System.Activities.WorkflowInvoker>.</span><span class="sxs-lookup"><span data-stu-id="6a128-113">In this example, a <xref:System.Activities.Statements.WriteLine> activity is invoked using <xref:System.Activities.WorkflowInvoker>.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#1)]  
  
 <span data-ttu-id="6a128-114">Cuando se invoca un flujo de trabajo con <xref:System.Activities.WorkflowInvoker>, el flujo de trabajo se ejecuta en el subproceso que realiza la llamada y el método <xref:System.Activities.WorkflowInvoker.Invoke%2A> se bloquea hasta que el flujo de trabajo haya finalizado, incluido el tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="6a128-114">When a workflow is invoked using <xref:System.Activities.WorkflowInvoker>, the workflow executes on the calling thread and the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method blocks until the workflow is complete, including any idle time.</span></span> <span data-ttu-id="6a128-115">Para configurar un intervalo de tiempo de espera en el que se debe completar el flujo de trabajo, use una de las sobrecargas <xref:System.Activities.WorkflowInvoker.Invoke%2A> que tome un parámetro <xref:System.TimeSpan>.</span><span class="sxs-lookup"><span data-stu-id="6a128-115">To configure a time-out interval in which the workflow must complete, use one of the <xref:System.Activities.WorkflowInvoker.Invoke%2A> overloads that takes a <xref:System.TimeSpan> parameter.</span></span> <span data-ttu-id="6a128-116">En este ejemplo, se invoca un flujo de trabajo dos veces con dos intervalos de tiempo de espera diferentes.</span><span class="sxs-lookup"><span data-stu-id="6a128-116">In this example, a workflow is invoked twice with two different time-out intervals.</span></span> <span data-ttu-id="6a128-117">El primer flujo de trabajo se completa, pero el segundo no.</span><span class="sxs-lookup"><span data-stu-id="6a128-117">The first workflow complets, but the second does not.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#50](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#50)]  
  
> [!NOTE]
> <span data-ttu-id="6a128-118">La excepción <xref:System.TimeoutException> solo se produce si se agota el tiempo de espera y el flujo de trabajo queda inactivo durante la ejecución.</span><span class="sxs-lookup"><span data-stu-id="6a128-118">The <xref:System.TimeoutException> is only thrown if the time-out interval elapses and the workflow becomes idle during execution.</span></span> <span data-ttu-id="6a128-119">Un flujo de trabajo que tarda en completarse más tiempo que el especificado por el intervalo de tiempo de espera se completa correctamente si el flujo de trabajo no queda inactivo.</span><span class="sxs-lookup"><span data-stu-id="6a128-119">A workflow that takes longer than the specified time-out interval to complete completes successfully if the workflow does not become idle.</span></span>  
  
 <span data-ttu-id="6a128-120"><xref:System.Activities.WorkflowInvoker> también proporciona versiones asincrónicas del método de invocación.</span><span class="sxs-lookup"><span data-stu-id="6a128-120"><xref:System.Activities.WorkflowInvoker> also provides asynchronous versions of the invoke method.</span></span> <span data-ttu-id="6a128-121">Para obtener más información, vea <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> y <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="6a128-121">For more information, see <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> and <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span></span>  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="6a128-122">Definir argumentos de entrada de un flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="6a128-122">Setting Input Arguments of a Workflow</span></span>  

 <span data-ttu-id="6a128-123">Los datos se pueden pasar a un flujo de trabajo mediante un diccionario de parámetros de entrada, con claves por nombre de argumento, que se asignan a los argumentos de entrada del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="6a128-123">Data can be passed into a workflow using a dictionary of input parameters, keyed by argument name, that map to the input arguments of the workflow.</span></span> <span data-ttu-id="6a128-124">En este ejemplo, se invoca <xref:System.Activities.Statements.WriteLine> y el valor de su argumento <xref:System.Activities.Statements.WriteLine.Text%2A> se especifica con el diccionario de parámetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="6a128-124">In this example, a <xref:System.Activities.Statements.WriteLine> is invoked and the value for its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#3)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="6a128-125">Recuperar argumentos de salida de un flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="6a128-125">Retrieving Output Arguments of a Workflow</span></span>  

 <span data-ttu-id="6a128-126">Los parámetros de salida de un flujo de trabajo se pueden obtener usando el diccionario de salidas que se devuelve de la llamada a <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="6a128-126">The output parameters of a workflow can be obtained using the outputs dictionary that is returned from the call to <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span></span> <span data-ttu-id="6a128-127">En el siguiente ejemplo se invoca un flujo de trabajo formado por una sola actividad `Divide` que tiene dos argumentos de entrada y dos argumentos de salida.</span><span class="sxs-lookup"><span data-stu-id="6a128-127">The following example invokes a workflow consisting of a single `Divide` activity that has two input arguments and two output arguments.</span></span> <span data-ttu-id="6a128-128">Cuando se invoca el flujo de trabajo, se pasa el diccionario de `arguments` que contiene los valores de cada argumento de entrada, ordenados por nombre de argumento.</span><span class="sxs-lookup"><span data-stu-id="6a128-128">When the workflow is invoked, the `arguments` dictionary is passed which contains the values for each input argument, keyed by argument name.</span></span> <span data-ttu-id="6a128-129">Cuando la llamada a `Invoke` devuelve resultados, cada uno de los argumentos de salida se devuelve en el diccionario `outputs`, ordenados por nombre de argumento.</span><span class="sxs-lookup"><span data-stu-id="6a128-129">When the call to `Invoke` returns, each output argument is returned in the `outputs` dictionary, also keyed by argument name.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#120](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#120)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#20](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#20)]  
  
 <span data-ttu-id="6a128-130">Si el flujo de trabajo se deriva de <xref:System.Activities.ActivityWithResult>, como `CodeActivity<TResult>` o `Activity<TResult>`, y hay argumentos de salida, además del argumento de salida <xref:System.Activities.Activity%601.Result%2A> bien determinado, se debe utilizar una sobrecarga no genérica de `Invoke` para recuperar argumentos adicionales.</span><span class="sxs-lookup"><span data-stu-id="6a128-130">If the workflow derives from <xref:System.Activities.ActivityWithResult>, such as `CodeActivity<TResult>` or `Activity<TResult>`, and there are output arguments in addition to the well-defined <xref:System.Activities.Activity%601.Result%2A> output argument, a non-generic overload of `Invoke` must be used in order to retrieve the additional arguments.</span></span> <span data-ttu-id="6a128-131">Para ello, la definición de flujo de trabajo pasada a `Invoke` debe ser de tipo <xref:System.Activities.Activity>.</span><span class="sxs-lookup"><span data-stu-id="6a128-131">To do this, the workflow definition passed into `Invoke` must be of type <xref:System.Activities.Activity>.</span></span> <span data-ttu-id="6a128-132">En este ejemplo la actividad `Divide` se deriva de `CodeActivity<int>`, pero se declara como <xref:System.Activities.Activity> para utilizar una sobrecarga no genérica de `Invoke` que devuelve un diccionario de argumentos en lugar de un valor único.</span><span class="sxs-lookup"><span data-stu-id="6a128-132">In this example the `Divide` activity derives from `CodeActivity<int>`, but is declared as <xref:System.Activities.Activity> so that a non-generic overload of `Invoke` is used which returns a dictionary of arguments instead of a single return value.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#121](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#121)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#21)]  
  
## <a name="using-workflowapplication"></a><span data-ttu-id="6a128-133">Usar WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="6a128-133">Using WorkflowApplication</span></span>  

 <span data-ttu-id="6a128-134"><xref:System.Activities.WorkflowApplication> proporciona un amplio conjunto de características para la administración de instancias de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="6a128-134"><xref:System.Activities.WorkflowApplication> provides a rich set of features for workflow instance management.</span></span> <span data-ttu-id="6a128-135"><xref:System.Activities.WorkflowApplication> actúa como un proxy seguro para subprocesos para la <xref:System.Activities.Hosting.WorkflowInstance> real, que encapsula el tiempo de ejecución y proporciona métodos para crear y cargar las instancias de flujo de trabajo, pausar y reanudar, terminar y notificar los eventos de ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="6a128-135"><xref:System.Activities.WorkflowApplication> acts as a thread safe proxy to the actual  <xref:System.Activities.Hosting.WorkflowInstance>, which encapsulates the runtime, and provides methods for creating and loading workflow instances, pausing and resuming, terminating, and notification of lifecycle events.</span></span> <span data-ttu-id="6a128-136">Para ejecutar un flujo de trabajo mediante <xref:System.Activities.WorkflowApplication>, cree <xref:System.Activities.WorkflowApplication>, suscríbase a cualquier evento de ciclo de vida que desee, inicie el flujo de trabajo y, a continuación, espere a que termine.</span><span class="sxs-lookup"><span data-stu-id="6a128-136">To run a workflow using <xref:System.Activities.WorkflowApplication> you create the <xref:System.Activities.WorkflowApplication>, subscribe to any desired lifecycle events, start the workflow, and then wait for it to finish.</span></span> <span data-ttu-id="6a128-137">En este ejemplo, se crea una definición de flujo de trabajo que consta de una actividad <xref:System.Activities.Statements.WriteLine> y se crea una <xref:System.Activities.WorkflowApplication> usando la definición de flujo de trabajo especificada.</span><span class="sxs-lookup"><span data-stu-id="6a128-137">In this example, a workflow definition that consists of a <xref:System.Activities.Statements.WriteLine> activity is created and a <xref:System.Activities.WorkflowApplication> is created using the specified workflow definition.</span></span> <span data-ttu-id="6a128-138">Se controla <xref:System.Activities.WorkflowApplication.Completed%2A> de forma que se notifica al host cuando el flujo de trabajo se completa, el flujo de trabajo se inicia con una llamada a <xref:System.Activities.WorkflowApplication.Run%2A> y el host espera a que el flujo de trabajo se complete.</span><span class="sxs-lookup"><span data-stu-id="6a128-138"><xref:System.Activities.WorkflowApplication.Completed%2A> is handled so the host is notified when the workflow completes, the workflow is started with a call to <xref:System.Activities.WorkflowApplication.Run%2A>, and then the host waits for the workflow to complete.</span></span> <span data-ttu-id="6a128-139">Cuando se completa el flujo de trabajo, se establece <xref:System.Threading.AutoResetEvent> y la aplicación host puede reanudar la ejecución, tal y como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="6a128-139">When the workflow completes, the <xref:System.Threading.AutoResetEvent> is set and the host application can resume execution, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#31](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#31)]  
  
### <a name="workflowapplication-lifecycle-events"></a><span data-ttu-id="6a128-140">Eventos de ciclo de vida de WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="6a128-140">WorkflowApplication Lifecycle Events</span></span>  

 <span data-ttu-id="6a128-141">Además de <xref:System.Activities.WorkflowApplication.Completed%2A>, se puede notificar a los autores de hosts cuando se descargue un flujo de trabajo (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), se anule (<xref:System.Activities.WorkflowApplication.Aborted%2A>), se vuelva inactivo (<xref:System.Activities.WorkflowApplication.Idle%2A> y <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>) o se produzca una excepción no controlada (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span><span class="sxs-lookup"><span data-stu-id="6a128-141">In addition to <xref:System.Activities.WorkflowApplication.Completed%2A>, host authors can be notified when a workflow is unloaded (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), aborted (<xref:System.Activities.WorkflowApplication.Aborted%2A>), becomes idle (<xref:System.Activities.WorkflowApplication.Idle%2A> and <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>), or an unhandled exception occurs (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span></span> <span data-ttu-id="6a128-142">Los desarrolladores de aplicaciones de flujo de trabajo pueden administrar estas notificaciones y realizar la acción adecuada, tal y como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="6a128-142">Workflow application developers can handle these notifications and take appropriate action, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#32](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#32)]  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="6a128-143">Definir argumentos de entrada de un flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="6a128-143">Setting Input Arguments of a Workflow</span></span>  

 <span data-ttu-id="6a128-144">Se pueden pasar datos a un flujo de trabajo cuando se inicia gracias a un diccionario de parámetros, al igual que la manera en que los datos se pasan cuando se usa <xref:System.Activities.WorkflowInvoker>.</span><span class="sxs-lookup"><span data-stu-id="6a128-144">Data can be passed into a workflow as it is started using a dictionary of parameters, similar to the way data is passed in when using <xref:System.Activities.WorkflowInvoker>.</span></span> <span data-ttu-id="6a128-145">Cada elemento en el diccionario se asigna a un argumento de entrada del flujo de trabajo especificado.</span><span class="sxs-lookup"><span data-stu-id="6a128-145">Each item in the dictionary maps to an input argument of the specified workflow.</span></span> <span data-ttu-id="6a128-146">En este ejemplo, se invoca un flujo de trabajo que está compuesto de una actividad <xref:System.Activities.Statements.WriteLine> y se especifica su argumento <xref:System.Activities.Statements.WriteLine.Text%2A> mediante el diccionario de parámetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="6a128-146">In this example, a workflow that consists of a <xref:System.Activities.Statements.WriteLine> activity is invoked and its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#30](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#30)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="6a128-147">Recuperar argumentos de salida de un flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="6a128-147">Retrieving Output Arguments of a Workflow</span></span>  

 <span data-ttu-id="6a128-148">Cuando un flujo de trabajo se completa, se puede recuperar cualquier parámetro de salida en el controlador <xref:System.Activities.WorkflowApplication.Completed%2A> teniendo acceso al diccionario <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6a128-148">When a workflow completes, any output arguments can be retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler by accessing the <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> dictionary.</span></span> <span data-ttu-id="6a128-149">En el siguiente ejemplo, se hospeda un flujo de trabajo utilizando <xref:System.Activities.WorkflowApplication>.</span><span class="sxs-lookup"><span data-stu-id="6a128-149">The following example hosts a workflow using <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="6a128-150">Una <xref:System.Activities.WorkflowApplication> instancia de se construye utilizando una definición de flujo de trabajo que consta de una sola `DiceRoll` actividad.</span><span class="sxs-lookup"><span data-stu-id="6a128-150">A <xref:System.Activities.WorkflowApplication> instance is constructed using a workflow definition consisting of a single `DiceRoll` activity.</span></span> <span data-ttu-id="6a128-151">La actividad `DiceRoll` tiene dos argumentos de salida que representan los resultados de la operación de tirar los dados.</span><span class="sxs-lookup"><span data-stu-id="6a128-151">The `DiceRoll` activity has two output arguments that represent the results of the dice roll operation.</span></span> <span data-ttu-id="6a128-152">Cuando se completa el flujo de trabajo, las salidas se recuperan en el controlador <xref:System.Activities.WorkflowApplication.Completed%2A>.</span><span class="sxs-lookup"><span data-stu-id="6a128-152">When the workflow completes, the outputs are retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#130](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#130)]  
  
 [!code-csharp[CFX_WorkflowApplicationExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#21)]  
  
> [!NOTE]
> <span data-ttu-id="6a128-153"><xref:System.Activities.WorkflowApplication> y <xref:System.Activities.WorkflowInvoker> toman un diccionario de argumentos de entrada y devuelven un diccionario de argumentos `out`.</span><span class="sxs-lookup"><span data-stu-id="6a128-153"><xref:System.Activities.WorkflowApplication> and <xref:System.Activities.WorkflowInvoker> take a dictionary of input arguments and return a dictionary of `out` arguments.</span></span> <span data-ttu-id="6a128-154">Estos parámetros, propiedades y valores devueltos del diccionario son del tipo `IDictionary<string, object>`.</span><span class="sxs-lookup"><span data-stu-id="6a128-154">These dictionary parameters, properties, and return values are of type `IDictionary<string, object>`.</span></span> <span data-ttu-id="6a128-155">La instancia real de la clase de diccionario que se pasa puede ser cualquier clase que implemente `IDictionary<string, object>`.</span><span class="sxs-lookup"><span data-stu-id="6a128-155">The actual instance of the dictionary class that is passed in can be any class that implements `IDictionary<string, object>`.</span></span> <span data-ttu-id="6a128-156">En estos ejemplos, se usa `Dictionary<string, object>`.</span><span class="sxs-lookup"><span data-stu-id="6a128-156">In these examples, `Dictionary<string, object>` is used.</span></span> <span data-ttu-id="6a128-157">Para obtener más información acerca de los diccionarios, vea <xref:System.Collections.Generic.IDictionary%602> y <xref:System.Collections.Generic.Dictionary%602> .</span><span class="sxs-lookup"><span data-stu-id="6a128-157">For more information about dictionaries, see <xref:System.Collections.Generic.IDictionary%602> and <xref:System.Collections.Generic.Dictionary%602>.</span></span>  
  
### <a name="passing-data-into-a-running-workflow-using-bookmarks"></a><span data-ttu-id="6a128-158">Pasar datos en un flujo de trabajo en ejecución mediante marcadores</span><span class="sxs-lookup"><span data-stu-id="6a128-158">Passing Data into a Running Workflow Using Bookmarks</span></span>  

 <span data-ttu-id="6a128-159">Los marcadores son el mecanismo por el que una actividad puede esperar de forma pasiva a que se reanude y, además, un mecanismo para pasar los datos a una instancia de flujo de trabajo en ejecución.</span><span class="sxs-lookup"><span data-stu-id="6a128-159">Bookmarks are the mechanism by which an activity can passively wait to be resumed and are a mechanism for passing data into a running workflow instance.</span></span> <span data-ttu-id="6a128-160">Si una actividad está esperando los datos, puede crear <xref:System.Activities.Bookmark> y registrar un método de devolución de llamada que se va a llamar cuando se reanude <xref:System.Activities.Bookmark>, tal y como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="6a128-160">If an activity is waiting for data, it can create a <xref:System.Activities.Bookmark> and register a callback method to be called when the <xref:System.Activities.Bookmark> is resumed, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#15](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#15)]  
  
 <span data-ttu-id="6a128-161">Cuando se ejecuta, la actividad `ReadLine` crea un <xref:System.Activities.Bookmark>, registra una devolución de llamada y, a continuación, espera a que se reanude <xref:System.Activities.Bookmark>.</span><span class="sxs-lookup"><span data-stu-id="6a128-161">When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed.</span></span> <span data-ttu-id="6a128-162">Cuando lo haga, la actividad `ReadLine` asigna los datos que se pasaron con <xref:System.Activities.Bookmark> a su argumento <xref:System.Activities.Activity%601.Result%2A>.</span><span class="sxs-lookup"><span data-stu-id="6a128-162">When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument.</span></span> <span data-ttu-id="6a128-163">En este ejemplo, se crea un flujo de trabajo que usa la actividad `ReadLine` para recopilar el nombre del usuario y mostrarlo en la ventana de la consola.</span><span class="sxs-lookup"><span data-stu-id="6a128-163">In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#22](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#22)]  
  
 <span data-ttu-id="6a128-164">Cuando se ejecuta la actividad `ReadLine`, crea un <xref:System.Activities.Bookmark> denominado `UserName` y, a continuación, espera a que se reanude el marcador.</span><span class="sxs-lookup"><span data-stu-id="6a128-164">When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed.</span></span> <span data-ttu-id="6a128-165">El host recopila los datos deseados y, a continuación, reanuda <xref:System.Activities.Bookmark>.</span><span class="sxs-lookup"><span data-stu-id="6a128-165">The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>.</span></span> <span data-ttu-id="6a128-166">El flujo de trabajo se reanuda, muestra el nombre y, a continuación, finaliza.</span><span class="sxs-lookup"><span data-stu-id="6a128-166">The workflow resumes, displays the name, and then completes.</span></span>  
  
 <span data-ttu-id="6a128-167">La aplicación host puede inspeccionar el flujo de trabajo para determinar si hay marcadores activos.</span><span class="sxs-lookup"><span data-stu-id="6a128-167">The host application can inspect the workflow to determine if there are any active bookmarks.</span></span> <span data-ttu-id="6a128-168">Puede hacerlo llamando al método <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> de una instancia <xref:System.Activities.WorkflowApplication> o inspeccionando el objeto <xref:System.Activities.WorkflowApplicationIdleEventArgs> en el controlador <xref:System.Activities.WorkflowApplication.Idle%2A>.</span><span class="sxs-lookup"><span data-stu-id="6a128-168">It can do this by calling the <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> method of a <xref:System.Activities.WorkflowApplication> instance, or by inspecting the <xref:System.Activities.WorkflowApplicationIdleEventArgs> in the <xref:System.Activities.WorkflowApplication.Idle%2A> handler.</span></span>  
  
 <span data-ttu-id="6a128-169">El siguiente ejemplo de código es similar al ejemplo anterior salvo que los marcadores activos se enumeran antes de que se reanude el marcador.</span><span class="sxs-lookup"><span data-stu-id="6a128-169">The following code example is like the previous example except that the active bookmarks are enumerated before the bookmark is resumed.</span></span> <span data-ttu-id="6a128-170">Se inicia el flujo de trabajo, y una vez se ha creado el objeto <xref:System.Activities.Bookmark> y se ha quedado inactivo el flujo de trabajo, se llama al método <xref:System.Activities.WorkflowApplication.GetBookmarks%2A>.</span><span class="sxs-lookup"><span data-stu-id="6a128-170">The workflow is started, and once the <xref:System.Activities.Bookmark> is created and the workflow goes idle, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> is called.</span></span> <span data-ttu-id="6a128-171">Cuando se completa el flujo de trabajo, se muestra la siguiente salida en la consola.</span><span class="sxs-lookup"><span data-stu-id="6a128-171">When the workflow is completed, the following output is displayed to the console.</span></span>  
  
 <span data-ttu-id="6a128-172">**¿Cómo se llama?**</span><span class="sxs-lookup"><span data-stu-id="6a128-172">**What is your name?**</span></span>  
<span data-ttu-id="6a128-173">**BookmarkName: username-OwnerDisplayName: readline** 
 **Steve** 
 **Hola, Steve**</span><span class="sxs-lookup"><span data-stu-id="6a128-173">**BookmarkName: UserName - OwnerDisplayName: ReadLine**
**Steve**
**Hello, Steve**</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#14](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#14)]  
  
 <span data-ttu-id="6a128-174">El siguiente ejemplo de código inspecciona el objeto <xref:System.Activities.WorkflowApplicationIdleEventArgs> pasado al controlador de la propiedad <xref:System.Activities.WorkflowApplication.Idle%2A> de una instancia de <xref:System.Activities.WorkflowApplication>.</span><span class="sxs-lookup"><span data-stu-id="6a128-174">The following code example inspects the <xref:System.Activities.WorkflowApplicationIdleEventArgs> passed into the <xref:System.Activities.WorkflowApplication.Idle%2A> handler of a <xref:System.Activities.WorkflowApplication> instance.</span></span> <span data-ttu-id="6a128-175">En este ejemplo, el flujo de trabajo que va a estar inactivo tiene un objeto <xref:System.Activities.Bookmark> con el nombre `EnterGuess`, que una actividad denominada `ReadInt` posee.</span><span class="sxs-lookup"><span data-stu-id="6a128-175">In this example the workflow going idle has one <xref:System.Activities.Bookmark> with a name of `EnterGuess`, owned by an activity named `ReadInt`.</span></span> <span data-ttu-id="6a128-176">Este ejemplo de código se basa en [Cómo: ejecutar un flujo de trabajo](how-to-run-a-workflow.md), que forma parte del [tutorial de introducción](getting-started-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="6a128-176">This code example is based off of [How to: Run a Workflow](how-to-run-a-workflow.md), which is part of the [Getting Started Tutorial](getting-started-tutorial.md).</span></span> <span data-ttu-id="6a128-177">Si el controlador de la propiedad <xref:System.Activities.WorkflowApplication.Idle%2A> en ese paso se modifica para contener el código de este ejemplo, se muestra la siguiente salida.</span><span class="sxs-lookup"><span data-stu-id="6a128-177">If the <xref:System.Activities.WorkflowApplication.Idle%2A> handler in that step is modified to contain the code from this example, the following output is displayed.</span></span>  
  
 <span data-ttu-id="6a128-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span><span class="sxs-lookup"><span data-stu-id="6a128-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span></span>

 [!code-csharp[CFX_WorkflowApplicationExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#2)]  
  
## <a name="summary"></a><span data-ttu-id="6a128-179">Resumen</span><span class="sxs-lookup"><span data-stu-id="6a128-179">Summary</span></span>  

 <span data-ttu-id="6a128-180"><xref:System.Activities.WorkflowInvoker> proporciona una manera ligera de invocar los flujos de trabajo y, aunque proporciona los métodos para pasar los datos al principio de un flujo de trabajo y extraer los datos de un flujo de trabajo completado, no se proporciona para escenarios más complejos, que son aquellos en los se puede usar <xref:System.Activities.WorkflowApplication>.</span><span class="sxs-lookup"><span data-stu-id="6a128-180"><xref:System.Activities.WorkflowInvoker> provides a lightweight way to invoke workflows, and although it provides methods for passing data in at the start of a workflow and extracting data from a completed workflow, it does not provide for more complex scenarios which is where <xref:System.Activities.WorkflowApplication> can be used.</span></span>

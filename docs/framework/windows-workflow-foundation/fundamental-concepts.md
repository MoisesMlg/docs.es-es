---
title: Conceptos fundamentales de Windows Workflow
description: En este artículo se describen algunos de los conceptos del desarrollo de flujos de trabajo en el .NET Framework 4.6.1 que pueden ser desconocidos para algunos desarrolladores.
ms.date: 03/30/2017
ms.assetid: 0e930e80-5060-45d2-8a7a-95c0690105d4
ms.openlocfilehash: a7683791c7aed54beed9256ab08010dfeebe9936
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2020
ms.locfileid: "96265302"
---
# <a name="fundamental-windows-workflow-concepts"></a><span data-ttu-id="8d4fe-103">Conceptos fundamentales de Windows Workflow</span><span class="sxs-lookup"><span data-stu-id="8d4fe-103">Fundamental Windows Workflow Concepts</span></span>

<span data-ttu-id="8d4fe-104">El desarrollo del flujo de trabajo en [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] usa conceptos que pueden ser nuevos para algunos desarrolladores de software.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-104">Workflow development in the [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] uses concepts that may be new to some developers.</span></span> <span data-ttu-id="8d4fe-105">En este tema se describen algunos de ellos y la forma en que se implementan.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-105">This topic describes some of the concepts and how they are implemented.</span></span>  
  
## <a name="workflows-and-activities"></a><span data-ttu-id="8d4fe-106">Flujos de trabajo y actividades</span><span class="sxs-lookup"><span data-stu-id="8d4fe-106">Workflows and Activities</span></span>  

 <span data-ttu-id="8d4fe-107">Un flujo de trabajo es una colección estructurada de acciones que modela un proceso y</span><span class="sxs-lookup"><span data-stu-id="8d4fe-107">A workflow is a structured collection of actions that models a process.</span></span> <span data-ttu-id="8d4fe-108">cada acción en el flujo de trabajo se modela como una actividad.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-108">Each action in the workflow is modeled as an activity.</span></span> <span data-ttu-id="8d4fe-109">Un host interactúa con un flujo de trabajo mediante <xref:System.Activities.WorkflowInvoker> para invocar un flujo de trabajo como si fuera un método, <xref:System.Activities.WorkflowApplication> para el control explícito sobre la ejecución de una instancia de flujo de trabajo y <xref:System.ServiceModel.WorkflowServiceHost> para las interacciones basadas en mensajes en escenarios de varias instancias.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-109">A host interacts with a workflow by using <xref:System.Activities.WorkflowInvoker> for invoking a workflow as if it were a method,  <xref:System.Activities.WorkflowApplication> for explicit control over the execution of a single workflow instance, and <xref:System.ServiceModel.WorkflowServiceHost> for message-based interactions in multi-instance scenarios.</span></span> <span data-ttu-id="8d4fe-110">Dado que los pasos del flujo de trabajo se definen como una jerarquía de actividades, se puede decir que la actividad de nivel superior en la jerarquía define el propio flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-110">Because steps of the workflow are defined as a hierarchy of activities, the topmost activity in the hierarchy can be said to define the workflow itself.</span></span> <span data-ttu-id="8d4fe-111">Este modelo de jerarquía ocupa el lugar de las clases `SequentialWorkflow` y `StateMachineWorkflow` explícitas de versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-111">This hierarchy model takes the place of the explicit `SequentialWorkflow` and `StateMachineWorkflow` classes from previous versions.</span></span> <span data-ttu-id="8d4fe-112">Las actividades se desarrollan como colecciones de otras actividades (con la clase <xref:System.Activities.Activity> como base, normalmente definida con XAML) o se crean de manera personalizada mediante la clase <xref:System.Activities.CodeActivity> (que puede usar el tiempo de ejecución para tener acceso a los datos) o usando la clase <xref:System.Activities.NativeActivity>, que expone todo el tiempo de ejecución del flujo de trabajo a disposición del autor de la actividad.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-112">Activities themselves are developed as collections of other activities (using the <xref:System.Activities.Activity> class as a base, usually defined by using XAML) or are custom created by using the <xref:System.Activities.CodeActivity> class, which can use the runtime for data access, or by using the <xref:System.Activities.NativeActivity> class, which exposes the breadth of the workflow runtime to the activity author.</span></span> <span data-ttu-id="8d4fe-113">Las actividades desarrolladas con las clases <xref:System.Activities.CodeActivity> y <xref:System.Activities.NativeActivity> se crean con lenguajes conformes a CLR como, por ejemplo, C#.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-113">Activities developed by using <xref:System.Activities.CodeActivity> and <xref:System.Activities.NativeActivity> are created by using CLR-compliant languages such as C#.</span></span>  
  
## <a name="activity-data-model"></a><span data-ttu-id="8d4fe-114">Modelo de datos de actividad</span><span class="sxs-lookup"><span data-stu-id="8d4fe-114">Activity Data Model</span></span>  

 <span data-ttu-id="8d4fe-115">Las actividades se almacenan y comparten datos con los tipos mostrados en la siguiente tabla.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-115">Activities store and share data by using the types shown in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="8d4fe-116">Variable</span><span class="sxs-lookup"><span data-stu-id="8d4fe-116">Variable</span></span>|<span data-ttu-id="8d4fe-117">Almacena los datos en una actividad.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-117">Stores data in an activity.</span></span>|  
|<span data-ttu-id="8d4fe-118">Argumento</span><span class="sxs-lookup"><span data-stu-id="8d4fe-118">Argument</span></span>|<span data-ttu-id="8d4fe-119">Mueve los datos dentro y fuera de una de una actividad.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-119">Moves data into and out of an activity.</span></span>|  
|<span data-ttu-id="8d4fe-120">Expression</span><span class="sxs-lookup"><span data-stu-id="8d4fe-120">Expression</span></span>|<span data-ttu-id="8d4fe-121">Una actividad con un valor devuelto elevado usado en enlaces de argumento.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-121">An activity with an elevated return value used in argument bindings.</span></span>|  
  
## <a name="workflow-runtime"></a><span data-ttu-id="8d4fe-122">Tiempo de ejecución de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="8d4fe-122">Workflow Runtime</span></span>  

 <span data-ttu-id="8d4fe-123">El tiempo de ejecución de flujo de trabajo es el entorno en el que los flujos de trabajo se ejecutan.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-123">The workflow runtime is the environment in which workflows execute.</span></span> <span data-ttu-id="8d4fe-124"><xref:System.Activities.WorkflowInvoker> es la manera más sencilla de ejecutar un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-124"><xref:System.Activities.WorkflowInvoker> is the simplest way to execute a workflow.</span></span> <span data-ttu-id="8d4fe-125">El host usa <xref:System.Activities.WorkflowInvoker> para lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8d4fe-125">The host uses <xref:System.Activities.WorkflowInvoker> for the following:</span></span>  
  
- <span data-ttu-id="8d4fe-126">Para invocar un flujo de trabajo de forma sincrónica.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-126">To synchronously invoke a workflow.</span></span>  
  
- <span data-ttu-id="8d4fe-127">Para proporcionar datos o recuperar las salidas de un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-127">To provide input to, or retrieve output from a workflow.</span></span>  
  
- <span data-ttu-id="8d4fe-128">Para agregar extensiones que van a usar las actividades.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-128">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="8d4fe-129"><xref:System.Activities.ActivityInstance> es el proxy seguro para subprocesos que los hosts pueden usar para interactuar con el tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-129"><xref:System.Activities.ActivityInstance> is the thread-safe proxy that hosts can use to interact with the runtime.</span></span> <span data-ttu-id="8d4fe-130">El host usa <xref:System.Activities.ActivityInstance> para lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8d4fe-130">The host uses <xref:System.Activities.ActivityInstance> for the following:</span></span>  
  
- <span data-ttu-id="8d4fe-131">Para adquirir una instancia creándola o cargándola desde un almacén de instancias.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-131">To acquire an instance by creating it or loading it from an instance store.</span></span>  
  
- <span data-ttu-id="8d4fe-132">Para que se le notifique sobre los eventos de ciclo de vida de la instancia.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-132">To be notified of instance life-cycle events.</span></span>  
  
- <span data-ttu-id="8d4fe-133">Para controlar la ejecución del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-133">To control workflow execution.</span></span>  
  
- <span data-ttu-id="8d4fe-134">Para proporcionar datos o recuperar las salidas de un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-134">To provide input to, or retrieve output from a workflow.</span></span>  
  
- <span data-ttu-id="8d4fe-135">Para señalar una continuación del flujo de trabajo y pasar valores en el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-135">To signal a workflow continuation and pass values into the workflow.</span></span>  
  
- <span data-ttu-id="8d4fe-136">Para conservar los datos del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-136">To persist workflow data.</span></span>  
  
- <span data-ttu-id="8d4fe-137">Para agregar extensiones que van a usar las actividades.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-137">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="8d4fe-138">Las actividades tienen acceso al entorno de tiempo de ejecución de flujo de trabajo mediante la clase derivada de <xref:System.Activities.ActivityContext> adecuada, como <xref:System.Activities.NativeActivityContext> o <xref:System.Activities.CodeActivityContext>.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-138">Activities gain access to the workflow runtime environment by using the appropriate <xref:System.Activities.ActivityContext> derived class, such as <xref:System.Activities.NativeActivityContext> or <xref:System.Activities.CodeActivityContext>.</span></span> <span data-ttu-id="8d4fe-139">Usan esto para resolver argumentos y variables, para programar las actividades secundarias, y para muchos otros objetivos.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-139">They use this for resolving arguments and variables, for scheduling child activities, and for many other purposes.</span></span>  
  
## <a name="services"></a><span data-ttu-id="8d4fe-140">Servicios</span><span class="sxs-lookup"><span data-stu-id="8d4fe-140">Services</span></span>  

 <span data-ttu-id="8d4fe-141">Los flujos de trabajo proporcionan una manera natural de implementar y tener acceso a servicios flojamente acoplados usando actividades de mensajería.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-141">Workflows provide a natural way to implement and access loosely-coupled services, using messaging activities.</span></span> <span data-ttu-id="8d4fe-142">Las actividades de mensajería se basan en WCF y son el mecanismo principal que se usa para obtener datos dentro y fuera de un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-142">Messaging activities are built on WCF and are the primary mechanism used to get data into and out of a workflow.</span></span> <span data-ttu-id="8d4fe-143">Puede componer actividades de mensajería para modelar cualquier tipo de patrón de intercambio de mensajes que desee.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-143">You can compose messaging activities together to model any kind of message exchange pattern you wish.</span></span> <span data-ttu-id="8d4fe-144">Para obtener más información, consulte [actividades de mensajería](../wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="8d4fe-144">For more information, see [Messaging Activities](../wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="8d4fe-145">Los servicios de flujo de trabajo se hospedan mediante la clase <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-145">Workflow services are hosted using the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="8d4fe-146">Para obtener más información, vea [Introducción a los servicios de flujo de trabajo de hospedaje](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8d4fe-146">For more information, see [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span> <span data-ttu-id="8d4fe-147">Para obtener más información sobre los servicios de flujo de trabajo, vea [servicios de flujo de trabajo](../wcf/feature-details/workflow-services.md)</span><span class="sxs-lookup"><span data-stu-id="8d4fe-147">For more information about workflow services see [Workflow Services](../wcf/feature-details/workflow-services.md)</span></span>  
  
## <a name="persistence-unloading-and-long-running-workflows"></a><span data-ttu-id="8d4fe-148">Persistencia, descarga y flujos de trabajo de ejecución prolongada</span><span class="sxs-lookup"><span data-stu-id="8d4fe-148">Persistence, Unloading, and Long-Running Workflows</span></span>  

 <span data-ttu-id="8d4fe-149">El flujo de trabajo de Windows simplifica la creación de programas reactivos de ejecución prolongada al proporcionar:</span><span class="sxs-lookup"><span data-stu-id="8d4fe-149">Windows Workflow simplifies the authoring of long-running reactive programs by providing:</span></span>  
  
- <span data-ttu-id="8d4fe-150">Actividades que tienen acceso a datos externos.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-150">Activities that access external input.</span></span>  
  
- <span data-ttu-id="8d4fe-151">La capacidad de crear objetos <xref:System.Activities.Bookmark> que un agente de escucha del host puede reanudar.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-151">The ability to create <xref:System.Activities.Bookmark> objects that can be resumed by a host listener.</span></span>  
  
- <span data-ttu-id="8d4fe-152">La capacidad de conservar los datos de un flujo de trabajo y descargar el flujo de trabajo, a continuación, recargue y reactive el flujo de trabajo en respuesta a la reasunción de los objetos <xref:System.Activities.Bookmark> en un flujo de trabajo determinado.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-152">The ability to persist a workflow’s data and unload the workflow, and then reload and reactivate the workflow in response to the resumption of <xref:System.Activities.Bookmark> objects in a particular workflow.</span></span>  
  
 <span data-ttu-id="8d4fe-153">Un flujo de trabajo ejecuta continuamente las actividades hasta que no haya más que ejecutar o hasta que todas las actividades actualmente en ejecución estén esperando datos.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-153">A workflow continuously executes activities until there are no more activities to execute or until all currently executing activities are waiting for input.</span></span> <span data-ttu-id="8d4fe-154">En este último estado, el flujo de trabajo está inactivo.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-154">In this latter state, the workflow is idle.</span></span> <span data-ttu-id="8d4fe-155">Es normal que un host descargue los flujos de trabajo inactivos y los recargue para continuar con la ejecución cuando llega un mensaje.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-155">It is common for a host to unload workflows that have gone idle and to reload them to continue execution when a message arrives.</span></span> <span data-ttu-id="8d4fe-156"><xref:System.ServiceModel.Activities.WorkflowServiceHost> proporciona la funcionalidad para esta característica y proporciona una directiva de descarga extensible.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-156"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides functionality for this feature and provides an extensible unload policy.</span></span> <span data-ttu-id="8d4fe-157">En el caso de los bloques de ejecución que usen el estado de datos volátil o datos que no se puedan conservar, una actividad puede indicar a un host que no se debería conservar mediante <xref:System.Activities.NoPersistHandle>.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-157">For blocks of execution that use volatile state data or other data that cannot be persisted, an activity can indicate to a host that it should not be persisted by using the <xref:System.Activities.NoPersistHandle>.</span></span> <span data-ttu-id="8d4fe-158">Un flujo de trabajo también puede conservar explícitamente sus datos en medios de almacenamiento duraderos mediante la actividad <xref:System.Activities.Statements.Persist>.</span><span class="sxs-lookup"><span data-stu-id="8d4fe-158">A workflow can also explicitly persist its data to a durable storage medium by using the <xref:System.Activities.Statements.Persist> activity.</span></span>
